import{$ as es,A as mi,Aa as ds,B as Zt,Ba as Oo,C as $e,Ca as st,D as Kt,Da as T,E as Ue,Ea as ms,F as qr,Fa as Ge,G as hi,Ga as jt,H as Gr,Ha as hs,I as Co,Ia as To,J as So,Ja as Nt,Ka as yi,L as Qr,La as at,M as Zr,Ma as ps,N as Kr,Na as Bt,O as Yr,Oa as us,P as Xr,Pa as Vt,Q as ue,Qa as ko,R as nt,Ra as zt,S as Jr,Sa as fs,T as Pn,Ta as gs,U as wo,Ua as _s,V as rt,Va as q,W as Te,Wa as bs,X as We,Xa as Tn,Y as qe,Z as pi,_ as Dn,_a as N,a as zr,aa as ts,b as yo,ba as Mo,ca as En,da as Po,ea as tt,fa as ui,fb as vs,g as Hr,ga as fi,gb as lt,h as $r,ha as Do,hb as ys,ia as Lt,ib as ct,ja as gi,jb as Me,ka as Eo,kb as Qe,l as ci,la as On,lb as de,m as di,ma as _i,mb as V,n as te,na as is,oa as os,ob as Ht,pa as ns,pb as Se,qa as bi,qb as B,ra as vi,rb as xs,sa as rs,sb as Pt,t as ie,ta as ss,tb as Pe,u as oe,ua as Mt,ub as xi,v as Y,va as as,vb as Ci,wa as ls,wb as Si,x as Ur,xb as wi,y as Wr,yb as Cs,z as xo,za as cs}from"./chunk-DT5NAUR3.js";import{b as kn,c as In,d as Io,f as Ro,g as Ao,h as $i}from"./chunk-DUKSTT3K.js";import{$b as le,Aa as R,C as xr,Cc as _e,D as Be,Dc as ai,E as Ve,Ec as vo,Fa as It,Ga as bo,Gb as me,Gc as li,Hb as L,Hc as pe,Ia as X,Ib as j,Ic as wt,Jb as At,Jc as Nr,K as ot,Kb as si,Kc as Hi,Lb as Ee,M as Cr,Mb as Oe,Mc as Ce,Nb as v,Ob as h,Oc as fe,P as Sr,Pb as m,Pc as Br,Qb as w,Qc as Vr,Rb as yt,S as wr,Sb as xt,Tb as Gt,Ub as K,Vb as He,W as Mr,Wb as Or,Xb as x,Y as Xe,Z as oi,Zb as P,_ as Je,_b as et,a as M,aa as ni,ac as Ct,b as ve,bb as c,bc as ce,c as ei,cc as U,dc as W,e as je,ea as go,eb as qt,ec as Tr,fa as $,fb as zi,fc as St,g as Tt,ga as ye,gb as bt,gc as Qt,hc as we,ia as A,ic as Ft,j as S,jb as ri,jc as F,k as Ne,ka as l,kc as kr,lc as f,m as vr,mc as y,n as yr,nc as E,ob as C,oc as Ir,pa as Pr,pb as xe,pc as Rr,q as Vi,qb as Q,qc as Ar,ra as k,rc as Fr,sa as I,sb as Rt,sc as Lr,tb as Dr,tc as Mn,u as ti,ua as ae,ub as ze,uc as he,va as kt,vb as Er,vc as _,wa as Z,wc as b,xb as J,xc as jr,yb as re,z as ii,za as _o,zb as vt}from"./chunk-5Z2EECOW.js";var Yt=(()=>{let i=class i{constructor(){this.imageChangeSub=new Ne({mosaicConfig:null,shouldFocus:!1}),this.imageChange$=this.imageChangeSub.asObservable()}emitImageChange(t,o){this.imageChangeSub.next({mosaicConfig:t,shouldFocus:o})}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac});let n=i;return n})();var Ss=(()=>{let i=class i{constructor(){this.store=l(N),this.destroyRef=l(Z),this.configService=l(Yt),this.mosaicConfig=this.store.selectSignal(lt),this.imageObject=R(null),this.ribbonActions=[{iconName:"recenter",visibility:_e(()=>this.imageObject()?"on":"disabled"),onClick:()=>{this.focusOnImage(this.imageObject()),this.activeCanvas.redraw()}}]}sectionEntered(t){return this.activeCanvas=t,{ribbon:this.ribbonActions}}ngAfterViewInit(){queueMicrotask(()=>this.subscribeOnMosaicConfigChange())}subscribeOnMosaicConfigChange(){this.configService.imageChange$.pipe(q(this.destroyRef)).subscribe(t=>this.drawImage(t?.mosaicConfig,t?.shouldFocus))}async drawImage(t,o){let r=this.imageObject();r?.removeObject(),r=null,t&&(r=await Pt.createImageObject(t),this.activeCanvas.addCanvasObject(r,!1),o&&this.focusOnImage(r)),this.imageObject.set(r),this.activeCanvas.redraw()}focusOnImage(t){let o=Pt.calculateZoomForImage(t.size,this.activeCanvas.viewport);this.activeCanvas.setViewport(o,B.zero)}onRouterChange(){this.configService.emitImageChange(this.mosaicConfig(),!1)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-configuration"]],features:[he([Yt])],decls:1,vars:0,consts:[[3,"activate"]],template:function(o,r){o&1&&(h(0,"router-outlet",0),x("activate",function(){return r.onRouterChange()}),m())},dependencies:[V,Y,di],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box;height:100%;padding:20px 10px;overflow-y:auto;overflow-x:hidden}"],changeDetection:0});let n=i;return n})();function bl(n,i){}var $t=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var An=(()=>{class n extends Do{_elementRef=l(X);_focusTrapFactory=l(Kr);_config;_interactivityChecker=l(Zr);_ngZone=l(re);_focusMonitor=l(qr);_renderer=l(bt);_changeDetectorRef=l(Ce);_injector=l(ae);_platform=l($e);_document=l(kt);_portalOutlet;_focusTrapped=new S;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=l($t,{optional:!0})||new $t,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let t=this._ariaLabelledByQueue.indexOf(e);t>-1&&(this._ariaLabelledByQueue.splice(t,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),t}attachTemplatePortal(e){this._portalOutlet.hasAttached();let t=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),t}attachDomPortal=e=>{this._portalOutlet.hasAttached();let t=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),t};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,t){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{r(),s(),e.removeAttribute("tabindex")},r=this._renderer.listen(e,"blur",o),s=this._renderer.listen(e,"mousedown",o)})),e.focus(t)}_focusByCssSelector(e,t){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,t)}_trapFocus(e){this._isDestroyed||vt(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,t=null;if(typeof e=="string"?t=this._document.querySelector(e):typeof e=="boolean"?t=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(t=e),this._config.restoreFocus&&t&&typeof t.focus=="function"){let o=mi(),r=this._elementRef.nativeElement;(!o||o===this._document.body||o===r||r.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus?.(e)}_containsFocus(){let e=this._elementRef.nativeElement,t=mi();return e===t||e.contains(t)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=mi()))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,o){if(t&1&&ce(Lt,7),t&2){let r;U(r=W())&&(o._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,o){t&2&&me("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Rt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,o){t&1&&ze(0,bl,0,0,"ng-template",0)},dependencies:[Lt],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return n})(),Ui=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new S;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(i,e){this.overlayRef=i,this.config=e,this.disableClose=e.disableClose,this.backdropClick=i.backdropClick(),this.keydownEvents=i.keydownEvents(),this.outsidePointerEvents=i.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(t=>{t.keyCode===27&&!this.disableClose&&!nt(t)&&(t.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=i.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(i,e){if(this._canClose(i)){let t=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),t.next(i),t.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(i="",e=""){return this.overlayRef.updateSize({width:i,height:e}),this}addPanelClass(i){return this.overlayRef.addPanelClass(i),this}removePanelClass(i){return this.overlayRef.removePanelClass(i),this}_canClose(i){let e=this.config;return!!this.containerInstance&&(!e.closePredicate||e.closePredicate(i,e,this.componentInstance))}},vl=new A("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=l(ae);return()=>Eo(n)}}),yl=new A("DialogData"),xl=new A("DefaultDialogConfig");function Cl(n){let i=R(n),e=new J;return{valueSignal:i,get value(){return i()},change:e,ngOnDestroy(){e.complete()}}}var Fn=(()=>{class n{_injector=l(ae);_defaultOptions=l(xl,{optional:!0});_parentDialog=l(n,{optional:!0,skipSelf:!0});_overlayContainer=l(is);_idGenerator=l(ue);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new S;_afterOpenedAtThisLevel=new S;_ariaHiddenElements=new Map;_scrollStrategy=l(vl);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=ii(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xe(void 0)));constructor(){}open(e,t){let o=this._defaultOptions||new $t;t=M(M({},o),t),t.id=t.id||this._idGenerator.getId("cdk-dialog-"),t.id&&this.getDialogById(t.id);let r=this._getOverlayConfig(t),s=vi(this._injector,r),a=new Ui(s,t),d=this._attachContainer(s,a,t);if(a.containerInstance=d,!this.openDialogs.length){let u=this._overlayContainer.getContainerElement();d._focusTrapped?d._focusTrapped.pipe(ot(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(u)}):this._hideNonDialogContentFromAssistiveTechnology(u)}return this._attachDialogContent(e,a,d,t),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Rn(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){Rn(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),Rn(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let t=new _i({positionStrategy:e.positionStrategy||bi().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation,disableAnimations:e.disableAnimations});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachContainer(e,t,o){let r=o.injector||o.viewContainerRef?.injector,s=[{provide:$t,useValue:o},{provide:Ui,useValue:t},{provide:os,useValue:e}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=An;let d=new ui(a,o.viewContainerRef,ae.create({parent:r||this._injector,providers:s}));return e.attach(d).instance}_attachDialogContent(e,t,o,r){if(e instanceof qt){let s=this._createInjector(r,t,o,void 0),a={$implicit:r.data,dialogRef:t};r.templateContext&&(a=M(M({},a),typeof r.templateContext=="function"?r.templateContext():r.templateContext)),o.attachTemplatePortal(new fi(e,null,a,s))}else{let s=this._createInjector(r,t,o,this._injector),a=o.attachComponentPortal(new ui(e,r.viewContainerRef,s));t.componentRef=a,t.componentInstance=a.instance}}_createInjector(e,t,o,r){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:yl,useValue:e.data},{provide:Ui,useValue:t}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(t,e,o)):a.push(...e.providers)),e.direction&&(!s||!s.get(rt,null,{optional:!0}))&&a.push({provide:rt,useValue:Cl(e.direction)}),ae.create({parent:s||r,providers:a})}_removeOpenDialog(e,t){let o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),t&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let t=e.parentElement.children;for(let o=t.length-1;o>-1;o--){let r=t[o];r!==e&&r.nodeName!=="SCRIPT"&&r.nodeName!=="STYLE"&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rn(n,i){let e=n.length;for(;e--;)i(n[e])}var ws=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({providers:[Fn],imports:[Mt,gi,Xr,gi]})}return n})();function Sl(n,i){}var Gi=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},Ln="mdc-dialog--open",Ms="mdc-dialog--opening",Ps="mdc-dialog--closing",wl=150,Ml=75,Os=(()=>{class n extends An{_animationStateChanged=new J;_animationsEnabled=!tt();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Es(this._config.enterAnimationDuration)??wl:0;_exitAnimationDuration=this._animationsEnabled?Es(this._config.exitAnimationDuration)??Ml:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Ds,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ms,Ln)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Ln),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Ln),this._animationsEnabled?(this._hostElement.style.setProperty(Ds,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Ps)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Ms,Ps)}_waitForAnimationToComplete(e,t){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(t,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let t=super.attachComponentPortal(e);return t.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),t}static \u0275fac=(()=>{let e;return function(o){return(e||(e=bo(n)))(o||n)}})();static \u0275cmp=C({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(t,o){t&2&&(He("id",o._config.id),me("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),F("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[Rt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,o){t&1&&(h(0,"div",0)(1,"div",1),ze(2,Sl,0,0,"ng-template",2),m()())},dependencies:[Lt],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return n})(),Ds="--mat-dialog-transition-duration";function Es(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Kt(n.substring(0,n.length-2)):n.endsWith("s")?Kt(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var qi=(function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n})(qi||{}),Mi=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new S;_beforeClosed=new S;_result;_closeFallbackTimeout;_state=qi.OPEN;_closeInteractionType;constructor(i,e,t){this._ref=i,this._config=e,this._containerInstance=t,this.disableClose=e.disableClose,this.id=i.id,i.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(Ve(o=>o.state==="opened"),ot(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Ve(o=>o.state==="closed"),ot(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Be(this.backdropClick(),this.keydownEvents().pipe(Ve(o=>o.keyCode===27&&!this.disableClose&&!nt(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),jn(this,o.type==="keydown"?"keyboard":"mouse"))})}close(i){let e=this._config.closePredicate;e&&!e(i,this._config,this.componentInstance)||(this._result=i,this._containerInstance._animationStateChanged.pipe(Ve(t=>t.state==="closing"),ot(1)).subscribe(t=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=qi.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(i){let e=this._ref.config.positionStrategy;return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(i="",e=""){return this._ref.updateSize(i,e),this}addPanelClass(i){return this._ref.addPanelClass(i),this}removePanelClass(i){return this._ref.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=qi.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function jn(n,i,e){return n._closeInteractionType=i,n.close(e)}var Fo=new A("MatMdcDialogData"),Ts=new A("mat-mdc-dialog-default-options"),ks=new A("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=l(ae);return()=>Eo(n)}}),dt=(()=>{class n{_defaultOptions=l(Ts,{optional:!0});_scrollStrategy=l(ks);_parentDialog=l(n,{optional:!0,skipSelf:!0});_idGenerator=l(ue);_injector=l(ae);_dialog=l(Fn);_animationsDisabled=tt();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new S;_afterOpenedAtThisLevel=new S;dialogConfigClass=Gi;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=ii(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xe(void 0)));constructor(){this._dialogRefConstructor=Mi,this._dialogContainerType=Os,this._dialogDataToken=Fo}open(e,t){let o;t=M(M({},this._defaultOptions||new Gi),t),t.id=t.id||this._idGenerator.getId("mat-mdc-dialog-"),t.scrollStrategy=t.scrollStrategy||this._scrollStrategy();let r=this._dialog.open(e,ve(M({},t),{positionStrategy:bi(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||t.enterAnimationDuration?.toLocaleString()==="0"||t.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:t},{provide:$t,useValue:t}]},templateContext:()=>({dialogRef:o}),providers:(s,a,d)=>(o=new this._dialogRefConstructor(s,t,d),o.updatePosition(t?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=r.componentRef,o.componentInstance=r.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(o);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nn=(()=>{class n{dialogRef=l(Mi,{optional:!0});_elementRef=l(X);_dialog=l(dt);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=Rs(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let t=e._matDialogClose||e._matDialogCloseResult;t&&(this.dialogResult=t.currentValue)}_onButtonClick(e){jn(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,o){t&1&&x("click",function(s){return o._onButtonClick(s)}),t&2&&me("aria-label",o.ariaLabel||null)("type",o.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[It]})}return n})(),Is=(()=>{class n{_dialogRef=l(Mi,{optional:!0});_elementRef=l(X);_dialog=l(dt);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Rs(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n})}return n})(),Bn=(()=>{class n extends Is{id=l(ue).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=bo(n)))(o||n)}})();static \u0275dir=Q({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,o){t&2&&He("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Rt]})}return n})(),Vn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Dr([ts])]})}return n})(),zn=(()=>{class n extends Is{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=bo(n)))(o||n)}})();static \u0275dir=Q({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(t,o){t&2&&F("mat-mdc-dialog-actions-align-start",o.align==="start")("mat-mdc-dialog-actions-align-center",o.align==="center")("mat-mdc-dialog-actions-align-end",o.align==="end")},inputs:{align:"align"},features:[Rt]})}return n})();function Rs(n,i){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?i.find(t=>t.id===e.id):null}var Hn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({providers:[dt],imports:[ws,Mt,gi,Te,Te]})}return n})();var Pi=(()=>{let i=class i{constructor(){this.translate=l(ie),this.data=l(Fo),this.noLabel=this.data.noCustomLabel??this.translate.instant("common.no"),this.yesLabel=this.data.yesCustomLabel??this.translate.instant("common.yes")}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-dialog"]],decls:10,vars:5,consts:[[1,"dialog-content"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"]],template:function(o,r){o&1&&(h(0,"div",0)(1,"h1",1),f(2),m(),h(3,"div",2),f(4),m(),h(5,"div",3)(6,"button",4),f(7),m(),h(8,"button",5),f(9),m()()()),o&2&&(c(2),y(r.data.title),c(2),y(r.data.message),c(3),y(r.noLabel),c(),v("mat-dialog-close",!0),c(),y(r.yesLabel))},dependencies:[Hn,Nn,Bn,zn,Vn,V,de],styles:[".dialog-content[_ngcontent-%COMP%]{max-width:400px}.dialog-content[_ngcontent-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{padding-bottom:0}"],changeDetection:0});let n=i;return n})();function Dl(n,i){if(n&1){let e=K();h(0,"button",0),x("click",function(){k(e);let o=P();return I(o.navigateToProjectConfiguration())}),f(1),_(2,"translate"),m(),h(3,"button",1),f(4),_(5,"translate"),m(),h(6,"button",1),f(7),_(8,"translate"),m(),h(9,"button",2),x("click",function(){k(e);let o=P();return I(o.rejectProject())}),f(10),_(11,"translate"),m()}n&2&&(c(),y(b(2,4,"tool.config.menu.projectSettings")),c(3),y(b(5,6,"tool.config.menu.saveProject")),c(3),y(b(8,8,"tool.config.menu.loadProject")),c(3),y(b(11,10,"tool.config.menu.rejectProject")))}function El(n,i){if(n&1){let e=K();h(0,"button",3),x("click",function(){k(e);let o=P();return I(o.navigateToProjectConfiguration())}),f(1),_(2,"translate"),m(),h(3,"button",1),f(4),_(5,"translate"),m(),h(6,"button",1),f(7),_(8,"translate"),m()}n&2&&(c(),y(b(2,3,"tool.config.menu.newProject")),c(3),y(b(5,5,"tool.config.menu.exampleProjects")),c(3),y(b(8,7,"tool.config.menu.loadProject")))}var As=(()=>{let i=class i{constructor(){this.store=l(N),this.translate=l(ie),this.mosaicConfig=this.store.selectSignal(lt),this.dialog=l(dt),this.router=l(te),this.configService=l(Yt),this.destroyRef=l(Z)}navigateToProjectConfiguration(){this.router.navigate(["/tool/config/project"])}rejectProject(){let t={title:this.translate.instant("tool.config.menu.rejectProject"),message:this.translate.instant("tool.config.menu.rejectProjectWarning")};this.dialog.open(Pi,{data:t}).afterClosed().pipe(q(this.destroyRef)).subscribe(o=>{o&&(this.store.dispatch(Pe.projectCanceled()),this.configService.emitImageChange(null,!1))})}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-config-menu"]],decls:2,vars:1,consts:[["mat-flat-button","",3,"click"],["mat-flat-button","","color","accent","disabled",""],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","accent",3,"click"]],template:function(o,r){o&1&&L(0,Dl,12,12)(1,El,9,9),o&2&&j(r.mosaicConfig()?0:1)},dependencies:[V,de,Y,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:10px}"],changeDetection:0});let n=i;return n})();var $n=class{_box;_destroyed=new S;_resizeSubject=new S;_resizeObserver;_elementObservables=new Map;constructor(i){this._box=i,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(i){return this._elementObservables.has(i)||this._elementObservables.set(i,new Tt(e=>{let t=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(i,{box:this._box}),()=>{this._resizeObserver?.unobserve(i),t.unsubscribe(),this._elementObservables.delete(i)}}).pipe(Ve(e=>e.some(t=>t.target===i)),Mr({bufferSize:1,refCount:!0}),Je(this._destroyed))),this._elementObservables.get(i)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Fs=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=l(re);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,t){let o=t?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new $n(o)),this._observers.get(o).observe(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ol=["notch"],Tl=["matFormFieldNotchedOutline",""],kl=["*"],Ls=["iconPrefixContainer"],js=["textPrefixContainer"],Ns=["iconSuffixContainer"],Bs=["textSuffixContainer"],Il=["textField"],Rl=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Al=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Fl(n,i){n&1&&w(0,"span",20)}function Ll(n,i){if(n&1&&(h(0,"label",19),le(1,1),L(2,Fl,1,0,"span",20),m()),n&2){let e=P(2);v("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),me("for",e._control.disableAutomaticLabeling?null:e._control.id),c(2),j(!e.hideRequiredMarker&&e._control.required?2:-1)}}function jl(n,i){if(n&1&&L(0,Ll,3,5,"label",19),n&2){let e=P();j(e._hasFloatingLabel()?0:-1)}}function Nl(n,i){n&1&&w(0,"div",7)}function Bl(n,i){}function Vl(n,i){if(n&1&&ze(0,Bl,0,0,"ng-template",13),n&2){P(2);let e=we(1);v("ngTemplateOutlet",e)}}function zl(n,i){if(n&1&&(h(0,"div",9),L(1,Vl,1,1,null,13),m()),n&2){let e=P();v("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),c(),j(e._forceDisplayInfixLabel()?-1:1)}}function Hl(n,i){n&1&&(h(0,"div",10,2),le(2,2),m())}function $l(n,i){n&1&&(h(0,"div",11,3),le(2,3),m())}function Ul(n,i){}function Wl(n,i){if(n&1&&ze(0,Ul,0,0,"ng-template",13),n&2){P();let e=we(1);v("ngTemplateOutlet",e)}}function ql(n,i){n&1&&(h(0,"div",14,4),le(2,4),m())}function Gl(n,i){n&1&&(h(0,"div",15,5),le(2,5),m())}function Ql(n,i){n&1&&w(0,"div",16)}function Zl(n,i){n&1&&le(0,6)}function Kl(n,i){if(n&1&&(h(0,"mat-hint",21),f(1),m()),n&2){let e=P(2);v("id",e._hintLabelId),c(),y(e.hintLabel)}}function Yl(n,i){if(n&1&&(L(0,Kl,2,2,"mat-hint",21),le(1,7),w(2,"div",22),le(3,8)),n&2){let e=P();j(e.hintLabel?0:-1)}}var Ie=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["mat-label"]]})}return n})(),Wn=new A("MatError"),Qi=(()=>{class n{id=l(ue).getId("mat-mdc-error-");constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:[1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,o){t&2&&He("id",o.id)},inputs:{id:"id"},features:[he([{provide:Wn,useExisting:n}])]})}return n})(),Un=(()=>{class n{align="start";id=l(ue).getId("mat-mdc-hint-");static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,o){t&2&&(He("id",o.id),me("align",null),F("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),qs=new A("MatPrefix");var qn=new A("MatSuffix"),Zi=(()=>{class n{set _isTextSelector(e){this._isText=!0}_isText=!1;static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[he([{provide:qn,useExisting:n}])]})}return n})(),Gs=new A("FloatingLabelParent"),Vs=(()=>{class n{_elementRef=l(X);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=l(Fs);_ngZone=l(re);_parent=l(Gs);_resizeSubscription=new je;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Xl(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,o){t&2&&F("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function Xl(n){let i=n;if(i.offsetParent!==null)return i.scrollWidth;let e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let t=e.scrollWidth;return e.remove(),t}var zs="mdc-line-ripple--active",Lo="mdc-line-ripple--deactivating",Hs=(()=>{class n{_elementRef=l(X);_cleanupTransitionEnd;constructor(){let e=l(re),t=l(bt);e.runOutsideAngular(()=>{this._cleanupTransitionEnd=t.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(Lo),e.add(zs)}deactivate(){this._elementRef.nativeElement.classList.add(Lo)}_handleTransitionEnd=e=>{let t=this._elementRef.nativeElement.classList,o=t.contains(Lo);e.propertyName==="opacity"&&o&&t.remove(zs,Lo)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),$s=(()=>{class n{_elementRef=l(X);_ngZone=l(re);open=!1;_notch;ngAfterViewInit(){let e=this._elementRef.nativeElement,t=e.querySelector(".mdc-floating-label");t?(e.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):e.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){let t=this._notch.nativeElement;!this.open||!e?t.style.width="":t.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(e){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${e}px)`)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,o){if(t&1&&ce(Ol,5),t&2){let r;U(r=W())&&(o._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,o){t&2&&F("mdc-notched-outline--notched",o.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:Tl,ngContentSelectors:kl,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(t,o){t&1&&(et(),Gt(0,"div",1),yt(1,"div",2,0),le(3),xt(),Gt(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),jo=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n})}return n})();var Di=new A("MatFormField"),Qs=new A("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Us="fill",Jl="auto",Ws="fixed",ec="translateY(-50%)",Re=(()=>{class n{_elementRef=l(X);_changeDetectorRef=l(Ce);_platform=l($e);_idGenerator=l(ue);_ngZone=l(re);_defaults=l(Qs,{optional:!0});_currentDirection;_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=wt("iconPrefixContainer");_textPrefixContainerSignal=wt("textPrefixContainer");_iconSuffixContainerSignal=wt("iconSuffixContainer");_textSuffixContainerSignal=wt("textSuffixContainer");_prefixSuffixContainers=_e(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(e=>e?.nativeElement).filter(e=>e!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=Nr(Ie);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=pi(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Jl}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(e){let t=e||this._defaults?.appearance||Us;this._appearanceSignal.set(t)}_appearanceSignal=R(Us);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Ws}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||Ws}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new S;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_outlineLabelOffsetResizeObserver=null;_animationsDisabled=tt();constructor(){let e=this._defaults,t=l(rt);e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color)),ai(()=>this._currentDirection=t.valueSignal()),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=_e(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let t=this._control,o="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(o+e.controlType),t.controlType&&this._elementRef.nativeElement.classList.add(o+t.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=t.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=t.stateChanges.pipe(Xe([void 0,void 0]),ti(()=>[t.errorState,t.userAriaDescribedBy]),wr(),Ve(([[r,s],[a,d]])=>r!==a||s!==d)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),t.ngControl&&t.ngControl.valueChanges&&(this._valueChanges=t.ngControl.valueChanges.pipe(Je(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Be(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){let e=this._control.focused;e&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!e&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._elementRef.nativeElement.classList.toggle("mat-focused",e),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",e)}_syncOutlineLabelOffset(){Vr({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let e of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(e,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:e=>this._writeOutlinedLabelStyles(e())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=_e(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let t=this._control?this._control.ngControl:null;return t&&t[e]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let r=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),s&&e.push(s.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));let t=this._control.describedByIds,o;if(t){let r=this._describedByIds||e;o=e.concat(t.filter(s=>s&&!r.includes(s)))}else o=e;this._control.setDescribedByIds(o),this._describedByIds=e}}_getOutlinedLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let e=this._iconPrefixContainer?.nativeElement,t=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,r=this._textSuffixContainer?.nativeElement,s=e?.getBoundingClientRect().width??0,a=t?.getBoundingClientRect().width??0,d=o?.getBoundingClientRect().width??0,u=r?.getBoundingClientRect().width??0,g=this._currentDirection==="rtl"?"-1":"1",z=`${s+a}px`,Bi=`calc(${g} * (${z} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,Cn=`var(--mat-mdc-form-field-label-transform, ${ec} translateX(${Bi}))`,Sn=s+a+d+u;return[Cn,Sn]}_writeOutlinedLabelStyles(e){if(e!==null){let[t,o]=e;this._floatingLabel&&(this._floatingLabel.element.style.transform=t),o!==null&&this._notchedOutline?._setMaxWidth(o)}}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let t=e.getRootNode();return t&&t!==e}return document.documentElement.contains(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,o,r){if(t&1&&(Tr(r,o._labelChild,Ie,5),Ct(r,jo,5),Ct(r,qs,5),Ct(r,qn,5),Ct(r,Wn,5),Ct(r,Un,5)),t&2){Qt();let s;U(s=W())&&(o._formFieldControl=s.first),U(s=W())&&(o._prefixChildren=s),U(s=W())&&(o._suffixChildren=s),U(s=W())&&(o._errorChildren=s),U(s=W())&&(o._hintChildren=s)}},viewQuery:function(t,o){if(t&1&&(St(o._iconPrefixContainerSignal,Ls,5),St(o._textPrefixContainerSignal,js,5),St(o._iconSuffixContainerSignal,Ns,5),St(o._textSuffixContainerSignal,Bs,5),ce(Il,5),ce(Ls,5),ce(js,5),ce(Ns,5),ce(Bs,5),ce(Vs,5),ce($s,5),ce(Hs,5)),t&2){Qt(4);let r;U(r=W())&&(o._textField=r.first),U(r=W())&&(o._iconPrefixContainer=r.first),U(r=W())&&(o._textPrefixContainer=r.first),U(r=W())&&(o._iconSuffixContainer=r.first),U(r=W())&&(o._textSuffixContainer=r.first),U(r=W())&&(o._floatingLabel=r.first),U(r=W())&&(o._notchedOutline=r.first),U(r=W())&&(o._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:38,hostBindings:function(t,o){t&2&&F("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[he([{provide:Di,useExisting:n},{provide:Gs,useExisting:n}])],ngContentSelectors:Al,decls:19,vars:25,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["aria-atomic","true","aria-live","polite"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(t,o){if(t&1){let r=K();et(Rl),ze(0,jl,1,1,"ng-template",null,0,jr),h(2,"div",6,1),x("click",function(a){return k(r),I(o._control.onContainerClick(a))}),L(4,Nl,1,0,"div",7),h(5,"div",8),L(6,zl,2,2,"div",9),L(7,Hl,3,0,"div",10),L(8,$l,3,0,"div",11),h(9,"div",12),L(10,Wl,1,1,null,13),le(11),m(),L(12,ql,3,0,"div",14),L(13,Gl,3,0,"div",15),m(),L(14,Ql,1,0,"div",16),m(),h(15,"div",17)(16,"div",18),L(17,Zl,1,0)(18,Yl,4,1),m()()}if(t&2){let r;c(2),F("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),c(2),j(!o._hasOutline()&&!o._control.disabled?4:-1),c(2),j(o._hasOutline()?6:-1),c(),j(o._hasIconPrefix?7:-1),c(),j(o._hasTextPrefix?8:-1),c(2),j(!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),c(2),j(o._hasTextSuffix?12:-1),c(),j(o._hasIconSuffix?13:-1),c(),j(o._hasOutline()?-1:14),c(),F("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic");let s=o._getSubscriptMessageType();c(),F("mat-mdc-form-field-error-wrapper",s==="error")("mat-mdc-form-field-hint-wrapper",s==="hint"),c(),j((r=s)==="error"?17:r==="hint"?18:-1)}},dependencies:[Vs,$s,zr,Hs,Un],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return n})();var Ke=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({imports:[Te,Qr,Re,Te]})}return n})();var tc=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(t,o){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return n})(),ic={passive:!0},Zs=(()=>{class n{_platform=l($e);_ngZone=l(re);_renderer=l(zi).createRenderer(null,null);_styleLoader=l(hi);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return yr;this._styleLoader.load(tc);let t=Ue(e),o=this._monitoredElements.get(t);if(o)return o.subject;let r=new S,s="cdk-text-field-autofilled",a=u=>{u.animationName==="cdk-text-field-autofill-start"&&!t.classList.contains(s)?(t.classList.add(s),this._ngZone.run(()=>r.next({target:u.target,isAutofilled:!0}))):u.animationName==="cdk-text-field-autofill-end"&&t.classList.contains(s)&&(t.classList.remove(s),this._ngZone.run(()=>r.next({target:u.target,isAutofilled:!1})))},d=this._ngZone.runOutsideAngular(()=>(t.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(t,"animationstart",a,ic)));return this._monitoredElements.set(t,{subject:r,unlisten:d}),r}stopMonitoring(e){let t=Ue(e),o=this._monitoredElements.get(t);o&&(o.unlisten(),o.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ks=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({})}return n})();var Ys=new A("MAT_INPUT_VALUE_ACCESSOR");var Xs=(()=>{class n{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var No=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(i,e,t,o,r){this._defaultMatcher=i,this.ngControl=e,this._parentFormGroup=t,this._parentForm=o,this._stateChanges=r}updateErrorState(){let i=this.errorState,e=this._parentFormGroup||this._parentForm,t=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,r=t?.isErrorState(o,e)??!1;r!==i&&(this.errorState=r,this._stateChanges.next())}};var oc=["button","checkbox","file","hidden","image","radio","range","reset","submit"],nc=new A("MAT_INPUT_CONFIG"),ht=(()=>{class n{_elementRef=l(X);_platform=l($e);ngControl=l(ms,{optional:!0,self:!0});_autofillMonitor=l(Zs);_ngZone=l(re);_formField=l(Di,{optional:!0});_renderer=l(bt);_uid=l(ue).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=l(nc,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new S;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=pi(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(T.required)??!1}set required(e){this._required=pi(e)}_required;get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Dn().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=pi(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>Dn().has(e));constructor(){let e=l(hs,{optional:!0}),t=l(at,{optional:!0}),o=l(Xs),r=l(Ys,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();r?_o(r.value)?this._signalBasedValueAccessor=r:this._inputValueAccessor=r:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new No(o,this.ngControl,t,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&ai(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let t=this._elementRef.nativeElement;t.type==="number"?(t.type="text",t.setSelectionRange(0,0),t.type="number"):t.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let t=this._elementRef.nativeElement;this._previousPlaceholder=e,e?t.setAttribute("placeholder",e):t.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){oc.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(e){let t=this._elementRef.nativeElement;e.length?t.setAttribute("aria-describedby",e.join(" ")):t.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let t=e.target;!t.value&&t.selectionStart===0&&t.selectionEnd===0&&(t.setSelectionRange(1,1),t.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(t,o){t&1&&x("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),t&2&&(He("id",o.id)("disabled",o.disabled&&!o.disabledInteractive)("required",o.required),me("name",o.name||null)("readonly",o._getReadonlyAttribute())("aria-disabled",o.disabled&&o.disabledInteractive?"true":null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),F("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mat-mdc-input-disabled-interactive",o.disabledInteractive)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",fe]},exportAs:["matInput"],features:[he([{provide:jo,useExisting:n}]),It]})}return n})(),pt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({imports:[Te,Ke,Ke,Ks,Te]})}return n})();function rc(n,i){if(n&1){let e=K();h(0,"div",1)(1,"button",2),x("click",function(){k(e);let o=P();return I(o.action())}),f(2),m()()}if(n&2){let e=P();c(2),E(" ",e.data.action," ")}}var sc=["label"];function ac(n,i){}var lc=Math.pow(2,31)-1,Xi=class{_overlayRef;instance;containerInstance;_afterDismissed=new S;_afterOpened=new S;_onAction=new S;_durationTimeoutId;_dismissedByAction=!1;constructor(i,e){this._overlayRef=e,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,lc))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Js=new A("MatSnackBarData"),Ei=class{politeness="polite";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},cc=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return n})(),dc=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return n})(),mc=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return n})(),hc=(()=>{class n{snackBarRef=l(Xi);data=l(Js);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["matButton","","matSnackBarAction","",3,"click"]],template:function(t,o){t&1&&(h(0,"div",0),f(1),m(),L(2,rc,3,1,"div",1)),t&2&&(c(),E(" ",o.data.message,`
`),c(),j(o.hasAction?2:-1))},dependencies:[de,cc,dc,mc],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return n})(),Gn="_mat-snack-bar-enter",Qn="_mat-snack-bar-exit",pc=(()=>{class n extends Do{_ngZone=l(re);_elementRef=l(X);_changeDetectorRef=l(Ce);_platform=l($e);_animationsDisabled=tt();snackBarConfig=l(Ei);_document=l(kt);_trackedModals=new Set;_enterFallback;_exitFallback;_injector=l(ae);_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new S;_onExit=new S;_onEnter=new S;_animationState="void";_live;_label;_role;_liveElementId=l(ue).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let t=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),t}attachTemplatePortal(e){this._assertNotAttached();let t=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),t}attachDomPortal=e=>{this._assertNotAttached();let t=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),t};onAnimationEnd(e){e===Qn?this._completeExit():e===Gn&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?vt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Gn)))},{injector:this._injector}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Gn)},200)))}exit(){return this._destroyed?Vi(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?vt(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Qn)))},{injector:this._injector}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Qn),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach(s=>e.classList.add(s)):e.classList.add(t)),this._exposeToModals();let o=this._label.nativeElement,r="mdc-snackbar__label";o.classList.toggle(r,!o.querySelector(`.${r}`))}_exposeToModals(){let e=this._liveElementId,t=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<t.length;o++){let r=t[o],s=r.getAttribute("aria-owns");this._trackedModals.add(r),s?s.indexOf(e)===-1&&r.setAttribute("aria-owns",s+" "+e):r.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let t=e.getAttribute("aria-owns");if(t){let o=t.replace(this._liveElementId,"").trim();o.length>0?e.setAttribute("aria-owns",o):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,t=e.querySelector("[aria-hidden]"),o=e.querySelector("[aria-live]");if(t&&o){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),o.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(t,o){if(t&1&&(ce(Lt,7),ce(sc,7)),t&2){let r;U(r=W())&&(o._portalOutlet=r.first),U(r=W())&&(o._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(t,o){t&1&&x("animationend",function(s){return o.onAnimationEnd(s.animationName)})("animationcancel",function(s){return o.onAnimationEnd(s.animationName)}),t&2&&F("mat-snack-bar-container-enter",o._animationState==="visible")("mat-snack-bar-container-exit",o._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!o._animationsDisabled)},features:[Rt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,o){t&1&&(h(0,"div",1)(1,"div",2,0)(3,"div",3),ze(4,ac,0,0,"ng-template",4),m(),w(5,"div"),m()()),t&2&&(c(5),me("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[Lt],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mat-snack-bar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mat-snack-bar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-snack-bar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mat-snack-bar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-snack-bar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-snack-bar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mat-snack-bar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-button-text-state-layer-color: currentColor;--mat-button-text-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return n})();function uc(){return new Ei}var fc=new A("mat-snack-bar-default-options",{providedIn:"root",factory:uc}),ut=(()=>{class n{_live=l(Yr);_injector=l(ae);_breakpointObserver=l(So);_parentSnackBar=l(n,{optional:!0,skipSelf:!0});_defaultConfig=l(fc);_animationsDisabled=tt();_snackBarRefAtThisLevel=null;simpleSnackBarComponent=hc;snackBarContainerComponent=pc;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,t){return this._attach(e,t)}openFromTemplate(e,t){return this._attach(e,t)}open(e,t="",o){let r=M(M({},this._defaultConfig),o);return r.data={message:e,action:t},r.announcementMessage===e&&(r.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,r)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,t){let o=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=ae.create({parent:o||this._injector,providers:[{provide:Ei,useValue:t}]}),s=new ui(this.snackBarContainerComponent,t.viewContainerRef,r),a=e.attach(s);return a.instance.snackBarConfig=t,a.instance}_attach(e,t){let o=M(M(M({},new Ei),this._defaultConfig),t),r=this._createOverlay(o),s=this._attachSnackBarContainer(r,o),a=new Xi(s,r);if(e instanceof qt){let d=new fi(e,null,{$implicit:o.data,snackBarRef:a});a.instance=s.attachTemplatePortal(d)}else{let d=this._createInjector(o,a),u=new ui(e,void 0,d),g=s.attachComponentPortal(u);a.instance=g.instance}return this._breakpointObserver.observe(Po.HandsetPortrait).pipe(Je(r.detachments())).subscribe(d=>{r.overlayElement.classList.toggle(this.handsetCssClass,d.matches)}),o.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(a,o),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,t){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),t.announcementMessage&&this._live.clear()}),t.duration&&t.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(t.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let t=new _i;t.direction=e.direction;let o=bi(this._injector),r=e.direction==="rtl",s=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!r||e.horizontalPosition==="end"&&r,a=!s&&e.horizontalPosition!=="center";return s?o.left("0"):a?o.right("0"):o.centerHorizontally(),e.verticalPosition==="top"?o.top("0"):o.bottom("0"),t.positionStrategy=o,t.disableAnimations=this._animationsDisabled,vi(this._injector,t)}_createInjector(e,t){let o=e&&e.viewContainerRef&&e.viewContainerRef.injector;return ae.create({parent:o||this._injector,providers:[{provide:Xi,useValue:t},{provide:Js,useValue:e.data}]})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Oi=class{static getErrorLabel(i,e){if(i.errors){for(let t of Object.keys(i.errors))if(i.errors[t]&&t in e)return e[t]()}return null}};var ea=1,ta=1e3,ia=(()=>{let i=class i{constructor(){this.fb=l(Vt),this.destroyRef=l(Z),this.snackBar=l(ut),this.router=l(te),this.configService=l(Yt),this.store=l(N),this.translate=l(ie),this.mosaicConfig=this.store.selectSignal(lt),this.errorLabels={min:()=>this.translate.instant("tool.config.project.mosaicMinWidthErrorMessage",{width:ea}),max:()=>this.translate.instant("tool.config.project.mosaicMaxWidthErrorMessage",{width:ta}),required:()=>this.translate.instant("tool.config.project.mosaicWidthRequiredErrorMessage")}}ngOnInit(){this.buildProjectForm(),this.isReadOnlyMode()?this.projectForm.disable():this.subscribeOnFormValueChanged()}buildProjectForm(){this.projectForm=this.fb.group({mosaicWidth:this.fb.nonNullable.control(this.mosaicConfig()?.mosaicWidth??100,{validators:[T.required,T.min(ea),T.max(ta)]}),mosaicImage:this.fb.control(null,{validators:[T.required]})})}subscribeOnFormValueChanged(){this.projectForm.valueChanges.pipe(q(this.destroyRef)).subscribe(t=>{if(this.projectForm.valid){let o=new FileReader;o.readAsDataURL(t.mosaicImage),o.onload=r=>{this.configService.emitImageChange({base64Image:r?.target?.result,mosaicWidth:t.mosaicWidth},!0)}}else this.configService.emitImageChange(null,!1)})}navigateToConfiguration(){this.router.navigate(["/tool/config"])}trySave(){if(this.projectForm.valid)this.save();else{let t=this.getErrorMessage();this.snackBar.open(t,this.translate.instant("common.ok"),{duration:2e3})}}save(){let t=this.projectForm.getRawValue(),o=new FileReader;o.readAsDataURL(t.mosaicImage),o.onload=r=>{let a={config:{base64Image:r?.target?.result,mosaicWidth:t.mosaicWidth},tilesSets:[],sectors:[]};this.createNewProject(a),this.snackBar.open(this.translate.instant("tool.config.project.projectCreated"),this.translate.instant("common.ok"),{duration:2e3}),this.navigateToConfiguration()}}createNewProject(t){this.store.dispatch(Pe.projectCreated({project:t}))}getErrorMessage(){if(this.projectForm.controls.mosaicImage.valid){if(!this.projectForm.controls.mosaicWidth.valid)return this.getErrorLabel(this.projectForm.controls.mosaicWidth)}else return this.translate.instant("tool.config.project.selectImageErrorMessage");return""}getErrorLabel(t){return Oi.getErrorLabel(t,this.errorLabels)}onImageSelected(t){let r=t.target.files?.item(0);this.projectForm.patchValue({mosaicImage:r})}isReadOnlyMode(){return!!this.mosaicConfig()}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-config-project"]],decls:23,vars:20,consts:[["imageUploader",""],[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","accent",3,"click","hidden"],[1,"form",3,"formGroup"],["hidden","","type","file","accept",".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*",3,"change"],["mat-flat-button","",3,"click","color","hidden"],["appearance","outline",1,"density-3"],["matInput","","type","number","formControlName","mosaicWidth"],["matTextSuffix",""]],template:function(o,r){if(o&1){let s=K();h(0,"div",1)(1,"button",2),x("click",function(){return k(s),I(r.navigateToConfiguration())}),f(2),_(3,"translate"),m(),h(4,"button",3),x("click",function(){return k(s),I(r.trySave())}),f(5),_(6,"translate"),m()(),h(7,"form",4)(8,"input",5,0),x("change",function(d){return k(s),I(r.onImageSelected(d))}),m(),h(10,"button",6),x("click",function(){k(s);let d=we(9);return I(d.click())}),f(11),_(12,"translate"),m(),h(13,"mat-form-field",7)(14,"mat-label"),f(15),_(16,"translate"),m(),w(17,"input",8),h(18,"span",9),f(19),_(20,"translate"),m(),h(21,"mat-error"),f(22),m()()()}o&2&&(c(2),E(" ",b(3,10,"common.return")," "),c(2),v("hidden",r.isReadOnlyMode()),c(),E(" ",b(6,12,"common.confirm")," "),c(2),v("formGroup",r.projectForm),c(3),v("color",r.projectForm.controls.mosaicImage.valid?"":"accent")("hidden",r.isReadOnlyMode()),c(),E(" ",b(12,14,r.projectForm.controls.mosaicImage.valid?"tool.config.project.changeImage":"tool.config.project.chooseImage")," "),c(4),y(b(16,16,"tool.config.project.mosaicWidth")),c(4),y(b(20,18,"common.cm")),c(3),y(r.getErrorLabel(r.projectForm.controls.mosaicWidth)))},dependencies:[Y,V,de,Ke,Re,Ie,Qi,Zi,pt,ht,zt,Nt,st,yi,Ge,jt,at,Bt,oe],styles:[".actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 0}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-top:20px}"],changeDetection:0});let n=i;return n})();var Ti=class extends Ht{constructor(i,e){super(),this.vertices=i,this.hexColor=e}drawObject(i,e){i.beginPath();let t=e.getViewportPosition(this.vertices[0]);i.moveTo(t.x,t.y);for(let o=1;o<this.vertices.length;++o)t=e.getViewportPosition(this.vertices[o]),i.lineTo(t.x,t.y);i.closePath(),i.fillStyle=this.hexColor,i.fill()}getOrder(){return 100}};var gc=Math.PI/180;function _c(n,i,e){e*=gc;let t=Math.cos(e)*(n.x-i.x)-Math.sin(e)*(n.y-i.y)+i.x,o=Math.sin(e)*(n.x-i.x)+Math.cos(e)*(n.y-i.y)+i.y;return new B(t,o)}function Bo(n,i,e=0,t=1){return n.map(o=>_c(o,B.zero,e).multiply(t).add(i))}var oa=(()=>{let i=class i{static drawTiles(t,o){let r=this.sortAndMapTilesBySize(t),s=this.getTreeMapChartArray(r),a={width:s.size.width,height:s.size.height,x:-s.size.width/2,y:-s.size.height/2};this.drawChart(s,a,o)}static drawChart(t,o,r){if(t.type==="group"){let s=t.left.size.width+t.right.size.width,a=t.left.size.height+t.right.size.height;this.drawChart(t.left,{x:o.x,y:o.y,width:o.width*(t.split==="horizontal"?t.left.size.width/s:1),height:o.height*(t.split==="horizontal"?1:t.left.size.height/a)},r),this.drawChart(t.right,{x:o.x+(t.split==="horizontal"?o.width*(t.left.size.width/s):0),y:o.y+(t.split==="horizontal"?0:o.height*(t.left.size.height/a)),width:o.width*(t.split==="horizontal"?t.right.size.width/s:1),height:o.height*(t.split==="horizontal"?1:t.right.size.height/a)},r)}else{let s=Bo(t.value.vertices,new B(o.x+o.width/2,o.y+o.height/2),0),a=new Ti(s,t.value.color);r.addCanvasObject(a)}}static getTreeMapChartArray(t){if(t.length>1){let o=this.splitTileArrayInHalf(t),r=this.getTreeMapChartArray(o[0]),s=this.getTreeMapChartArray(o[1]),a=(r.size.height+s.size.height)*1.5<r.size.width+s.size.width?"vertical":"horizontal";return{type:"group",split:a,size:{width:a==="horizontal"?r.size.width+s.size.width:Math.max(r.size.width,s.size.width),height:a==="horizontal"?Math.max(r.size.height,s.size.height):r.size.height+s.size.height},left:r,right:s}}else return{type:"leaf",size:this.getTileSize(t[0].tile),value:t[0].tile}}static sortAndMapTilesBySize(t){return t.map(o=>{let r=this.getTileSize(o),s=r.height*r.height+r.width*r.width;return{tile:o,size:r,radius:s}}).sort((o,r)=>r.radius-o.radius)}static splitTileArrayInHalf(t){let r=t.reduce((d,u)=>d+u.size.width,0)/2,s=t.length-1,a=t[s].size.width;for(let d=t.length-2;d>0;d--){let u=t[d];if(a+=u.size.width,a>r){s=d;break}}return[t.slice(0,s),t.slice(s)]}static getTileSize(t){return{width:Math.max(...t.vertices.map(o=>o.x))-Math.min(...t.vertices.map(o=>o.x)),height:Math.max(...t.vertices.map(o=>o.y))-Math.min(...t.vertices.map(o=>o.y))}}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac});let n=i;return n})();var na=(()=>{let i=class i{constructor(){this.store=l(N),this.destroyRef=l(Z),this.tilesSets$=this.store.select(ct)}ngAfterViewInit(){queueMicrotask(()=>this.subscribeOnTilesSetsChange())}subscribeOnTilesSetsChange(){this.tilesSets$.pipe(q(this.destroyRef)).subscribe(t=>this.drawTiles(t.flatMap(o=>o.tiles)))}sectionEntered(t){return this.activeCanvas=t,{ribbon:[]}}drawTiles(t){this.activeCanvas.removeObjects(),t.length&&oa.drawTiles(t,this.activeCanvas),this.activeCanvas.redraw()}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-tray"]],decls:1,vars:0,template:function(o,r){o&1&&w(0,"router-outlet")},dependencies:[di],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box;height:100%;padding:20px 10px;overflow-y:auto;overflow-x:hidden}"],changeDetection:0});let n=i;return n})();var Vo="/tool";var zo=()=>l(N).selectSignal(ys)()?!0:(l(te).navigate([Vo]),!1);var vc=["text"],yc=[[["mat-icon"]],"*"],xc=["mat-icon","*"];function Cc(n,i){if(n&1&&w(0,"mat-pseudo-checkbox",1),n&2){let e=P();v("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function Sc(n,i){if(n&1&&w(0,"mat-pseudo-checkbox",3),n&2){let e=P();v("disabled",e.disabled)}}function wc(n,i){if(n&1&&(h(0,"span",4),f(1),m()),n&2){let e=P();c(),E("(",e.group.label,")")}}var Kn=new A("MAT_OPTION_PARENT_COMPONENT"),Yn=new A("MatOptgroup");var eo=class{source;isUserInput;constructor(i,e=!1){this.source=i,this.isUserInput=e}},ki=(()=>{class n{_element=l(X);_changeDetectorRef=l(Ce);_parent=l(Kn,{optional:!0});group=l(Yn,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=l(ue).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(e){this._disabled.set(e)}_disabled=R(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new J;_text;_stateChanges=new S;constructor(){let e=l(hi);e.load(ds),e.load(Gr),this._signalDisableRipple=!!this._parent&&_o(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,t){let o=this._getHostElement();typeof o.focus=="function"&&o.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!nt(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new eo(this,e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["mat-option"]],viewQuery:function(t,o){if(t&1&&ce(vc,7),t&2){let r;U(r=W())&&(o._text=r.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(t,o){t&1&&x("click",function(){return o._selectViaInteraction()})("keydown",function(s){return o._handleKeydown(s)}),t&2&&(He("id",o.id),me("aria-selected",o.selected)("aria-disabled",o.disabled.toString()),F("mdc-list-item--selected",o.selected)("mat-mdc-option-multiple",o.multiple)("mat-mdc-option-active",o.active)("mdc-list-item--disabled",o.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",fe]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:xc,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,o){t&1&&(et(yc),L(0,Cc,1,2,"mat-pseudo-checkbox",1),le(1),h(2,"span",2,0),le(4,1),m(),L(5,Sc,1,1,"mat-pseudo-checkbox",3),L(6,wc,2,1,"span",4),w(7,"div",5)),t&2&&(j(o.multiple?0:-1),c(5),j(!o.multiple&&o.selected&&!o.hideSingleSelectionIndicator?5:-1),c(),j(o.group&&o.group._inert?6:-1),c(),v("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},dependencies:[gs,cs],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})();function ra(n,i,e){if(e.length){let t=i.toArray(),o=e.toArray(),r=0;for(let s=0;s<n+1;s++)t[s].group&&t[s].group===o[r]&&r++;return r}return 0}function sa(n,i,e,t){return n<e?n:n+i>e+t?Math.max(0,n-t+i):e}var Xn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({imports:[fs,Te,_s,ki]})}return n})();var Dc=["panel"],Ec=["*"];function Oc(n,i){if(n&1&&(yt(0,"div",1,0),le(2),xt()),n&2){let e=i.id,t=P();kr(t._classList),F("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-autocomplete-panel-animations-enabled",!t._animationsDisabled)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),He("id",t.id),me("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var Jn=class{source;option;constructor(i,e){this.source=i,this.option=e}},la=new A("mat-autocomplete-default-options",{providedIn:"root",factory:Tc});function Tc(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1,hasBackdrop:!1}}var ca=(()=>{class n{_changeDetectorRef=l(Ce);_elementRef=l(X);_defaults=l(la);_animationsDisabled=tt();_activeOptionChanges=je.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new J;opened=new J;closed=new J;optionActivated=new J;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=l(ue).getId("mat-autocomplete-");inertGroups;constructor(){let e=l($e);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new Jr(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options?.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new Jn(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(t,o,r){if(t&1&&(Ct(r,ki,5),Ct(r,Yn,5)),t&2){let s;U(s=W())&&(o.options=s),U(s=W())&&(o.optionGroups=s)}},viewQuery:function(t,o){if(t&1&&(ce(qt,7),ce(Dc,5)),t&2){let r;U(r=W())&&(o.template=r.first),U(r=W())&&(o.panel=r.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",fe],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",fe],requireSelection:[2,"requireSelection","requireSelection",fe],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",fe],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",fe]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[he([{provide:Kn,useExisting:n}])],ngContentSelectors:Ec,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,o){t&1&&(et(),Er(0,Oc,3,17,"ng-template"))},styles:[`div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}
`],encapsulation:2,changeDetection:0})}return n})();var kc={provide:Oo,useExisting:go(()=>er),multi:!0};var da=new A("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let n=l(ae);return()=>On(n)}});function Ic(n){let i=l(ae);return()=>On(i)}var Rc={provide:da,deps:[],useFactory:Ic},er=(()=>{class n{_environmentInjector=l(Pr);_element=l(X);_injector=l(ae);_viewContainerRef=l(ri);_zone=l(re);_changeDetectorRef=l(Ce);_dir=l(rt,{optional:!0});_formField=l(Di,{optional:!0,host:!0});_viewportRuler=l(Mo);_scrollStrategy=l(da);_renderer=l(bt);_animationsDisabled=tt();_defaults=l(la,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new S;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=je.EMPTY;_breakpointObserver=l(So);_handsetLandscapeSubscription=je.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new S;_overlayPanelClass=Co(this._defaults?.overlayPanelClass||[]);_windowBlurHandler=()=>{this._canOpenOnNextFocus=this.panelOpen||!this._hasFocus()};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&wo(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Be(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Ve(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Ve(()=>this._overlayAttached)):Vi()).pipe(ti(e=>e instanceof eo?e:null))}optionSelections=ii(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(Xe(e),oi(()=>Be(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(oi(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Tt(e=>{let t=r=>{let s=Zt(r),a=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,d=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&s!==this._element.nativeElement&&!this._hasFocus()&&(!a||!a.contains(s))&&(!d||!d.contains(s))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(s)&&e.next(r)},o=[this._renderer.listen("document","click",t),this._renderer.listen("document","auxclick",t),this._renderer.listen("document","touchend",t)];return()=>{o.forEach(r=>r())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e,o=t.keyCode,r=nt(t);if(o===27&&!r&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&o===13&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){let s=this.autocomplete._keyManager.activeItem,a=o===38||o===40;o===9||a&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):a&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(a||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,o=t.value;if(t.type==="number"&&(o=o==""?null:parseFloat(o)),this._previousValue!==o){if(this._previousValue=o,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(o),!o)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let r=this.autocomplete.options?.find(s=>s.selected);if(r){let s=this._getDisplayValue(r.value);o!==s&&r.deselect(!1)}}if(this._canOpen()&&this._hasFocus()){let r=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(r)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_hasFocus(){return mi()===this._element.nativeElement}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new Tt(o=>{vt(()=>{o.next()},{injector:this._environmentInjector})}),t=this.autocomplete.options?.changes.pipe(ni(()=>this._positionStrategy.reapplyLastPosition()),Cr(0))??Vi();return Be(e,t).pipe(oi(()=>this._zone.run(()=>{let o=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),o!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),ot(1)).subscribe(o=>this._setValueAndClose(o))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,o=e?e.source:this._pendingAutoselectedOption;o?(this._clearPreviousSelectedOption(o),this._assignOptionValue(o.value),this._onChange(o.value),t._emitSelectEvent(o),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(o=>{o!==e&&o.selected&&o.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;Pn(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){this.autocomplete;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new fi(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=vi(this._injector,this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(Po.HandsetLandscape).subscribe(r=>{r.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let o=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&o!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!nt(e)||e.keyCode===38&&nt(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new _i({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,hasBackdrop:this._defaults?.hasBackdrop,backdropClass:this._defaults?.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this._overlayPanelClass,disableAnimations:this._animationsDisabled})}_getOverlayPosition(){let e=ns(this._injector,this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],o=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:o},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:o}],s;this.position==="above"?s=r:this.position==="below"?s=t:s=[...t,...r],e.withPositions(s)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let o=0;o<e.options.length;o++)if(!e.options.get(o).disabled){t=o;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let t=this.autocomplete,o=ra(e,t.options,t.optionGroups);if(e===0&&o===1)t._setScrollTop(0);else if(t.panel){let r=t.options.toArray()[e];if(r){let s=r._getHostElement(),a=sa(s.offsetTop,s.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(a)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&wo(this._trackedModal,"aria-owns",t),Pn(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;wo(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,o){t&1&&x("focusin",function(){return o._handleFocus()})("blur",function(){return o._onTouched()})("input",function(s){return o._handleInput(s)})("keydown",function(s){return o._handleKeydown(s)})("click",function(){return o._handleClick()}),t&2&&me("autocomplete",o.autocompleteAttribute)("role",o.autocompleteDisabled?null:"combobox")("aria-autocomplete",o.autocompleteDisabled?null:"list")("aria-activedescendant",o.panelOpen&&o.activeOption?o.activeOption.id:null)("aria-expanded",o.autocompleteDisabled?null:o.panelOpen.toString())("aria-controls",o.autocompleteDisabled||!o.panelOpen||o.autocomplete==null?null:o.autocomplete.id)("aria-haspopup",o.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",fe]},exportAs:["matAutocompleteTrigger"],features:[he([kc]),It]})}return n})(),ma=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=xe({type:n});static \u0275inj=ye({providers:[Rc],imports:[Mt,Xn,Te,En,Xn,Te]})}return n})();var to=class{static calculateConvexityFactor(i){let e=this.calculatePolygonArea(i),t=this.calculatePolygonCircumference(i);return Math.sqrt(e)/t}static calculatePolygonArea(i){if(i.length<3)throw new Error("polygon should have at least 3 vertices");let e=i.at(-1).x*i[0].y,t=i.at(-1).y*i[0].x;for(let o=0,r=i.length-1;o<r;++o)e+=i[o].x*i[o+1].y,t+=i[o].y*i[o+1].x;return(e-t)/2}static calculatePolygonCircumference(i){let e=B.distance(i[0],i.at(-1));for(let t=1;t<i.length;++t)e+=B.distance(i[t],i[t-1]);return e}static calculatePolygonCentroid(i){let e=0,t=0,o=0,r=i.at(-1);for(let s of i){let a=s.y*r.x-s.x*r.y;o+=a,e+=(s.x+r.x)*a,t+=(s.y+r.y)*a,r=s}return o*=3,o==0?B.zero:new B(e/o,t/o)}static calculateOuterRadius(i){let e=0;for(let t of i){let o=B.distance(B.zero,t);o>e&&(e=o)}return e}};var Dt=class{static nextInt(i,e){return Math.floor(Math.random()*(e-i+1)+i)}static nextFloat(i,e){return Math.random()*(e-i)+i}};var Ho=class{constructor(i){this.imagePixelArray=i}generateTileSet(i,e){let t=[];for(let o=0;o<e;++o)t.push(this.generateTile(i));return t}generateTile(i){let e;do e=this.generateVertices(i);while(to.calculateConvexityFactor([...e].reverse())<.18);let t=this.rotatePolygonToHorizontal(e),o=to.calculatePolygonCentroid(t),r=this.normalizeVertices(t,o);return{id:crypto.randomUUID(),vertices:r,color:this.randomColor().hex()}}generateVertices(i){let e=Dt.nextInt(4,6),t=[];for(let o=0;o<e;++o){let r=Dt.nextFloat(i.min,i.max);t.push(this.generateVertex(o,e,r))}return t}generateVertex(i,e,t){let r=(360/e*i+Dt.nextFloat(0,30))%360*Math.PI/180;return new B(Math.sin(r),Math.cos(r)).multiply(t)}randomColor(){let i=this.imagePixelArray.length/4,e=Dt.nextInt(0,i-1);return Se({r:this.imagePixelArray[e*4],g:this.imagePixelArray[e*4+1],b:this.imagePixelArray[e*4+2]})}normalizeVertices(i,e){return i.map(t=>this.roundVertexCoords(t.sub(e)))}roundVertexCoords(i){return new B(Math.round((i.x+Number.EPSILON)*100)/100,Math.round((i.y+Number.EPSILON)*100)/100)}rotatePolygonToHorizontal(i){let e=0,t=i[0],o=i[1];for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++){let d=i[a].x-i[s].x,u=i[a].y-i[s].y,g=d*d+u*u;g>e&&(e=g,t=i[s],o=i[a])}let r=Math.atan2(o.y-t.y,o.x-t.x);return i.map(s=>{let a=s.x-t.x,d=s.y-t.y,u=a*Math.cos(-r)-d*Math.sin(-r),g=a*Math.sin(-r)+d*Math.cos(-r);return new B(u+t.x,g+t.y)})}};function Fc(n,i){if(n&1&&(h(0,"mat-option",7),f(1),m()),n&2){let e=i.$implicit;v("value",e),c(),y(e)}}var ha=(()=>{let i=class i{constructor(){this.seriesNamesSignal=R([]),this.errorLabels={min:()=>this.translate.instant("tool.tiles.random.radiusTooSmall"),max:()=>this.translate.instant("tool.tiles.random.radiusTooLarge"),required:()=>this.translate.instant("tool.tiles.random.fieldRequired"),minGreaterThenMax:()=>this.translate.instant("tool.tiles.random.maxRadiusLargerThanMin")},this.formBuilder=l(Vt),this.router=l(te),this.store=l(N),this.snackBar=l(ut),this.translate=l(ie)}ngOnInit(){this.initForm();let t=this.store.selectSignal(ct)().map(o=>o.name);this.seriesNamesSignal.set(t)}initForm(){this.formGroup=this.formBuilder.group({name:[null,[T.required]],minRadius:[null,[T.required,T.min(.01),T.max(1e3)]],maxRadius:[null,[T.required,T.min(.01),T.max(1e3)]],count:[null,[T.required,T.min(1)]]}),this.formGroup.setValidators(this.comparisonValidator("minRadius","maxRadius"))}comparisonValidator(t,o){return r=>{let s=r.controls[t],a=r.controls[o];return s.value>a.value?a.setErrors({minGreaterThenMax:!0}):a.setErrors(null),null}}getErrorLabel(t){return Oi.getErrorLabel(t,this.errorLabels)}async getTileSet(){if(this.formGroup.valid){let t=this.formGroup.getRawValue(),o=new Ho(await this.getImagePixelArray()),r={name:t.name,tiles:o.generateTileSet({min:t.minRadius,max:t.maxRadius},t.count)};this.snackBar.open(this.translate.instant("tool.tiles.random.tilesSeriesGenerated"),this.translate.instant("common.ok"),{duration:3e3}),this.store.dispatch(Pe.tilesSetAdded({tilesSet:r})),this.navigateToMenu()}}async getImagePixelArray(){let t=this.store.selectSignal(vs)();return xs.getImageSrcPixelArray(t)}navigateToMenu(){this.router.navigate(["/tool/tray"])}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-random-tiles"]],decls:46,vars:30,consts:[["auto","matAutocomplete"],[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"form",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic",1,"density-3"],["matInput","","type","text","formControlName","name",3,"matAutocomplete"],[3,"value"],["matInput","","type","number","formControlName","minRadius"],["matTextSuffix",""],["matInput","","type","number","formControlName","maxRadius"],["matInput","","type","number","formControlName","count"]],template:function(o,r){if(o&1){let s=K();h(0,"div",1)(1,"button",2),x("click",function(){return k(s),I(r.navigateToMenu())}),f(2),_(3,"translate"),m(),h(4,"button",3),x("click",function(){return k(s),I(r.getTileSet())}),f(5),_(6,"translate"),m()(),h(7,"form",4)(8,"mat-form-field",5)(9,"mat-label"),f(10),_(11,"translate"),m(),w(12,"input",6),h(13,"mat-autocomplete",null,0),Ee(15,Fc,2,2,"mat-option",7,si),m(),h(17,"mat-error"),f(18),m()(),h(19,"mat-form-field",5)(20,"mat-label"),f(21),_(22,"translate"),m(),w(23,"input",8),h(24,"span",9),f(25),_(26,"translate"),m(),h(27,"mat-error"),f(28),m()(),h(29,"mat-form-field",5)(30,"mat-label"),f(31),_(32,"translate"),m(),w(33,"input",10),h(34,"span",9),f(35),_(36,"translate"),m(),h(37,"mat-error"),f(38),m()(),h(39,"mat-form-field",5)(40,"mat-label"),f(41),_(42,"translate"),m(),w(43,"input",11),h(44,"mat-error"),f(45),m()()()}if(o&2){let s=we(14);c(2),E(" ",b(3,14,"common.return")," "),c(3),E(" ",b(6,16,"tool.tiles.random.randomTiles")," "),c(2),v("formGroup",r.formGroup),c(3),y(b(11,18,"tool.tiles.random.seriesName")),c(2),v("matAutocomplete",s),c(3),Oe(r.seriesNamesSignal()),c(3),y(r.getErrorLabel(r.formGroup.get("name"))),c(3),y(b(22,20,"tool.tiles.random.minRadius")),c(4),y(b(26,22,"common.cm")),c(3),y(r.getErrorLabel(r.formGroup.get("minRadius"))),c(3),y(b(32,24,"tool.tiles.random.maxRadius")),c(4),y(b(36,26,"common.cm")),c(3),y(r.getErrorLabel(r.formGroup.get("maxRadius"))),c(3),y(b(42,28,"tool.tiles.random.count")),c(4),y(r.getErrorLabel(r.formGroup.get("count")))}},dependencies:[zt,Nt,st,yi,Ge,jt,at,Bt,Ke,Re,Ie,Qi,Zi,pt,ht,Y,V,de,ma,ca,ki,er,oe],styles:["[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px;gap:18px}"],changeDetection:0});let n=i;return n})();var Lc=["*"],Ii=(()=>{let i=class i{constructor(){this.isOpen=pe.required(),this.viewRef=l(ri),this.hostNativeElement=this.viewRef.element.nativeElement}get getExpandAnimationState(){let t=this.isOpen();return{value:t?"open":"closed",params:{timing:this.calcExpandingTime(this.hostNativeElement.scrollHeight,t)}}}calcExpandingTime(t,o){return(150+Math.sqrt(t)*5)*(o?1:.66)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-expandable-panel"]],hostVars:1,hostBindings:function(o,r){o&2&&Or("@expand",r.getExpandAnimationState)},inputs:{isOpen:[1,"isOpen"]},ngContentSelectors:Lc,decls:1,vars:0,template:function(o,r){o&1&&(et(),le(0))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden}"],data:{animation:[In("expand",[Ao("closed",Ro({height:"0"})),Ao("open",Ro({height:kn})),$i("open => closed",Io("{{timing}}ms ease-out"),{params:{timing:"200"}}),$i("closed => open",Io("{{timing}}ms ease-in"),{params:{timing:"300"}}),$i(":enter",[])])]},changeDetection:0});let n=i;return n})();var ua=(()=>{let i=class i{constructor(){this.tile=pe.required(),this.router=l(te)}navigateToTileDetails(){this.router.navigate([`/tool/tray/tile/${this.tile().id}`])}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-tile-list-elem"]],inputs:{tile:[1,"tile"]},decls:13,vars:5,consts:[["menu","matMenu"],[1,"label"],[1,"elem-actions"],["mat-icon-button","",1,"elem-action",3,"matMenuTriggerFor"],["matListIcon",""],["classList","paddingless"],["mat-menu-item","",3,"click"],["matListIcon","",1,"material-symbols-outlined"]],template:function(o,r){if(o&1){let s=K();h(0,"span",1),f(1),m(),h(2,"div",2)(3,"button",3)(4,"mat-icon",4),f(5," more_vert "),m()(),h(6,"mat-menu",5,0)(8,"button",6),x("click",function(){return k(s),I(r.navigateToTileDetails())}),h(9,"mat-icon",7),f(10," page_info "),m(),f(11),_(12,"translate"),m()()()}if(o&2){let s=we(7);c(),E(" ",r.tile().id,`
`),c(2),v("matMenuTriggerFor",s),c(8),E(" ",b(12,3,"common.details")," ")}},dependencies:[qe,We,V,Qe,wi,Ci,xi,Si,Y,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a}.selected[_nghost-%COMP%]{background:var(--irr-contrast-light)}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;text-overflow:ellipsis;text-wrap:nowrap}[_nghost-%COMP%]   .elem-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px;margin-left:4px}[_nghost-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]{color:var(--irr-contrast-medium);margin:-6px}[_nghost-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]    {--mat-icon-button-state-layer-size: 32px;padding:4px}[_nghost-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]     .mat-icon{width:24px;height:24px;font-size:24px}[_nghost-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size)}"],changeDetection:0});let n=i;return n})();function jc(n,i){if(n&1&&w(0,"app-tile-list-elem",11),n&2){let e=i.$implicit;v("tile",e)}}var fa=(()=>{let i=class i{constructor(){this.tilesSet=pe.required(),this.isOpen=R(!1),this.store=l(N),this.dialog=l(dt),this.translate=l(ie),this.destroyRef=l(Z)}toggleTilesList(){this.isOpen.update(t=>!t)}removeTilesSet(){this.showRemoveTilesSetWarning().pipe(q(this.destroyRef)).subscribe(t=>{t&&this.store.dispatch(Pe.tilesSetRemoved({removedTilesSet:this.tilesSet()}))})}showRemoveTilesSetWarning(){let t={title:this.translate.instant("tool.tiles.menu.removeTilesSet"),message:this.translate.instant("tool.tiles.menu.removeTilesSetQuery",{name:this.tilesSet().name})};return this.dialog.open(Pi,{data:t}).afterClosed()}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-tiles-set-list-elem"]],inputs:{tilesSet:[1,"tilesSet"]},decls:20,vars:8,consts:[["menu","matMenu"],[1,"list-elem"],[1,"elem-actions"],["mat-icon-button","",1,"elem-action",3,"matMenuTriggerFor"],["matListIcon",""],["mat-icon-button","",1,"elem-action","toggle-action",3,"click"],[1,"chevron"],["classList","paddingless"],["mat-menu-item","",3,"click"],["matListIcon","",1,"material-symbols-outlined"],[1,"panel",3,"isOpen"],[3,"tile"]],template:function(o,r){if(o&1){let s=K();h(0,"div",1)(1,"span"),f(2),m(),h(3,"div",2)(4,"button",3)(5,"mat-icon",4),f(6," more_vert "),m()(),h(7,"button",5),x("click",function(){return k(s),I(r.toggleTilesList())}),h(8,"mat-icon",6),f(9," keyboard_arrow_up "),m()(),h(10,"mat-menu",7,0)(12,"button",8),x("click",function(){return k(s),I(r.removeTilesSet())}),h(13,"mat-icon",9),f(14,"delete"),m(),f(15),_(16,"translate"),m()()()(),h(17,"app-expandable-panel",10),Ee(18,jc,1,1,"app-tile-list-elem",11,At),m()}if(o&2){let s=we(11);c(2),y(r.tilesSet().name),c(2),v("matMenuTriggerFor",s),c(4),F("chevron--closed",!r.isOpen()),c(7),E(" ",b(16,6,"tool.tiles.menu.removeTilesSet")," "),c(2),v("isOpen",r.isOpen()),c(),Oe(r.tilesSet().tiles.slice(0,100))}},dependencies:[Ii,V,Qe,qe,We,wi,Ci,xi,Si,ua,Y,oe],styles:["[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a}[_nghost-%COMP%]   .list-elem.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]{color:var(--irr-contrast-medium);margin:-6px}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]    {--mat-icon-button-state-layer-size: 32px;padding:4px}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]     .mat-icon{width:24px;height:24px;font-size:24px}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .elem-action[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size)}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .toggle-action[_ngcontent-%COMP%]{color:var(--irr-contrast-medium)}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .toggle-action[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{transition:all .25s ease}[_nghost-%COMP%]   .list-elem[_ngcontent-%COMP%]   .elem-actions[_ngcontent-%COMP%]   .toggle-action[_ngcontent-%COMP%]   .chevron--closed[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column;gap:6px}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-top:6px}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{align-self:center;color:#666}"],changeDetection:0});let n=i;return n})();function Nc(n,i){if(n&1&&w(0,"app-tiles-set-list-elem",4),n&2){let e=i.$implicit;v("tilesSet",e)}}function Bc(n,i){n&1&&(h(0,"span",5),f(1),_(2,"translate"),m()),n&2&&(c(),E(" ",b(2,1,"tool.tiles.menu.noTiles")," "))}var ga=(()=>{let i=class i{constructor(){this.router=l(te),this.store=l(N),this.tilesSets=this.store.selectSignal(ct)}navigateToRandomTiles(){this.router.navigate(["/tool/tray/random"])}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-tray-menu"]],decls:14,vars:10,consts:[[1,"actions"],["mat-flat-button","","color","accent","disabled",""],["mat-flat-button","","color","accent",3,"click"],[1,"tiles-sets"],[3,"tilesSet"],[1,"no-sets"]],template:function(o,r){o&1&&(h(0,"div",0)(1,"button",1),f(2),_(3,"translate"),m(),h(4,"button",1),f(5),_(6,"translate"),m(),h(7,"button",2),x("click",function(){return r.navigateToRandomTiles()}),f(8),_(9,"translate"),m()(),h(10,"div",3),Ee(11,Nc,1,1,"app-tiles-set-list-elem",4,At,!1,Bc,3,3,"span",5),m()),o&2&&(c(2),E(" ",b(3,4,"tool.tiles.menu.loadFromFile")," "),c(3),E(" ",b(6,6,"tool.tiles.menu.createTile")," "),c(3),E(" ",b(9,8,"tool.tiles.menu.randomTiles")," "),c(3),Oe(r.tilesSets()))},dependencies:[V,de,fa,Y,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px;height:100%}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}[_nghost-%COMP%]   .tiles-sets[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;flex:1 1 0}[_nghost-%COMP%]   .tiles-sets[_ngcontent-%COMP%]   .no-sets[_ngcontent-%COMP%]{color:var(--irr-contrast-light);margin:auto}"],changeDetection:0});let n=i;return n})();var Vc=["canvas"],_a=(()=>{let i=class i{constructor(){this.value=Hi(),this.valueChange=li(),this.canvas=wt.required("canvas"),this.cursorData=_e(()=>{let t=this.value(),o=this.canvas()?.nativeElement.getBoundingClientRect().width??1;return this.computeCursorData(t,o)}),this.destroyRef=l(Z),this.isDragging=!1,this.onMouseDown=t=>{this.isDragging=!0,document.body.style.cursor="pointer",this.onSliderMouseInteraction(t)},this.onMouseUp=()=>{this.isDragging=!1,document.body.style.cursor=""},this.onMouseMove=t=>{this.isDragging&&this.onSliderMouseInteraction(t)}}onSliderMouseInteraction(t){let o=this.canvas().nativeElement.getBoundingClientRect(),r=(t.clientX-o.x)/o.width;this.value.set(Math.max(0,Math.min(1,r))),this.valueChange.emit(this.value())}ngAfterViewInit(){this.drawSliderCanvas(),this.canvas().nativeElement.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),this.destroyRef.onDestroy(()=>{this.canvas().nativeElement.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove)})}drawSliderCanvas(){let t=this.canvas().nativeElement.getContext("2d"),o={height:this.canvas().nativeElement.height,width:this.canvas().nativeElement.width},r=t.createLinearGradient(0,0,o.width,0),s=20;for(let a=0;a<=s;++a){let d=a*(1/s);r.addColorStop(d,Se({h:d*360,s:100,v:100}).hex())}t.fillStyle=r,t.fillRect(0,0,o.width,o.height)}computeCursorData(t,o){let r=o*t-8,s=Se({h:t*360,s:100,v:100}).hex();return{horizontalOffset:`${r}px`,color:s}}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-color-slider"]],viewQuery:function(o,r){o&1&&St(r.canvas,Vc,5),o&2&&Qt()},inputs:{value:[1,"value"]},outputs:{value:"valueChange",valueChange:"valueChange"},decls:3,vars:4,consts:[["canvas",""],["width","250","height","8",1,"slider"],[1,"cursor"]],template:function(o,r){if(o&1&&Gt(0,"canvas",1,0)(2,"div",2),o&2){let s=r.cursorData();c(2),Ft("left",s.horizontalOffset)("background-color",s.color)}},styles:["[_nghost-%COMP%]{width:100%;position:relative;cursor:pointer}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{display:block;width:100%;height:8px;border-radius:5px}[_nghost-%COMP%]   .cursor[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;border-radius:50%;border:2px solid #ffffff;box-sizing:border-box;top:-5px;pointer-events:none}"],changeDetection:0});let n=i;return n})();var zc=["canvas"],ba=(()=>{let i=class i{constructor(){this.hValue=pe(),this.sValue=Hi(),this.vValue=Hi(),this.colorChange=li(),this.canvas=wt.required("canvas"),this.cursorData=_e(()=>this.computeCursorData()),this.destroyRef=l(Z),this.isDragging=!1,this.onMouseDown=t=>{this.isDragging=!0,document.body.style.cursor="pointer",this.onCanvasMouseInteraction(t)},this.onMouseUp=()=>{this.isDragging=!1,document.body.style.cursor=""},this.onMouseMove=t=>{this.isDragging&&this.onCanvasMouseInteraction(t)},ai(()=>this.drawColorCanvas())}onCanvasMouseInteraction(t){let o=this.canvas().nativeElement.getBoundingClientRect(),r=(t.clientX-o.x)/o.width,s=(t.clientY-o.y)/o.height;this.sValue.set(Math.min(1,Math.max(0,r))),this.vValue.set(Math.min(1,Math.max(0,1-s))),this.colorChange.emit(Se({h:this.hValue()*360,s:this.sValue()*100,v:this.vValue()*100}))}ngAfterViewInit(){this.canvas().nativeElement.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),this.destroyRef.onDestroy(()=>{this.canvas().nativeElement.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove)})}drawColorCanvas(){let t={height:this.canvas().nativeElement.height,width:this.canvas().nativeElement.width},o=this.canvas().nativeElement.getContext("2d"),r=o.createLinearGradient(0,0,t.width,0);r.addColorStop(0,"#FFFFFF");let s=Se({h:this.hValue()*360,s:100,v:100}).hex();r.addColorStop(1,s);let a=o.createLinearGradient(0,0,0,t.height);a.addColorStop(0,"#00000000"),a.addColorStop(1,"#000000"),o.fillStyle=r,o.fillRect(0,0,t.width,t.height),o.fillStyle=a,o.fillRect(0,0,t.width,t.height)}computeCursorData(){let t=this.canvas().nativeElement.getBoundingClientRect(),o=t.width*this.sValue()-8,r=t.height*(1-this.vValue())-8;return{horizontalOffset:`${o}px`,verticalOffset:`${r}px`,color:Se({h:this.hValue()*360,s:this.sValue()*100,v:this.vValue()*100}).hex()}}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-color-canvas"]],viewQuery:function(o,r){o&1&&St(r.canvas,zc,5),o&2&&Qt()},inputs:{hValue:[1,"hValue"],sValue:[1,"sValue"],vValue:[1,"vValue"]},outputs:{sValue:"sValueChange",vValue:"vValueChange",colorChange:"colorChange"},decls:3,vars:6,consts:[["canvas",""],["width","250","height","150",1,"panel"],[1,"cursor"]],template:function(o,r){if(o&1&&Gt(0,"canvas",1,0)(2,"div",2),o&2){let s=r.cursorData();c(2),Ft("left",s.horizontalOffset)("top",s.verticalOffset)("background-color",s.color)}},styles:["[_nghost-%COMP%]{position:relative;cursor:pointer;overflow:hidden;display:block}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .cursor[_ngcontent-%COMP%]{position:absolute;width:18px;height:18px;border-radius:50%;border:2px solid #ffffff;box-sizing:border-box;pointer-events:none}"],changeDetection:0});let n=i;return n})();var Hc=/^#([0-9a-f]{3}){1,2}$/i,va=(()=>{let i=class i{constructor(){this.color=pe.required({transform:t=>Se(t)}),this.colorChange=li(),this.hValue=vo({source:this.color,computation:t=>t.hue()/360}),this.sValue=vo({source:this.color,computation:t=>t.saturationv()/100}),this.vValue=vo({source:this.color,computation:t=>t.value()/100}),this.hexColor=_e(()=>Se({h:this.hValue()*360,s:this.sValue()*100,v:this.vValue()*100}).hex())}ngOnDestroy(){let t=Se({h:this.hValue()*360,s:this.sValue()*100,v:this.vValue()*100});this.colorChange.emit(t)}onHexCodeChange(t){let o=t.currentTarget;if(Hc.test(o.value)){let r=Se(o.value);this.hValue.set(r.hue()/360),this.sValue.set(r.saturationv()/100),this.vValue.set(r.value()/100)}}onColorCanvasChanged(t){this.sValue.set(t.saturationv()/100),this.vValue.set(t.value()/100)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-color-selection-panel"]],inputs:{color:[1,"color"]},outputs:{colorChange:"colorChange"},decls:10,vars:7,consts:[[1,"sv-preview"],[3,"colorChange","hValue","sValue","vValue"],[1,"slider-container"],[3,"valueChange","value"],[1,"result-wrapper"],["role","presentation",1,"color-preview"],["appearance","outline",1,"density-3","code-input"],["matInput","",3,"change","ngModel"]],template:function(o,r){o&1&&(h(0,"div",0)(1,"app-color-canvas",1),x("colorChange",function(a){return r.onColorCanvasChanged(a)}),m()(),h(2,"div",2)(3,"app-color-slider",3),Ar("valueChange",function(a){return Rr(r.hValue,a)||(r.hValue=a),a}),m()(),h(4,"div",4),w(5,"div",5),h(6,"mat-form-field",6)(7,"mat-label"),f(8,"Hex"),m(),h(9,"input",7),x("change",function(a){return r.onHexCodeChange(a)}),m()()()),o&2&&(c(),v("hValue",r.hValue())("sValue",r.sValue())("vValue",r.vValue()),c(2),Ir("value",r.hValue),c(2),Ft("background",r.hexColor()),c(4),v("ngModel",r.hexColor()))},dependencies:[pt,ht,Re,Ie,ko,st,Ge,To,_a,ba],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;background-color:var(--irr-contrast-lightest);border-radius:5px;overflow:hidden;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]{padding:20px 10px}[_nghost-%COMP%]   .result-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px;padding:0 10px 15px}[_nghost-%COMP%]   .result-wrapper[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{display:block;min-width:40px;height:40px;border-radius:50%;box-shadow:0 0 4px 1px #0003}[_nghost-%COMP%]   .result-wrapper[_ngcontent-%COMP%]   .code-input[_ngcontent-%COMP%]{width:auto}[_nghost-%COMP%]   .result-wrapper[_ngcontent-%COMP%]   .code-input[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}"],changeDetection:0});let n=i;return n})();function $c(n,i){if(n&1){let e=K();h(0,"app-color-selection-panel",6),x("colorChange",function(o){k(e);let r=P();return I(r.onColorChanged(o))}),m()}if(n&2){let e=P();v("color",e.hexColor())}}var $o=(()=>{let i=class i{constructor(){this.label=pe.required(),this.hexColor=R("#000000"),this.isOpen=R(!1),this.isDisabled=R(!1),this.onChange=()=>{},this.onTouched=()=>{}}toggleColorPanel(){this.isDisabled()||this.isOpen.update(t=>!t)}onColorChanged(t){this.hexColor.set(t.hex()),this.onChange(t.hex())}writeValue(t){this.hexColor.set(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled.set(t)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-color-picker"]],inputs:{label:[1,"label"]},features:[he([{provide:Oo,useExisting:go(()=>i),multi:!0}])],decls:8,vars:10,consts:[["trigger","cdkOverlayOrigin"],[1,"color-label"],[1,"color-label__header"],[1,"color-label__code"],["role","presentation","cdkOverlayOrigin","",1,"color-preview",3,"click"],["cdkConnectedOverlay","",3,"backdropClick","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayBackdropClass"],[3,"colorChange","color"]],template:function(o,r){if(o&1){let s=K();h(0,"div",1)(1,"span",2),f(2),m(),h(3,"span",3),f(4),m()(),h(5,"div",4,0),x("click",function(){return k(s),I(r.toggleColorPanel())}),m(),ze(7,$c,1,1,"ng-template",5),x("backdropClick",function(){return k(s),I(r.toggleColorPanel())})}if(o&2){let s=we(6);c(2),y(r.label()),c(2),y(r.hexColor()),c(),Ft("background-color",r.hexColor()),F("disabled",r.isDisabled()),c(2),v("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayOpen",r.isOpen())("cdkConnectedOverlayHasBackdrop",r.isOpen())("cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop-cs")}},dependencies:[Mt,ss,rs,va],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;align-items:center;border-radius:4px;padding:10px 15px;background-color:var(--irr-contrast-lightest);box-shadow:0 0 5px 1px #0000001a}[_nghost-%COMP%]   .color-preview[_ngcontent-%COMP%]{display:block;width:40px;height:40px;margin-left:auto;border-radius:50%;box-shadow:0 0 4px 1px #0000001a}[_nghost-%COMP%]   .color-preview[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}[_nghost-%COMP%]   .color-label[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .color-label__header[_ngcontent-%COMP%]{color:var(--irr-contrast-highest)}[_nghost-%COMP%]   .color-label__code[_ngcontent-%COMP%]{color:var(--irr-contrast-medium);font-size:15px}"],changeDetection:0});let n=i;return n})();function Uc(n,i){if(n&1&&(h(0,"div",5)(1,"div",6),f(2),_(3,"translate"),m(),h(4,"div",7),f(5),m()(),w(6,"app-color-picker",8)),n&2){let e=i,t=P();c(2),E("",b(3,4,"tool.tiles.details.tileId"),":"),c(3),y(e.id),c(),v("ngModel",e.color)("label",t.translate.instant("tool.tiles.details.tileColor"))}}function Wc(n,i){n&1&&(h(0,"div",4),f(1),_(2,"translate"),m()),n&2&&(c(),y(b(2,1,"tool.tiles.details.tileNoExist")))}var ya=(()=>{let i=class i{constructor(){this.tile=R(null),this.route=l(ci),this.store=l(N),this.router=l(te),this.translate=l(ie)}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");if(t){let o=this.getTileModel(t);o&&this.tile.set(o)}}getTileModel(t){return this.store.selectSignal(ct)().flatMap(r=>r.tiles).find(r=>r.id===t)}navigateToMenu(){this.router.navigate(["/tool/tray"])}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-tile-detail"]],decls:10,vars:7,consts:[[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","accent","disabled",""],[1,"details"],[1,"no-exist"],[1,"id"],[1,"label"],[1,"value"],["disabled","true",3,"ngModel","label"]],template:function(o,r){if(o&1&&(h(0,"div",0)(1,"button",1),x("click",function(){return r.navigateToMenu()}),f(2),_(3,"translate"),m(),h(4,"button",2),f(5),_(6,"translate"),m()(),h(7,"div",3),L(8,Uc,7,6)(9,Wc,3,3,"div",4),m()),o&2){let s;c(2),E(" ",b(3,3,"common.return")," "),c(3),E(" ",b(6,5,"common.edit")," "),c(3),j((s=r.tile())?8:9,s)}},dependencies:[Y,V,de,$o,ko,Ge,To,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:12px;height:100%}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;flex:1}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{padding:2px;color:#e6e6e6}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;text-overflow:ellipsis;text-wrap:nowrap}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]   .no-exist[_ngcontent-%COMP%]{color:var(--irr-contrast-medium);margin:auto}"],changeDetection:0});let n=i;return n})();var Et=(()=>{let i=class i{constructor(){this.sectorForContourEditionChanged=new Ne(null),this.sectorForContourEdition$=this.sectorForContourEditionChanged.asObservable(),this.sectorListChanged=new Ne(null),this.sectorListChange$=this.sectorListChanged.asObservable(),this.sectorForPropertyEditionChanged=new Ne(null),this.sectorForPropertyEdition$=this.sectorForPropertyEditionChanged.asObservable(),this.canvasClickedSub=new S,this.canvasClicked$=this.canvasClickedSub.asObservable()}emitEditedSectorContour(t){this.sectorForContourEditionChanged.next(t)}emitEditedSectorProperty(t){this.sectorForPropertyEditionChanged.next(t)}emitSectorListChanged(t){this.sectorListChanged.next(t)}emitCanvasClicked(t){this.canvasClickedSub.next(t)}static createNewSector(){return{id:crypto.randomUUID(),name:"",color:Se({h:Dt.nextFloat(0,360),s:75,v:95}).hex(),vertices:[],properties:{sectionMaxArea:5,sectionMinAngle:35,maxTileRadius:4,minTileRadius:0,tilesMargin:.1,evaluationParams:{singleSectionPopulation:2,overlappingAreaOutsideSector:-2,additionalPopulationOfNeighboringSectors:4,overlappingNotPopulatedSections:-1,tileColorMismatch:-2},populationParams:{initialPopulationSize:100,countOfTriesToInsertTile:30,countOfTrianglePositionDraws:30,countOfColorMatchingAttempts:40,iterationsCount:100,populationSize:10}}}}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var Uo=class extends Ht{constructor(i,e,t,o=100){super(),this.vertices=i,this.selectedIndex=e,this.hexColor=t,this.order=o}drawObject(i,e){if(this.vertices.length>=2){i.lineWidth=10,i.strokeStyle=this.hexColor,i.setLineDash([10]),i.beginPath(),i.globalAlpha=.25;let t=e.getViewportPosition(this.vertices.at(-1));i.moveTo(t.x,t.y),t=e.getViewportPosition(this.vertices[0]),i.lineTo(t.x,t.y),i.stroke(),i.globalAlpha=.7,i.setLineDash([]),i.beginPath(),i.moveTo(t.x,t.y);for(let o=1;o<this.vertices.length;++o)t=e.getViewportPosition(this.vertices[o]),i.lineTo(t.x,t.y);i.stroke()}i.lineWidth=1,i.globalAlpha=1,this.selectedIndex!==-1&&this.drawPoint(i,e,this.vertices[this.selectedIndex])}drawPoint(i,e,t){let o=e.getViewportPosition(t);i.beginPath(),i.arc(o.x,o.y,10,0,2*Math.PI),i.fillStyle=this.hexColor,i.fill()}getOrder(){return this.order}};function qc(n){for(var i=n.length,e=5381,t=52711,o;i--;)o=n.charCodeAt(i),e=e*33^o,t=t*33^o;return(e>>>0)*4096+(t>>>0)}var no="|",Gc=/\[object ([HTML|SVG](.*)Element)\]/,Qc={"[object Arguments]":0,"[object Array]":1,"[object ArrayBuffer]":2,"[object AsyncFunction]":3,"[object AsyncGeneratorFunction]":4,"[object BigInt]":5,"[object BigInt64Array]":6,"[object BigUint64Array]":7,"[object Boolean]":8,"[object DataView]":9,"[object Date]":10,"[object DocumentFragment]":11,"[object Error]":12,"[object Event]":13,"[object Float32Array]":14,"[object Float64Array]":15,"[object Function]":16,"[object Generator]":17,"[object GeneratorFunction]":18,"[object Int8Array]":19,"[object Int16Array]":20,"[object Map]":21,"[object Number]":22,"[object Object]":23,"[object Promise]":24,"[object RegExp]":25,"[object Set]":26,"[object SharedArrayBuffer]":27,"[object String]":28,"[object Uint8Array]":29,"[object Uint8ClampedArray]":30,"[object Uint16Array]":31,"[object Uint32Array]":32,"[object WeakMap]":33,"[object WeakRef]":34,"[object WeakSet]":35,CUSTOM:36,ELEMENT:37},Zc={"[object Arguments]":1,"[object Array]":2},Ma={"[object Generator]":1,"[object Promise]":2,"[object WeakMap]":3,"[object WeakRef]":4,"[object WeakSet]":5},Kc={"[object AsyncFunction]":1,"[object AsyncGeneratorFunction]":2,"[object Boolean]":3,"[object Function]":4,"[object GeneratorFunction]":5,"[object Number]":6,"[object String]":7},Yc={"[object BigInt64Array]":1,"[object BigUint64Array]":2,"[object Float32Array]":3,"[object Float64Array]":4,"[object Int8Array]":5,"[object Int16Array]":6,"[object Uint8Array]":7,"[object Uint8ClampedArray]":8,"[object Uint16Array]":9,"[object Uint32Array]":10},Xc={"[object Arguments]":1,"[object Array]":2,"[object ArrayBuffer]":3,"[object BigInt64Array]":4,"[object BigUint64Array]":5,"[object DataView]":6,"[object Float32Array]":7,"[object Float64Array]":8,"[object Int8Array]":9,"[object Int16Array]":10,"[object Map]":11,"[object Object]":12,"[object Set]":13,"[object SharedArrayBuffer]":14,"[object Uint8Array]":15,"[object Uint8ClampedArray]":16,"[object Uint16Array]":17,"[object Uint32Array]":18,CUSTOM:19},oo={bigint:"i",boolean:"b",empty:"e",function:"g",number:"n",object:"o",string:"s",symbol:"s"};function Jc(n,i){return n[0]>i[0]}function Pa(n,i){return n>i}function ir(n,i){for(var e,t,o=0;o<n.length;++o){for(t=n[o],e=o-1;~e&&i(n[e],t);--e)n[e+1]=n[e];n[e+1]=t}return n}function be(n,i){return oo.object+no+Qc[n]+no+i}var xa=new WeakMap,ed=0;function tr(n,i){var e=xa.get(n);if(e)return e;var t=be(i,"NOT_ENUMERABLE"+no+ed++);return xa.set(n,t),t}var td=Object.prototype.toString;function id(n,i,e){if(Xc[i])return Ca(i,n,e);if(i==="[object Date]")return be(i,n.getTime());if(i==="[object RegExp]")return be(i,n.toString());if(i==="[object Event]")return be(i,[n.bubbles,n.cancelBubble,n.cancelable,n.composed,n.currentTarget,n.defaultPrevented,n.eventPhase,n.isTrusted,n.returnValue,n.target,n.type].join());if(i==="[object Error]")return be(i,n.message+no+n.stack);if(i==="[object DocumentFragment]")return be(i,ad(n));var t=i.match(Gc);return t?be("ELEMENT",t[1]+no+n.outerHTML):Ma[i]?tr(n,i):Kc[i]?be(i,n.toString()):Ca("CUSTOM",n,e)}function Ca(n,i,e){var t=e.cache.get(i);return t?be(n,"RECURSIVE~"+t):(e.cache.set(i,++e.id),n==="[object Object]"?i[Symbol.iterator]?tr(i,n):be(n,wa(i,e)):Zc[n]?be(n,od(i,e)):n==="[object Map]"?be(n,ld(i,e)):n==="[object Set]"?be(n,cd(i,e)):Yc[n]?be(n,i.join()):n==="[object ArrayBuffer]"?be(n,Sa(i)):n==="[object DataView]"?be(n,Sa(i.buffer)):Ma[n]?tr(i,n):be("CUSTOM",wa(i,e)))}function od(n,i){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=Ri(n[e],i);return t.join()}function nd(n){return Buffer.from(n).toString("utf8")}function rd(n){return String.fromCharCode.apply(null,new Uint16Array(n))}function sd(){return"UNSUPPORTED"}function ad(n){for(var i=n.children,e=i.length,t=new Array(e);--e>=0;)t[e]=i[e].outerHTML;return t.join()}var Sa=typeof Buffer<"u"&&typeof Buffer.from=="function"?nd:typeof Uint16Array=="function"?rd:sd;function ld(n,i){var e=new Array(n.size),t=0;for(n.forEach(function(o,r){e[t++]=[Ri(r,i),Ri(o,i)]}),ir(e,Jc);--t>=0;)e[t]="["+e[t][0]+","+e[t][1]+"]";return"["+e.join()+"]"}function wa(n,i){for(var e=ir(Object.getOwnPropertyNames(n),Pa),t=e.length,o=new Array(t),r=t;--r>=0;)o[r]=e[r]+":"+Ri(n[e[r]],i);return"{"+o.join()+"}"}function cd(n,i){var e=new Array(n.size),t=0;return n.forEach(function(o){e[t++]=Ri(o,i)}),"["+ir(e,Pa).join()+"]"}function Ri(n,i){var e=typeof n;return n==null||e==="undefined"?oo.empty+n:e==="object"?id(n,td.call(n),i||{cache:new WeakMap,id:1}):e==="function"||e==="symbol"?oo[e]+n.toString():e==="boolean"?oo.boolean+ +n:oo[e]+n}function Da(n){return qc(Ri(n,void 0))}var Ot=class{constructor(i,e){this.start=i,this.end=e}hash(){return Da(this)}};var Ai=class n extends Ht{constructor(i,e,t,o=100){super(),this.borderThickness=6,this.innerThickness=3,this.hexColor=t,this.order=o,this.outerContour=e,this.selectLines(i)}drawObject(i,e){this.outerContour.length<3||(i.strokeStyle=this.hexColor,this.drawTriangulationMesh(i,e),this.drawBorder(i,e),i.lineWidth=1)}drawBorder(i,e){i.lineWidth=this.borderThickness;let t=e.getViewportPosition(this.outerContour[0]);i.beginPath(),i.moveTo(t.x,t.y);for(let o=1;o<this.outerContour.length;++o)t=e.getViewportPosition(this.outerContour[o]),i.lineTo(t.x,t.y);i.closePath(),i.stroke(),i.globalAlpha=.25,i.fillStyle=this.hexColor,i.fill(),i.globalAlpha=1}drawTriangulationMesh(i,e){i.lineWidth=this.innerThickness,i.globalAlpha=.3;for(let t of this.innerLines){i.beginPath();let o=e.getViewportPosition(t.start);i.moveTo(o.x,o.y);let r=e.getViewportPosition(t.end);i.lineTo(r.x,r.y),i.stroke()}i.globalAlpha=1}selectLines(i){let e=n.collectMeshLines(i),t=[];for(let o of e.values())o.count==2&&t.push(o.line);this.innerLines=t}getOrder(){return this.order}static collectMeshLines(i){let e=new Map;for(let t of i){let o=t.getVertices(),r=o.at(-1);for(let s=0;s<3;++s){let a=o[s],d=r.sqrMagnitude()<a.sqrMagnitude()?[r,a]:[a,r],u=new Ot(d[0],d[1]),g=u.hash(),z=e.get(g);z?z.count++:e.set(g,{line:u,count:1}),r=a}}return e}};var Fi=class extends Ht{constructor(i,e,t=10){super(),this.vertices=i,this.hexColor=e,this.order=t,this.lineThickness=8,this.vertices=i,this.order=t}drawObject(i,e){if(this.vertices.length<3)return;i.beginPath();let t=e.getViewportPosition(this.vertices[0]);i.moveTo(t.x,t.y);for(let o=1;o<this.vertices.length;++o)t=e.getViewportPosition(this.vertices[o]),i.lineTo(t.x,t.y);i.lineWidth=this.lineThickness,i.strokeStyle=this.hexColor,i.closePath(),i.globalAlpha=.25,i.fillStyle=this.hexColor,i.fill(),i.globalAlpha=1,i.stroke(),i.lineWidth=1}getOrder(){return this.order}};var Ea=(()=>{let i=class i{constructor(){this.store=l(N),this.service=l(Et),this.destroyRef=l(Z),this.sectorForContourEdition=Tn(this.service.sectorForContourEdition$,{requireSync:!0}),this.sectorForPropertyEdition=Tn(this.service.sectorForPropertyEdition$,{requireSync:!0}),this.visualElements=[],this.ribbonActions=[{iconName:"recenter",visibility:R("on"),onClick:()=>{this.focusOnImage(),this.activeCanvas.redraw()}}]}ngOnInit(){this.service.emitEditedSectorContour(null),this.service.emitEditedSectorProperty(null)}async ngAfterViewInit(){let t=this.store.selectSignal(lt)();this.imageObject=await Pt.createImageObject(t),this.activeCanvas.addCanvasObject(this.imageObject),this.subscribeOnEditedSectorChange(),this.subscribeOnEditedSectorPropertiesChange(),this.subscribeOnSectorListChange(),this.activeCanvas.redraw(),bs(this.activeCanvas.clicked).pipe(q(this.destroyRef)).subscribe(o=>this.service.emitCanvasClicked(o))}subscribeOnEditedSectorChange(){this.service.sectorForContourEdition$.pipe(q(this.destroyRef)).subscribe(t=>this.onEditedSectorChanged(t))}subscribeOnEditedSectorPropertiesChange(){this.service.sectorForPropertyEdition$.pipe(q(this.destroyRef)).subscribe(()=>this.redrawSectors())}subscribeOnSectorListChange(){this.service.sectorListChange$.pipe(q(this.destroyRef)).subscribe(()=>this.redrawSectors())}onEditedSectorChanged(t){this.activeCanvas.options.update(o=>ve(M({},o),{isMovable:!t})),this.redrawSectors()}redrawSectors(){this.visualElements.forEach(t=>t.removeObject()),this.visualElements=this.prepareSectorsContours();for(let t of this.visualElements)this.activeCanvas.addCanvasObject(t);this.activeCanvas.redraw()}prepareSectorsContours(){let t=this.sectorForContourEdition(),o=this.sectorForPropertyEdition(),r,s=this.store.selectSignal(Me)();return t?s=Cs.addOrUpdate([...s],t.sector,a=>a.id===t.sector.id):this.service.sectorListChange$.pipe(Sr()).subscribe(a=>{r=a?.selectedSector}),this.mapSectorsToContours(s,t,o,r)}mapSectorsToContours(t,o,r,s){return t.map((a,d)=>{if(a.id===o?.sector.id)return new Uo([...o.sector.vertices],o.sector.vertices.indexOf(o.selectedVertex),o.sector.color);if(r?.mesh&&a.id===r?.sector.id){let u=r.mesh,g=r.contour;return new Ai(u,g,r.sector.color)}else{let u=new Fi([...a.vertices],a.color,10+d);return a.id===s?.id&&(u.lineThickness=10),u}})}sectionEntered(t){return this.activeCanvas=t,{ribbon:this.ribbonActions}}focusOnImage(){let t=Pt.calculateZoomForImage(this.imageObject.size,this.activeCanvas.viewport);this.activeCanvas.setViewport(t,B.zero)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-sectors"]],decls:1,vars:0,template:function(o,r){o&1&&w(0,"router-outlet")},dependencies:[di],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box;height:100%;padding:20px 10px;overflow-y:auto;overflow-x:hidden}"],changeDetection:0});let n=i;return n})();var Ae=class extends Error{constructor(i,e){let t=new.target.prototype;super(`${i}: Status code '${e}'`),this.statusCode=e,this.__proto__=t}},Ut=class extends Error{constructor(i="A timeout occurred."){let e=new.target.prototype;super(i),this.__proto__=e}},ge=class extends Error{constructor(i="An abort occurred."){let e=new.target.prototype;super(i),this.__proto__=e}},Wo=class extends Error{constructor(i,e){let t=new.target.prototype;super(i),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=t}},qo=class extends Error{constructor(i,e){let t=new.target.prototype;super(i),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=t}},Go=class extends Error{constructor(i,e){let t=new.target.prototype;super(i),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=t}},ro=class extends Error{constructor(i){let e=new.target.prototype;super(i),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}},Qo=class extends Error{constructor(i,e){let t=new.target.prototype;super(i),this.innerErrors=e,this.__proto__=t}};var Li=class{constructor(i,e,t){this.statusCode=i,this.statusText=e,this.content=t}},ft=class{get(i,e){return this.send(ve(M({},e),{method:"GET",url:i}))}post(i,e){return this.send(ve(M({},e),{method:"POST",url:i}))}delete(i,e){return this.send(ve(M({},e),{method:"DELETE",url:i}))}getCookieString(i){return""}};var p=(function(n){return n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None",n})(p||{});var gt=class{constructor(){}log(i,e){}};gt.instance=new gt;var dd="8.0.17",H=class{static isRequired(i,e){if(i==null)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(i,e){if(!i||i.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(i,e,t){if(!(i in e))throw new Error(`Unknown ${t} value: ${i}.`)}},G=class n{static get isBrowser(){return!n.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!n.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!n.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function Wt(n,i){let e="";return it(n)?(e=`Binary data of length ${n.byteLength}`,i&&(e+=`. Content: '${md(n)}'`)):typeof n=="string"&&(e=`String data of length ${n.length}`,i&&(e+=`. Content: '${n}'`)),e}function md(n){let i=new Uint8Array(n),e="";return i.forEach(t=>{let o=t<16?"0":"";e+=`0x${o}${t.toString(16)} `}),e.substr(0,e.length-1)}function it(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}async function Ko(n,i,e,t,o,r){let s={},[a,d]=_t();s[a]=d,n.log(p.Trace,`(${i} transport) sending data. ${Wt(o,r.logMessageContent)}.`);let u=it(o)?"arraybuffer":"text",g=await e.post(t,{content:o,headers:M(M({},s),r.headers),responseType:u,timeout:r.timeout,withCredentials:r.withCredentials});n.log(p.Trace,`(${i} transport) request complete. Response status: ${g.statusCode}.`)}function Oa(n){return n===void 0?new Xt(p.Information):n===null?gt.instance:n.log!==void 0?n:new Xt(n)}var Zo=class{constructor(i,e){this._subject=i,this._observer=e}dispose(){let i=this._subject.observers.indexOf(this._observer);i>-1&&this._subject.observers.splice(i,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}},Xt=class{constructor(i){this._minLevel=i,this.out=console}log(i,e){if(i>=this._minLevel){let t=`[${new Date().toISOString()}] ${p[i]}: ${e}`;switch(i){case p.Critical:case p.Error:this.out.error(t);break;case p.Warning:this.out.warn(t);break;case p.Information:this.out.info(t);break;default:this.out.log(t);break}}}};function _t(){let n="X-SignalR-User-Agent";return G.isNode&&(n="User-Agent"),[n,hd(dd,pd(),fd(),ud())]}function hd(n,i,e,t){let o="Microsoft SignalR/",r=n.split(".");return o+=`${r[0]}.${r[1]}`,o+=` (${n}; `,i&&i!==""?o+=`${i}; `:o+="Unknown OS; ",o+=`${e}`,t?o+=`; ${t}`:o+="; Unknown Runtime Version",o+=")",o}function pd(){if(G.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function ud(){if(G.isNode)return process.versions.node}function fd(){return G.isNode?"NodeJS":"Browser"}function Yo(n){return n.stack?n.stack:n.message?n.message:`${n}`}function Ta(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var Xo=class extends ft{constructor(i){if(super(),this._logger=i,typeof fetch>"u"||G.isNode){let e=typeof __webpack_require__=="function"?__non_webpack_require__:ei;this._jar=new(e("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Ta());if(typeof AbortController>"u"){let e=typeof __webpack_require__=="function"?__non_webpack_require__:ei;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}async send(i){if(i.abortSignal&&i.abortSignal.aborted)throw new ge;if(!i.method)throw new Error("No method defined.");if(!i.url)throw new Error("No url defined.");let e=new this._abortControllerType,t;i.abortSignal&&(i.abortSignal.onabort=()=>{e.abort(),t=new ge});let o=null;if(i.timeout){let d=i.timeout;o=setTimeout(()=>{e.abort(),this._logger.log(p.Warning,"Timeout from HTTP request."),t=new Ut},d)}i.content===""&&(i.content=void 0),i.content&&(i.headers=i.headers||{},it(i.content)?i.headers["Content-Type"]="application/octet-stream":i.headers["Content-Type"]="text/plain;charset=UTF-8");let r;try{r=await this._fetchType(i.url,{body:i.content,cache:"no-cache",credentials:i.withCredentials===!0?"include":"same-origin",headers:M({"X-Requested-With":"XMLHttpRequest"},i.headers),method:i.method,mode:"cors",redirect:"follow",signal:e.signal})}catch(d){throw t||(this._logger.log(p.Warning,`Error from HTTP request. ${d}.`),d)}finally{o&&clearTimeout(o),i.abortSignal&&(i.abortSignal.onabort=null)}if(!r.ok){let d=await ka(r,"text");throw new Ae(d||r.statusText,r.status)}let a=await ka(r,i.responseType);return new Li(r.status,r.statusText,a)}getCookieString(i){let e="";return G.isNode&&this._jar&&this._jar.getCookies(i,(t,o)=>e=o.join("; ")),e}};function ka(n,i){let e;switch(i){case"arraybuffer":e=n.arrayBuffer();break;case"text":e=n.text();break;case"blob":case"document":case"json":throw new Error(`${i} is not supported.`);default:e=n.text();break}return e}var Jo=class extends ft{constructor(i){super(),this._logger=i}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new ge):i.method?i.url?new Promise((e,t)=>{let o=new XMLHttpRequest;o.open(i.method,i.url,!0),o.withCredentials=i.withCredentials===void 0?!0:i.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.content===""&&(i.content=void 0),i.content&&(it(i.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let r=i.headers;r&&Object.keys(r).forEach(s=>{o.setRequestHeader(s,r[s])}),i.responseType&&(o.responseType=i.responseType),i.abortSignal&&(i.abortSignal.onabort=()=>{o.abort(),t(new ge)}),i.timeout&&(o.timeout=i.timeout),o.onload=()=>{i.abortSignal&&(i.abortSignal.onabort=null),o.status>=200&&o.status<300?e(new Li(o.status,o.statusText,o.response||o.responseText)):t(new Ae(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(p.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),t(new Ae(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(p.Warning,"Timeout from HTTP request."),t(new Ut)},o.send(i.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var en=class extends ft{constructor(i){if(super(),typeof fetch<"u"||G.isNode)this._httpClient=new Xo(i);else if(typeof XMLHttpRequest<"u")this._httpClient=new Jo(i);else throw new Error("No usable HttpClient found.")}send(i){return i.abortSignal&&i.abortSignal.aborted?Promise.reject(new ge):i.method?i.url?this._httpClient.send(i):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(i){return this._httpClient.getCookieString(i)}};var Fe=class n{static write(i){return`${i}${n.RecordSeparator}`}static parse(i){if(i[i.length-1]!==n.RecordSeparator)throw new Error("Message is incomplete.");let e=i.split(n.RecordSeparator);return e.pop(),e}};Fe.RecordSeparatorCode=30;Fe.RecordSeparator=String.fromCharCode(Fe.RecordSeparatorCode);var tn=class{writeHandshakeRequest(i){return Fe.write(JSON.stringify(i))}parseHandshakeResponse(i){let e,t;if(it(i)){let a=new Uint8Array(i),d=a.indexOf(Fe.RecordSeparatorCode);if(d===-1)throw new Error("Message is incomplete.");let u=d+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,u))),t=a.byteLength>u?a.slice(u).buffer:null}else{let a=i,d=a.indexOf(Fe.RecordSeparator);if(d===-1)throw new Error("Message is incomplete.");let u=d+1;e=a.substring(0,u),t=a.length>u?a.substring(u):null}let o=Fe.parse(e),r=JSON.parse(o[0]);if(r.type)throw new Error("Expected a handshake response from the server.");return[t,r]}};var D=(function(n){return n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n[n.Ack=8]="Ack",n[n.Sequence=9]="Sequence",n})(D||{});var on=class{constructor(){this.observers=[]}next(i){for(let e of this.observers)e.next(i)}error(i){for(let e of this.observers)e.error&&e.error(i)}complete(){for(let i of this.observers)i.complete&&i.complete()}subscribe(i){return this.observers.push(i),new Zo(this,i)}};var nn=class{constructor(i,e,t){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=i,this._connection=e,this._bufferSize=t}async _send(i){let e=this._protocol.writeMessage(i),t=Promise.resolve();if(this._isInvocationMessage(i)){this._totalMessageCount++;let o=()=>{},r=()=>{};it(e)?this._bufferedByteCount+=e.byteLength:this._bufferedByteCount+=e.length,this._bufferedByteCount>=this._bufferSize&&(t=new Promise((s,a)=>{o=s,r=a})),this._messages.push(new or(e,this._totalMessageCount,o,r))}try{this._reconnectInProgress||await this._connection.send(e)}catch{this._disconnected()}await t}_ack(i){let e=-1;for(let t=0;t<this._messages.length;t++){let o=this._messages[t];if(o._id<=i.sequenceId)e=t,it(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}e!==-1&&(this._messages=this._messages.slice(e+1))}_shouldProcessMessage(i){if(this._waitForSequenceMessage)return i.type!==D.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(i))return!0;let e=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,e<=this._latestReceivedSequenceId?(e===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=e,this._ackTimer(),!0)}_resetSequence(i){if(i.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=i.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){let i=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:D.Sequence,sequenceId:i}));let e=this._messages;for(let t of e)await this._connection.send(t._message);this._reconnectInProgress=!1}_dispose(i){i??(i=new Error("Unable to reconnect to server."));for(let e of this._messages)e._rejector(i)}_isInvocationMessage(i){switch(i.type){case D.Invocation:case D.StreamItem:case D.Completion:case D.StreamInvocation:case D.CancelInvocation:return!0;case D.Close:case D.Sequence:case D.Ping:case D.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:D.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}},or=class{constructor(i,e,t,o){this._message=i,this._id=e,this._resolver=t,this._rejector=o}};var gd=30*1e3,_d=15*1e3,bd=1e5,ee=(function(n){return n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting",n})(ee||{}),rn=class n{static create(i,e,t,o,r,s,a){return new n(i,e,t,o,r,s,a)}constructor(i,e,t,o,r,s,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(p.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},H.isRequired(i,"connection"),H.isRequired(e,"logger"),H.isRequired(t,"protocol"),this.serverTimeoutInMilliseconds=r??gd,this.keepAliveIntervalInMilliseconds=s??_d,this._statefulReconnectBufferSize=a??bd,this._logger=e,this._protocol=t,this.connection=i,this._reconnectPolicy=o,this._handshakeProtocol=new tn,this.connection.onreceive=d=>this._processIncomingData(d),this.connection.onclose=d=>this._connectionClosed(d),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=ee.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:D.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(i){if(this._connectionState!==ee.Disconnected&&this._connectionState!==ee.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!i)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=i}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==ee.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=ee.Connecting,this._logger.log(p.Debug,"Starting HubConnection.");try{await this._startInternal(),G.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=ee.Connected,this._connectionStarted=!0,this._logger.log(p.Debug,"HubConnection connected successfully.")}catch(i){return this._connectionState=ee.Disconnected,this._logger.log(p.Debug,`HubConnection failed to start successfully because of error '${i}'.`),Promise.reject(i)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let i=new Promise((e,t)=>{this._handshakeResolver=e,this._handshakeRejecter=t});await this.connection.start(this._protocol.transferFormat);try{let e=this._protocol.version;this.connection.features.reconnect||(e=1);let t={protocol:this._protocol.name,version:e};if(this._logger.log(p.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(p.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await i,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new nn(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(e){throw this._logger.log(p.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(e),e}}async stop(){let i=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await i}catch{}}_stopInternal(i){if(this._connectionState===ee.Disconnected)return this._logger.log(p.Debug,`Call to HubConnection.stop(${i}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===ee.Disconnecting)return this._logger.log(p.Debug,`Call to HttpConnection.stop(${i}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let e=this._connectionState;return this._connectionState=ee.Disconnecting,this._logger.log(p.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(p.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(e===ee.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=i||new ge("The connection was stopped before the hub handshake could complete."),this.connection.stop(i))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(i,...e){let[t,o]=this._replaceStreamingParams(e),r=this._createStreamInvocation(i,e,o),s,a=new on;return a.cancelCallback=()=>{let d=this._createCancelInvocation(r.invocationId);return delete this._callbacks[r.invocationId],s.then(()=>this._sendWithProtocol(d))},this._callbacks[r.invocationId]=(d,u)=>{if(u){a.error(u);return}else d&&(d.type===D.Completion?d.error?a.error(new Error(d.error)):a.complete():a.next(d.item))},s=this._sendWithProtocol(r).catch(d=>{a.error(d),delete this._callbacks[r.invocationId]}),this._launchStreams(t,s),a}_sendMessage(i){return this._resetKeepAliveInterval(),this.connection.send(i)}_sendWithProtocol(i){return this._messageBuffer?this._messageBuffer._send(i):this._sendMessage(this._protocol.writeMessage(i))}send(i,...e){let[t,o]=this._replaceStreamingParams(e),r=this._sendWithProtocol(this._createInvocation(i,e,!0,o));return this._launchStreams(t,r),r}invoke(i,...e){let[t,o]=this._replaceStreamingParams(e),r=this._createInvocation(i,e,!1,o);return new Promise((a,d)=>{this._callbacks[r.invocationId]=(g,z)=>{if(z){d(z);return}else g&&(g.type===D.Completion?g.error?d(new Error(g.error)):a(g.result):d(new Error(`Unexpected message type: ${g.type}`)))};let u=this._sendWithProtocol(r).catch(g=>{d(g),delete this._callbacks[r.invocationId]});this._launchStreams(t,u)})}on(i,e){!i||!e||(i=i.toLowerCase(),this._methods[i]||(this._methods[i]=[]),this._methods[i].indexOf(e)===-1&&this._methods[i].push(e))}off(i,e){if(!i)return;i=i.toLowerCase();let t=this._methods[i];if(t)if(e){let o=t.indexOf(e);o!==-1&&(t.splice(o,1),t.length===0&&delete this._methods[i])}else delete this._methods[i]}onclose(i){i&&this._closedCallbacks.push(i)}onreconnecting(i){i&&this._reconnectingCallbacks.push(i)}onreconnected(i){i&&this._reconnectedCallbacks.push(i)}_processIncomingData(i){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){let e=this._protocol.parseMessages(i,this._logger);for(let t of e)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(t)))switch(t.type){case D.Invocation:this._invokeClientMethod(t).catch(o=>{this._logger.log(p.Error,`Invoke client method threw error: ${Yo(o)}`)});break;case D.StreamItem:case D.Completion:{let o=this._callbacks[t.invocationId];if(o){t.type===D.Completion&&delete this._callbacks[t.invocationId];try{o(t)}catch(r){this._logger.log(p.Error,`Stream callback threw error: ${Yo(r)}`)}}break}case D.Ping:break;case D.Close:{this._logger.log(p.Information,"Close message received from server.");let o=t.error?new Error("Server returned an error on close: "+t.error):void 0;t.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case D.Ack:this._messageBuffer&&this._messageBuffer._ack(t);break;case D.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(t);break;default:this._logger.log(p.Warning,`Invalid message type: ${t.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(i){let e,t;try{[t,e]=this._handshakeProtocol.parseHandshakeResponse(i)}catch(o){let r="Error parsing handshake response: "+o;this._logger.log(p.Error,r);let s=new Error(r);throw this._handshakeRejecter(s),s}if(e.error){let o="Server returned handshake error: "+e.error;this._logger.log(p.Error,o);let r=new Error(o);throw this._handshakeRejecter(r),r}else this._logger.log(p.Debug,"Server handshake complete.");return this._handshakeResolver(),t}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let i=this._nextKeepAlive-new Date().getTime();i<0&&(i=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===ee.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},i)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(i){let e=i.target.toLowerCase(),t=this._methods[e];if(!t){this._logger.log(p.Warning,`No client method with the name '${e}' found.`),i.invocationId&&(this._logger.log(p.Warning,`No result given for '${e}' method and invocation ID '${i.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)));return}let o=t.slice(),r=!!i.invocationId,s,a,d;for(let u of o)try{let g=s;s=await u.apply(this,i.arguments),r&&s&&g&&(this._logger.log(p.Error,`Multiple results provided for '${e}'. Sending error to server.`),d=this._createCompletionMessage(i.invocationId,"Client provided multiple results.",null)),a=void 0}catch(g){a=g,this._logger.log(p.Error,`A callback for the method '${e}' threw error '${g}'.`)}d?await this._sendWithProtocol(d):r?(a?d=this._createCompletionMessage(i.invocationId,`${a}`,null):s!==void 0?d=this._createCompletionMessage(i.invocationId,null,s):(this._logger.log(p.Warning,`No result given for '${e}' method and invocation ID '${i.invocationId}'.`),d=this._createCompletionMessage(i.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(d)):s&&this._logger.log(p.Error,`Result given for '${e}' method but server is not expecting a result.`)}_connectionClosed(i){this._logger.log(p.Debug,`HubConnection.connectionClosed(${i}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||i||new ge("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(i||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===ee.Disconnecting?this._completeClose(i):this._connectionState===ee.Connected&&this._reconnectPolicy?this._reconnect(i):this._connectionState===ee.Connected&&this._completeClose(i)}_completeClose(i){if(this._connectionStarted){this._connectionState=ee.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(i??new Error("Connection closed.")),this._messageBuffer=void 0),G.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(e=>e.apply(this,[i]))}catch(e){this._logger.log(p.Error,`An onclose callback called with error '${i}' threw error '${e}'.`)}}}async _reconnect(i){let e=Date.now(),t=0,o=i!==void 0?i:new Error("Attempting to reconnect due to a unknown error."),r=this._getNextRetryDelay(t++,0,o);if(r===null){this._logger.log(p.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(i);return}if(this._connectionState=ee.Reconnecting,i?this._logger.log(p.Information,`Connection reconnecting because of error '${i}'.`):this._logger.log(p.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(s=>s.apply(this,[i]))}catch(s){this._logger.log(p.Error,`An onreconnecting callback called with error '${i}' threw error '${s}'.`)}if(this._connectionState!==ee.Reconnecting){this._logger.log(p.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;r!==null;){if(this._logger.log(p.Information,`Reconnect attempt number ${t} will start in ${r} ms.`),await new Promise(s=>{this._reconnectDelayHandle=setTimeout(s,r)}),this._reconnectDelayHandle=void 0,this._connectionState!==ee.Reconnecting){this._logger.log(p.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=ee.Connected,this._logger.log(p.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(s=>s.apply(this,[this.connection.connectionId]))}catch(s){this._logger.log(p.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${s}'.`)}return}catch(s){if(this._logger.log(p.Information,`Reconnect attempt failed because of error '${s}'.`),this._connectionState!==ee.Reconnecting){this._logger.log(p.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===ee.Disconnecting&&this._completeClose();return}o=s instanceof Error?s:new Error(s.toString()),r=this._getNextRetryDelay(t++,Date.now()-e,o)}}this._logger.log(p.Information,`Reconnect retries have been exhausted after ${Date.now()-e} ms and ${t} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(i,e,t){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:i,retryReason:t})}catch(o){return this._logger.log(p.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${i}, ${e}) threw error '${o}'.`),null}}_cancelCallbacksWithError(i){let e=this._callbacks;this._callbacks={},Object.keys(e).forEach(t=>{let o=e[t];try{o(null,i)}catch(r){this._logger.log(p.Error,`Stream 'error' callback called with '${i}' threw error: ${Yo(r)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(i,e,t,o){if(t)return o.length!==0?{arguments:e,streamIds:o,target:i,type:D.Invocation}:{arguments:e,target:i,type:D.Invocation};{let r=this._invocationId;return this._invocationId++,o.length!==0?{arguments:e,invocationId:r.toString(),streamIds:o,target:i,type:D.Invocation}:{arguments:e,invocationId:r.toString(),target:i,type:D.Invocation}}}_launchStreams(i,e){if(i.length!==0){e||(e=Promise.resolve());for(let t in i)i[t].subscribe({complete:()=>{e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(t)))},error:o=>{let r;o instanceof Error?r=o.message:o&&o.toString?r=o.toString():r="Unknown error",e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(t,r)))},next:o=>{e=e.then(()=>this._sendWithProtocol(this._createStreamItemMessage(t,o)))}})}}_replaceStreamingParams(i){let e=[],t=[];for(let o=0;o<i.length;o++){let r=i[o];if(this._isObservable(r)){let s=this._invocationId;this._invocationId++,e[s]=r,t.push(s.toString()),i.splice(o,1)}}return[e,t]}_isObservable(i){return i&&i.subscribe&&typeof i.subscribe=="function"}_createStreamInvocation(i,e,t){let o=this._invocationId;return this._invocationId++,t.length!==0?{arguments:e,invocationId:o.toString(),streamIds:t,target:i,type:D.StreamInvocation}:{arguments:e,invocationId:o.toString(),target:i,type:D.StreamInvocation}}_createCancelInvocation(i){return{invocationId:i,type:D.CancelInvocation}}_createStreamItemMessage(i,e){return{invocationId:i,item:e,type:D.StreamItem}}_createCompletionMessage(i,e,t){return e?{error:e,invocationId:i,type:D.Completion}:{invocationId:i,result:t,type:D.Completion}}_createCloseMessage(){return{type:D.Close}}};var vd=[0,2e3,1e4,3e4,null],so=class{constructor(i){this._retryDelays=i!==void 0?[...i,null]:vd}nextRetryDelayInMilliseconds(i){return this._retryDelays[i.previousRetryCount]}};var Jt=(()=>{class n{}return n.Authorization="Authorization",n.Cookie="Cookie",n})();var sn=class extends ft{constructor(i,e){super(),this._innerClient=i,this._accessTokenFactory=e}async send(i){let e=!0;this._accessTokenFactory&&(!this._accessToken||i.url&&i.url.indexOf("/negotiate?")>0)&&(e=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(i);let t=await this._innerClient.send(i);return e&&t.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(i),await this._innerClient.send(i)):t}_setAuthorizationHeader(i){i.headers||(i.headers={}),this._accessToken?i.headers[Jt.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&i.headers[Jt.Authorization]&&delete i.headers[Jt.Authorization]}getCookieString(i){return this._innerClient.getCookieString(i)}};var ne=(function(n){return n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling",n})(ne||{}),se=(function(n){return n[n.Text=1]="Text",n[n.Binary=2]="Binary",n})(se||{});var an=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var ao=class{get pollAborted(){return this._pollAbort.aborted}constructor(i,e,t){this._httpClient=i,this._logger=e,this._pollAbort=new an,this._options=t,this._running=!1,this.onreceive=null,this.onclose=null}async connect(i,e){if(H.isRequired(i,"url"),H.isRequired(e,"transferFormat"),H.isIn(e,se,"transferFormat"),this._url=i,this._logger.log(p.Trace,"(LongPolling transport) Connecting."),e===se.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[t,o]=_t(),r=M({[t]:o},this._options.headers),s={abortSignal:this._pollAbort.signal,headers:r,timeout:1e5,withCredentials:this._options.withCredentials};e===se.Binary&&(s.responseType="arraybuffer");let a=`${i}&_=${Date.now()}`;this._logger.log(p.Trace,`(LongPolling transport) polling: ${a}.`);let d=await this._httpClient.get(a,s);d.statusCode!==200?(this._logger.log(p.Error,`(LongPolling transport) Unexpected response code: ${d.statusCode}.`),this._closeError=new Ae(d.statusText||"",d.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,s)}async _poll(i,e){try{for(;this._running;)try{let t=`${i}&_=${Date.now()}`;this._logger.log(p.Trace,`(LongPolling transport) polling: ${t}.`);let o=await this._httpClient.get(t,e);o.statusCode===204?(this._logger.log(p.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(p.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new Ae(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(p.Trace,`(LongPolling transport) data received. ${Wt(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(p.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof Ut?this._logger.log(p.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(p.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this._logger.log(p.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(i){return this._running?Ko(this._logger,"LongPolling",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(p.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(p.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let i={},[e,t]=_t();i[e]=t;let o={headers:M(M({},i),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},r;try{await this._httpClient.delete(this._url,o)}catch(s){r=s}r?r instanceof Ae&&(r.statusCode===404?this._logger.log(p.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(p.Trace,`(LongPolling transport) Error sending a DELETE request: ${r}`)):this._logger.log(p.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(p.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let i="(LongPolling transport) Firing onclose event.";this._closeError&&(i+=" Error: "+this._closeError),this._logger.log(p.Trace,i),this.onclose(this._closeError)}}};var ln=class{constructor(i,e,t,o){this._httpClient=i,this._accessToken=e,this._logger=t,this._options=o,this.onreceive=null,this.onclose=null}async connect(i,e){return H.isRequired(i,"url"),H.isRequired(e,"transferFormat"),H.isIn(e,se,"transferFormat"),this._logger.log(p.Trace,"(SSE transport) Connecting."),this._url=i,this._accessToken&&(i+=(i.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((t,o)=>{let r=!1;if(e!==se.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let s;if(G.isBrowser||G.isWebWorker)s=new this._options.EventSource(i,{withCredentials:this._options.withCredentials});else{let a=this._httpClient.getCookieString(i),d={};d.Cookie=a;let[u,g]=_t();d[u]=g,s=new this._options.EventSource(i,{withCredentials:this._options.withCredentials,headers:M(M({},d),this._options.headers)})}try{s.onmessage=a=>{if(this.onreceive)try{this._logger.log(p.Trace,`(SSE transport) data received. ${Wt(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(d){this._close(d);return}},s.onerror=a=>{r?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},s.onopen=()=>{this._logger.log(p.Information,`SSE connected to ${this._url}`),this._eventSource=s,r=!0,t()}}catch(a){o(a);return}})}async send(i){return this._eventSource?Ko(this._logger,"SSE",this._httpClient,this._url,i,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(i){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(i))}};var cn=class{constructor(i,e,t,o,r,s){this._logger=t,this._accessTokenFactory=e,this._logMessageContent=o,this._webSocketConstructor=r,this._httpClient=i,this.onreceive=null,this.onclose=null,this._headers=s}async connect(i,e){H.isRequired(i,"url"),H.isRequired(e,"transferFormat"),H.isIn(e,se,"transferFormat"),this._logger.log(p.Trace,"(WebSockets transport) Connecting.");let t;return this._accessTokenFactory&&(t=await this._accessTokenFactory()),new Promise((o,r)=>{i=i.replace(/^http/,"ws");let s,a=this._httpClient.getCookieString(i),d=!1;if(G.isNode||G.isReactNative){let u={},[g,z]=_t();u[g]=z,t&&(u[Jt.Authorization]=`Bearer ${t}`),a&&(u[Jt.Cookie]=a),s=new this._webSocketConstructor(i,void 0,{headers:M(M({},u),this._headers)})}else t&&(i+=(i.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(t)}`);s||(s=new this._webSocketConstructor(i)),e===se.Binary&&(s.binaryType="arraybuffer"),s.onopen=u=>{this._logger.log(p.Information,`WebSocket connected to ${i}.`),this._webSocket=s,d=!0,o()},s.onerror=u=>{let g=null;typeof ErrorEvent<"u"&&u instanceof ErrorEvent?g=u.error:g="There was an error with the transport",this._logger.log(p.Information,`(WebSockets transport) ${g}.`)},s.onmessage=u=>{if(this._logger.log(p.Trace,`(WebSockets transport) data received. ${Wt(u.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(u.data)}catch(g){this._close(g);return}},s.onclose=u=>{if(d)this._close(u);else{let g=null;typeof ErrorEvent<"u"&&u instanceof ErrorEvent?g=u.error:g="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(new Error(g))}}})}send(i){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(p.Trace,`(WebSockets transport) sending data. ${Wt(i,this._logMessageContent)}.`),this._webSocket.send(i),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(i){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(p.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(i)&&(i.wasClean===!1||i.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${i.code} (${i.reason||"no reason given"}).`)):i instanceof Error?this.onclose(i):this.onclose())}_isCloseEvent(i){return i&&typeof i.wasClean=="boolean"&&typeof i.code=="number"}};var Ia=100,dn=class{constructor(i,e={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,H.isRequired(i,"url"),this._logger=Oa(e.logger),this.baseUrl=this._resolveUrl(i),e=e||{},e.logMessageContent=e.logMessageContent===void 0?!1:e.logMessageContent,typeof e.withCredentials=="boolean"||e.withCredentials===void 0)e.withCredentials=e.withCredentials===void 0?!0:e.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.timeout=e.timeout===void 0?100*1e3:e.timeout;let t=null,o=null;if(G.isNode&&typeof ei<"u"){let r=typeof __webpack_require__=="function"?__non_webpack_require__:ei;t=r("ws"),o=r("eventsource")}!G.isNode&&typeof WebSocket<"u"&&!e.WebSocket?e.WebSocket=WebSocket:G.isNode&&!e.WebSocket&&t&&(e.WebSocket=t),!G.isNode&&typeof EventSource<"u"&&!e.EventSource?e.EventSource=EventSource:G.isNode&&!e.EventSource&&typeof o<"u"&&(e.EventSource=o),this._httpClient=new sn(e.httpClient||new en(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}async start(i){if(i=i||se.Binary,H.isIn(i,se,"transferFormat"),this._logger.log(p.Debug,`Starting connection with transfer format '${se[i]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(i),await this._startInternalPromise,this._connectionState==="Disconnecting"){let e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(p.Error,e),await this._stopPromise,Promise.reject(new ge(e))}else if(this._connectionState!=="Connected"){let e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(p.Error,e),Promise.reject(new ge(e))}this._connectionStarted=!0}send(i){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new nr(this.transport)),this._sendQueue.send(i))}async stop(i){if(this._connectionState==="Disconnected")return this._logger.log(p.Debug,`Call to HttpConnection.stop(${i}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(p.Debug,`Call to HttpConnection.stop(${i}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(e=>{this._stopPromiseResolver=e}),await this._stopInternal(i),await this._stopPromise}async _stopInternal(i){this._stopError=i;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(e){this._logger.log(p.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(p.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(i){let e=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ne.WebSockets)this.transport=this._constructTransport(ne.WebSockets),await this._startTransport(e,i);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let t=null,o=0;do{if(t=await this._getNegotiationResponse(e),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new ge("The connection was stopped during negotiation.");if(t.error)throw new Error(t.error);if(t.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(t.url&&(e=t.url),t.accessToken){let r=t.accessToken;this._accessTokenFactory=()=>r,this._httpClient._accessToken=r,this._httpClient._accessTokenFactory=void 0}o++}while(t.url&&o<Ia);if(o===Ia&&t.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(e,this._options.transport,t,i)}this.transport instanceof ao&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(p.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(p.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}}async _getNegotiationResponse(i){let e={},[t,o]=_t();e[t]=o;let r=this._resolveNegotiateUrl(i);this._logger.log(p.Debug,`Sending negotiation request: ${r}.`);try{let s=await this._httpClient.post(r,{content:"",headers:M(M({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(s.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${s.statusCode}'`));let a=JSON.parse(s.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new ro("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(s){let a="Failed to complete negotiation with the server: "+s;return s instanceof Ae&&s.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(p.Error,a),Promise.reject(new ro(a))}}_createConnectUrl(i,e){return e?i+(i.indexOf("?")===-1?"?":"&")+`id=${e}`:i}async _createTransport(i,e,t,o){let r=this._createConnectUrl(i,t.connectionToken);if(this._isITransport(e)){this._logger.log(p.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,await this._startTransport(r,o),this.connectionId=t.connectionId;return}let s=[],a=t.availableTransports||[],d=t;for(let u of a){let g=this._resolveTransportOrError(u,e,o,d?.useStatefulReconnect===!0);if(g instanceof Error)s.push(`${u.transport} failed:`),s.push(g);else if(this._isITransport(g)){if(this.transport=g,!d){try{d=await this._getNegotiationResponse(i)}catch(z){return Promise.reject(z)}r=this._createConnectUrl(i,d.connectionToken)}try{await this._startTransport(r,o),this.connectionId=d.connectionId;return}catch(z){if(this._logger.log(p.Error,`Failed to start the transport '${u.transport}': ${z}`),d=void 0,s.push(new Go(`${u.transport} failed: ${z}`,ne[u.transport])),this._connectionState!=="Connecting"){let ke="Failed to select transport before stop() was called.";return this._logger.log(p.Debug,ke),Promise.reject(new ge(ke))}}}}return s.length>0?Promise.reject(new Qo(`Unable to connect to the server with any of the available transports. ${s.join(" ")}`,s)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(i){switch(i){case ne.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new cn(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ne.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ln(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ne.LongPolling:return new ao(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${i}.`)}}_startTransport(i,e){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async t=>{let o=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(i,e),await this.features.resend()}catch{o=!0}else{this._stopConnection(t);return}o&&this._stopConnection(t)}:this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(i,e)}_resolveTransportOrError(i,e,t,o){let r=ne[i.transport];if(r==null)return this._logger.log(p.Debug,`Skipping transport '${i.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${i.transport}' because it is not supported by this client.`);if(yd(e,r))if(i.transferFormats.map(a=>se[a]).indexOf(t)>=0){if(r===ne.WebSockets&&!this._options.WebSocket||r===ne.ServerSentEvents&&!this._options.EventSource)return this._logger.log(p.Debug,`Skipping transport '${ne[r]}' because it is not supported in your environment.'`),new Wo(`'${ne[r]}' is not supported in your environment.`,r);this._logger.log(p.Debug,`Selecting transport '${ne[r]}'.`);try{return this.features.reconnect=r===ne.WebSockets?o:void 0,this._constructTransport(r)}catch(a){return a}}else return this._logger.log(p.Debug,`Skipping transport '${ne[r]}' because it does not support the requested transfer format '${se[t]}'.`),new Error(`'${ne[r]}' does not support ${se[t]}.`);else return this._logger.log(p.Debug,`Skipping transport '${ne[r]}' because it was disabled by the client.`),new qo(`'${ne[r]}' is disabled by the client.`,r)}_isITransport(i){return i&&typeof i=="object"&&"connect"in i}_stopConnection(i){if(this._logger.log(p.Debug,`HttpConnection.stopConnection(${i}) called while in state ${this._connectionState}.`),this.transport=void 0,i=this._stopError||i,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(p.Debug,`Call to HttpConnection.stopConnection(${i}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(p.Warning,`Call to HttpConnection.stopConnection(${i}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${i}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),i?this._logger.log(p.Error,`Connection disconnected with error '${i}'.`):this._logger.log(p.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(p.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(i)}catch(e){this._logger.log(p.Error,`HttpConnection.onclose(${i}) threw error '${e}'.`)}}}_resolveUrl(i){if(i.lastIndexOf("https://",0)===0||i.lastIndexOf("http://",0)===0)return i;if(!G.isBrowser)throw new Error(`Cannot resolve '${i}'.`);let e=window.document.createElement("a");return e.href=i,this._logger.log(p.Information,`Normalizing '${i}' to '${e.href}'.`),e.href}_resolveNegotiateUrl(i){let e=new URL(i);e.pathname.endsWith("/")?e.pathname+="negotiate":e.pathname+="/negotiate";let t=new URLSearchParams(e.searchParams);return t.has("negotiateVersion")||t.append("negotiateVersion",this._negotiateVersion.toString()),t.has("useStatefulReconnect")?t.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&t.append("useStatefulReconnect","true"),e.search=t.toString(),e.toString()}};function yd(n,i){return!n||(i&n)!==0}var nr=class n{constructor(i){this._transport=i,this._buffer=[],this._executing=!0,this._sendBufferedData=new ji,this._transportResult=new ji,this._sendLoopPromise=this._sendLoop()}send(i){return this._bufferData(i),this._transportResult||(this._transportResult=new ji),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(i){if(this._buffer.length&&typeof this._buffer[0]!=typeof i)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof i}`);this._buffer.push(i),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ji;let i=this._transportResult;this._transportResult=void 0;let e=typeof this._buffer[0]=="string"?this._buffer.join(""):n._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(e),i.resolve()}catch(t){i.reject(t)}}}static _concatBuffers(i){let e=i.map(r=>r.byteLength).reduce((r,s)=>r+s),t=new Uint8Array(e),o=0;for(let r of i)t.set(new Uint8Array(r),o),o+=r.byteLength;return t.buffer}},ji=class{constructor(){this.promise=new Promise((i,e)=>[this._resolver,this._rejecter]=[i,e])}resolve(){this._resolver()}reject(i){this._rejecter(i)}};var xd="json",mn=class{constructor(){this.name=xd,this.version=2,this.transferFormat=se.Text}parseMessages(i,e){if(typeof i!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];e===null&&(e=gt.instance);let t=Fe.parse(i),o=[];for(let r of t){let s=JSON.parse(r);if(typeof s.type!="number")throw new Error("Invalid payload.");switch(s.type){case D.Invocation:this._isInvocationMessage(s);break;case D.StreamItem:this._isStreamItemMessage(s);break;case D.Completion:this._isCompletionMessage(s);break;case D.Ping:break;case D.Close:break;case D.Ack:this._isAckMessage(s);break;case D.Sequence:this._isSequenceMessage(s);break;default:e.log(p.Information,"Unknown message type '"+s.type+"' ignored.");continue}o.push(s)}return o}writeMessage(i){return Fe.write(JSON.stringify(i))}_isInvocationMessage(i){this._assertNotEmptyString(i.target,"Invalid payload for Invocation message."),i.invocationId!==void 0&&this._assertNotEmptyString(i.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(i){if(this._assertNotEmptyString(i.invocationId,"Invalid payload for StreamItem message."),i.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(i){if(i.result&&i.error)throw new Error("Invalid payload for Completion message.");!i.result&&i.error&&this._assertNotEmptyString(i.error,"Invalid payload for Completion message."),this._assertNotEmptyString(i.invocationId,"Invalid payload for Completion message.")}_isAckMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(i){if(typeof i.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(i,e){if(typeof i!="string"||i==="")throw new Error(e)}};var Cd={trace:p.Trace,debug:p.Debug,info:p.Information,information:p.Information,warn:p.Warning,warning:p.Warning,error:p.Error,critical:p.Critical,none:p.None};function Sd(n){let i=Cd[n.toLowerCase()];if(typeof i<"u")return i;throw new Error(`Unknown log level: ${n}`)}var lo=class{configureLogging(i){if(H.isRequired(i,"logging"),wd(i))this.logger=i;else if(typeof i=="string"){let e=Sd(i);this.logger=new Xt(e)}else this.logger=new Xt(i);return this}withUrl(i,e){return H.isRequired(i,"url"),H.isNotEmpty(i,"url"),this.url=i,typeof e=="object"?this.httpConnectionOptions=M(M({},this.httpConnectionOptions),e):this.httpConnectionOptions=ve(M({},this.httpConnectionOptions),{transport:e}),this}withHubProtocol(i){return H.isRequired(i,"protocol"),this.protocol=i,this}withAutomaticReconnect(i){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return i?Array.isArray(i)?this.reconnectPolicy=new so(i):this.reconnectPolicy=i:this.reconnectPolicy=new so,this}withServerTimeout(i){return H.isRequired(i,"milliseconds"),this._serverTimeoutInMilliseconds=i,this}withKeepAliveInterval(i){return H.isRequired(i,"milliseconds"),this._keepAliveIntervalInMilliseconds=i,this}withStatefulReconnect(i){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=i?.bufferSize,this}build(){let i=this.httpConnectionOptions||{};if(i.logger===void 0&&(i.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let e=new dn(this.url,i);return rn.create(e,this.logger||gt.instance,this.protocol||new mn,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function wd(n){return n.log!==void 0}var Ra="https://localhost:7113",Pd="https://localhost:7113/api";function Aa(){return`${Pd}/Mosaic/PolygonTriangulationMesh`}var hn=class n{getVertices(){return[this.a,this.b,this.c]}static restore(i){Object.setPrototypeOf(i,n.prototype),i.getVertices().forEach(e=>B.restore(e))}};var pn=class{static restore(i){i.parts.forEach(e=>co.restore(e))}},co=class{static restore(i){i.triangles.forEach(e=>hn.restore(e)),i.contour.forEach(e=>B.restore(e))}};var Fa=(()=>{let i=class i{constructor(){this.sectionsMeshReceivedSub=new S,this.sectionsMeshReceived$=this.sectionsMeshReceivedSub.asObservable(),this.sectionGeneratedSub=new S,this.sectionGenerated$=this.sectionGeneratedSub.asObservable(),this.generationFinishedSub=new S,this.generationFinished$=this.generationFinishedSub.asObservable(),this.generationAbortedWithErrorSub=new S,this.generationAbortedWithError$=this.generationAbortedWithErrorSub.asObservable(),this.isClosed=!1,this.hubConnection=new lo().withUrl(`${Ra}/process-hub`,{skipNegotiation:!0,transport:ne.WebSockets}).build(),this.subscribeOnSectionGenerated(),this.subscribeOnFinishGeneration(),this.subscribeOnSectionsMeshReceived(),this.subscribeOnAbortGenerationInErrorCase()}subscribeOnSectionGenerated(){this.hubConnection.on("ReceiveMosaicSectionTiles",t=>this.sectionGeneratedSub.next(t))}subscribeOnFinishGeneration(){this.hubConnection.on("ReceiveFinishNotification",()=>this.generationFinishedSub.next())}subscribeOnAbortGenerationInErrorCase(){this.hubConnection.on("AbortGenerationInErrorCase",()=>this.generationAbortedWithErrorSub.next())}subscribeOnSectionsMeshReceived(){this.hubConnection.on("ReceiveMosaicSectorsMesh",t=>{t.forEach(o=>pn.restore(o)),this.sectionsMeshReceivedSub.next(t)})}startLongRunningTask(t){return this.hubConnection.invoke("StartMosaicGeneration",t).catch(o=>{if(!this.isClosed)throw o})}initMosaicTriangulation(t){return this.hubConnection.invoke("InitMosaicTriangulation",t).catch(o=>{if(!this.isClosed)throw o})}startConnection(){return this.hubConnection.start()}stopConnection(){return this.isClosed=!0,this.hubConnection.stop()}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var un=class{constructor(i){this.visualObjects=[],this.sections=[],this.tilesSub=new Ne([]),this.tiles$=this.tilesSub.asObservable(),this.areTilesVisible=!0,this.schema=i}addSection(i){this.sections.push(i),i.tiles.forEach(e=>e.tileObject.setVisibility(this.areTilesVisible)),this.tilesSub.next(this.sections.flatMap(e=>e.tiles))}setSectorMeshVisibility(i){for(let e of this.visualObjects)e.setVisibility(i)}setSectorVisualObjects(i){this.visualObjects.forEach(e=>e.removeObject()),this.visualObjects=i}setTilesVisibility(i){this.areTilesVisible=i;let e=this.tilesSub.value;e.length&&(e.forEach(t=>t.tileObject.setVisibility(this.areTilesVisible)),e[0].tileObject.parentCanvas.redraw())}};var mo=(()=>{let i=class i{constructor(){this.sectorsInfo=new Map,this.sectorsSub=new S,this.sectors$=this.sectorsSub.asObservable()}buildInitMosaicRequest(t,o,r){return{base64Image:t,mosaicWidth:o.width,sectorsGenerationParams:r.map(s=>({id:s.id,tileMargin:s.properties.tilesMargin,tileMinRadius:s.properties.minTileRadius,tileMaxRadius:s.properties.maxTileRadius,triangulationData:{polygonVertices:s.vertices,sectionMaxArea:s.properties.sectionMaxArea,sectionMinAngle:s.properties.sectionMinAngle},evaluationParams:s.properties.evaluationParams,populationParams:s.properties.populationParams}))}}initGeneratedSectorsData(t){for(let o of t)this.sectorsInfo.set(o.id,new un(o));this.sectorsSub.next(Array.from(this.sectorsInfo.values()))}fillSectorsGenerationInfo(t){for(let o of t){let r=this.sectorsInfo.get(o.sectorId);r.countOfSections=o.parts.flatMap(s=>s.triangles).length}this.sectorsSub.next(Array.from(this.sectorsInfo.values()))}addSectionTilesObjects(t,o){this.sectorsInfo.get(t).addSection({tiles:o})}getSectorById(t){return this.sectorsInfo.get(t)}getSectors(){return Array.from(this.sectorsInfo.values())}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac});let n=i;return n})();function Dd(n,i){if(n&1&&(h(0,"div",7)(1,"span",9),f(2),m()()),n&2){let e=i.$implicit;c(2),E(" ",e.tileTransform.tileId," ")}}function Ed(n,i){n&1&&(h(0,"span",8),f(1),_(2,"translate"),m()),n&2&&(c(),y(b(2,1,"tool.generation.sectorList.noTiles")))}var La=(()=>{let i=class i{constructor(){this.sector=pe.required(),this.isOpen=R(!1),this.items$=_e(()=>this.sector().tiles$),this.areTilesVisible=R(!0),this.translate=l(ie)}toggleTilesList(){this.isOpen.update(t=>!t)}toggleTilesVisibility(){this.areTilesVisible.update(t=>!t),this.sector().setTilesVisibility(this.areTilesVisible())}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-sector-list-elem"]],inputs:{sector:[1,"sector"]},decls:15,vars:8,consts:[[1,"parent-elem"],[1,"sector-actions"],["mat-icon-button","",1,"sector-action",3,"click"],[1,"visibility-icon","material-symbols-outlined"],["mat-icon-button","",1,"sector-action","toggle-action",3,"click"],[1,"chevron"],[1,"panel",3,"isOpen"],[1,"tile"],[1,"empty"],[1,"label"]],template:function(o,r){o&1&&(h(0,"div",0)(1,"span"),f(2),m(),h(3,"div",1)(4,"button",2),x("click",function(){return r.toggleTilesVisibility()}),h(5,"mat-icon",3),f(6),m()(),h(7,"button",4),x("click",function(){return r.toggleTilesList()}),h(8,"mat-icon",5),f(9," keyboard_arrow_up "),m()()()(),h(10,"app-expandable-panel",6),Ee(11,Dd,3,1,"div",7,At,!1,Ed,3,3,"span",8),_(14,"async"),m()),o&2&&(c(2),y(r.sector().schema.name),c(4),E(" ",r.areTilesVisible()?"visibility":"visibility_off"," "),c(2),F("chevron--closed",!r.isOpen()),c(2),v("isOpen",r.isOpen()),c(),Oe(b(14,6,r.items$())))},dependencies:[qe,We,V,Qe,Ii,Y,yo,oe],styles:["[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a}[_nghost-%COMP%]   .parent-elem.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .visibility-icon[_ngcontent-%COMP%]{font-weight:300;color:var(--irr-contrast-medium)}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .sector-action[_ngcontent-%COMP%]{margin:-6px}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .sector-action[_ngcontent-%COMP%]    {--mat-icon-button-state-layer-size: 32px;padding:4px}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .sector-action[_ngcontent-%COMP%]     .mat-icon{width:24px;height:24px;font-size:24px}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .sector-action[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size)}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .toggle-action[_ngcontent-%COMP%]{color:var(--irr-contrast-medium)}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .toggle-action[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{transition:all .25s ease}[_nghost-%COMP%]   .parent-elem[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]   .toggle-action[_ngcontent-%COMP%]   .chevron--closed[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column;gap:6px}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]   .tile.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-wrap:nowrap;font-size:12px}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{align-self:center;color:var(--irr-contrast-light)}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-top:6px}"],changeDetection:0});let n=i;return n})();function Od(n,i){if(n&1&&w(0,"app-sector-list-elem",1),n&2){let e=i.$implicit;v("sector",e)}}var ja=(()=>{let i=class i{constructor(){this.service=l(mo)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-mosaic-hierarchy"]],decls:4,vars:2,consts:[[1,"sectors"],[3,"sector"]],template:function(o,r){o&1&&(h(0,"div",0),Ee(1,Od,1,1,"app-sector-list-elem",1,At),_(3,"async"),m()),o&2&&(c(),Oe(b(3,0,r.service.sectors$)))},dependencies:[La,yo],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .sectors[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}"],changeDetection:0});let n=i;return n})();function Td(n,i){if(n&1&&(yt(0,"span",0),f(1),xt(),yt(2,"span",1),f(3),xt()),n&2){P();let e=Mn(0);c(),y(e.sector),c(2),E("",e.percent,"%")}}function kd(n,i){if(n&1&&(yt(0,"span",0),f(1),xt()),n&2){P();let e=Mn(0);c(),y(e.message)}}var Na=(()=>{let i=class i{constructor(){this.infoState=pe.required()}isProgressInfo(t){return t.type==="progress"}isInitInfo(t){return t.type==="init"}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-progress-info"]],inputs:{infoState:[1,"infoState"]},decls:3,vars:2,consts:[[1,"loading"],[1,"right"]],template:function(o,r){if(o&1&&(Fr(0),L(1,Td,4,2)(2,kd,2,1,"span",0)),o&2){let s=Lr(r.infoState());c(),j(r.isProgressInfo(s)?1:r.isInitInfo(s)?2:-1)}},styles:['.loading[_ngcontent-%COMP%]:after{content:"";animation:_ngcontent-%COMP%_dots 2s linear infinite}@keyframes _ngcontent-%COMP%_dots{0%,20%{content:"."}40%{content:".."}60%{content:"..."}90%,to{content:""}}[_nghost-%COMP%]{display:flex;width:200px;height:auto;font-size:14px;border:1px solid;padding:12px;border-radius:4px;border-color:transparent;background:#ccc;opacity:.75;color:#141414;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:auto}'],changeDetection:0});let n=i;return n})();function Id(n,i){if(n&1&&w(0,"app-progress-info",0),n&2){let e=P();v("infoState",e.progressState())}}var Ba=(()=>{let i=class i{constructor(){this.isImageVisible=R(!1),this.isMeshVisible=R(!0),this.showMesh$=new Ne(!0),this.progressState=R(null),this.ribbonActions=[{iconName:"recenter",visibility:R("on"),onClick:()=>{this.focusOnImage(),this.activeCanvas.redraw()}},{iconName:"graph_3",onClick:()=>this.toggleMeshVisibility(),visibility:_e(()=>this.isMeshVisible()?"on":"off")},{iconName:"image",onClick:()=>this.toggleImageVisibility(),visibility:_e(()=>this.isImageVisible()?"on":"off")}],this.store=l(N),this.translate=l(ie),this.destroyRef=l(Z),this.snackBar=l(ut),this.signalRService=l(Fa),this.service=l(mo)}async ngAfterViewInit(){let t=this.store.selectSignal(lt)();this.imageObject=await Pt.createImageObject(t),this.imageObject.setVisibility(this.isImageVisible()),this.activeCanvas.addCanvasObject(this.imageObject),this.activeCanvas.redraw(),this.subscribeOnGenerationProgress(),this.subscribeOnSectorsMeshReceived(),this.subscribeOnMeshGenerationFinished(),this.subscribeOnMeshVisibilityChange(),this.initSectors(),this.initGeneration(t.base64Image,this.imageObject.size)}initGeneration(t,o){this.signalRService.startConnection().then(()=>{let r=this.store.selectSignal(Me)(),s=this.service.buildInitMosaicRequest(t,o,r);this.availableTiles=this.getAvailableTiles(),this.progressState.set({type:"init",message:this.translate.instant("tool.generation.message.sectorsMeshGeneration")}),this.signalRService.initMosaicTriangulation(s).catch(()=>this.setError(this.translate.instant("tool.generation.message.errorOnSectorsMeshGeneration")))}).catch(()=>this.setError(this.translate.instant("tool.generation.message.errorOnServerConnection")))}subscribeOnGenerationProgress(){this.signalRService.sectionGenerated$.pipe(q(this.destroyRef)).subscribe(t=>{let o=[];for(let s of t.tilesTransforms){let a=this.availableTiles.find(g=>g.id===s.tileId),d=Bo(a.vertices,s.position,s.angle),u=new Ti(d,a.color);this.activeCanvas.addCanvasObject(u),o.push({tileObject:u,tileTransform:s})}let r=this.service.getSectorById(t.sectorId);this.service.addSectionTilesObjects(t.sectorId,o),this.progressState.set({type:"progress",sector:r.schema.name,percent:Math.floor(r.sections.length/r.countOfSections*100)}),this.activeCanvas.redraw()})}subscribeOnSectorsMeshReceived(){this.signalRService.sectionsMeshReceived$.pipe(q(this.destroyRef)).subscribe(t=>{let o=this.store.selectSignal(Me)();this.createSectorsMeshCanvasObjects(t,o),this.service.fillSectorsGenerationInfo(t);let r=this.availableTiles.map(s=>({color:s.color,id:s.id,vertices:s.vertices}));this.signalRService.startLongRunningTask(r).catch(()=>this.showMessage(this.translate.instant("tool.generation.message.errorOnStartingMosaicGeneration")))})}subscribeOnMeshGenerationFinished(){this.signalRService.generationFinished$.pipe(q(this.destroyRef)).subscribe(()=>{this.progressState.set(null),this.showMessage(this.translate.instant("tool.generation.message.generationCompleted"))})}subscribeOnMeshVisibilityChange(){this.showMesh$.pipe(q(this.destroyRef)).subscribe(t=>{for(let o of this.service.getSectors())o.setSectorMeshVisibility(t);this.activeCanvas.redraw()})}ngOnDestroy(){this.signalRService.stopConnection()}createSectorsMeshCanvasObjects(t,o){for(let r=0;r<o.length;++r){let s=o[r],a=this.service.getSectorById(s.id),d=[];for(let u of t[r].parts){let g=this.createSectorMeshObject(s,u,r);this.activeCanvas.addCanvasObject(g),d.push(g)}a.setSectorVisualObjects(d)}this.activeCanvas.redraw()}initSectors(){let t=this.store.selectSignal(Me)();this.service.initGeneratedSectorsData(t),this.initSectorsMeshes(t)}initSectorsMeshes(t){for(let o=0;o<t.length;++o){let r=this.service.getSectorById(t[o].id),s=this.createSectorContourObject(t[o],o);this.activeCanvas.addCanvasObject(s),r.visualObjects.push(s)}this.activeCanvas.redraw()}createSectorMeshObject(t,o,r){return new Ai(o.triangles,o.contour,t.color,10+r)}createSectorContourObject(t,o){return new Fi([...t.vertices],t.color,10+o)}getAvailableTiles(){return this.store.selectSignal(ct)().flatMap(o=>o.tiles)}toggleMeshVisibility(){let t=!this.isMeshVisible();this.showMesh$.next(t),this.isMeshVisible.set(t)}toggleImageVisibility(){let t=!this.isImageVisible();this.imageObject.setVisibility(t),this.activeCanvas.redraw(),this.isImageVisible.set(t)}setError(t){this.progressState.set(null),this.showMessage(t)}showMessage(t){this.snackBar.open(t,this.translate.instant("common.ok"),{duration:3e3})}sectionEntered(t){return this.activeCanvas=t,{ribbon:this.ribbonActions}}focusOnImage(){let t=Pt.calculateZoomForImage(this.imageObject.size,this.activeCanvas.viewport);this.activeCanvas.setViewport(t,B.zero)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-mosaic-generation"]],features:[he([mo])],decls:2,vars:1,consts:[[1,"info",3,"infoState"]],template:function(o,r){o&1&&(w(0,"app-mosaic-hierarchy"),L(1,Id,1,1,"app-progress-info",0)),o&2&&(c(),j(r.progressState()?1:-1))},dependencies:[ja,Na],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box;height:100%;padding:20px 10px;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{position:absolute;left:-250px;bottom:30px}"],changeDetection:0});let n=i;return n})();var Va=()=>l(N).selectSignal(Me)().length?!0:(l(te).navigate([Vo]),!1);function ar(n){let i=n.cloneNode(!0),e=i.querySelectorAll("[id]"),t=n.nodeName.toLowerCase();i.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return t==="canvas"?$a(n,i):(t==="input"||t==="select"||t==="textarea")&&Ha(n,i),za("canvas",n,i,$a),za("input, textarea, select",n,i,Ha),i}function za(n,i,e,t){let o=i.querySelectorAll(n);if(o.length){let r=e.querySelectorAll(n);for(let s=0;s<o.length;s++)t(o[s],r[s])}}var Rd=0;function Ha(n,i){i.type!=="file"&&(i.value=n.value),i.type==="radio"&&i.name&&(i.name=`mat-clone-${i.name}-${Rd++}`)}function $a(n,i){let e=i.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function pr(n){let i=n.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function lr(n,i,e){let{top:t,bottom:o,left:r,right:s}=n;return e>=t&&e<=o&&i>=r&&i<=s}function Ad(n,i){let e=i.left<n.left,t=i.left+i.width>n.right,o=i.top<n.top,r=i.top+i.height>n.bottom;return e||t||o||r}function uo(n,i,e){n.top+=i,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function Ua(n,i,e,t){let{top:o,right:r,bottom:s,left:a,width:d,height:u}=n,g=d*i,z=u*i;return t>o-z&&t<s+z&&e>a-g&&e<r+g}var fn=class{_document;positions=new Map;constructor(i){this._document=i}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:pr(e)})})}handleScroll(i){let e=Zt(i),t=this.positions.get(e);if(!t)return null;let o=t.scrollPosition,r,s;if(e===this._document){let u=this.getViewportScrollPosition();r=u.top,s=u.left}else r=e.scrollTop,s=e.scrollLeft;let a=o.top-r,d=o.left-s;return this.positions.forEach((u,g)=>{u.clientRect&&e!==g&&e.contains(g)&&uo(u.clientRect,a,d)}),o.top=r,o.left=s,{top:a,left:d}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function ol(n,i){let e=n.rootNodes;if(e.length===1&&e[0].nodeType===i.ELEMENT_NODE)return e[0];let t=i.createElement("div");return e.forEach(o=>t.appendChild(o)),t}function ur(n,i,e){for(let t in i)if(i.hasOwnProperty(t)){let o=i[t];o?n.setProperty(t,o,e?.has(t)?"important":""):n.removeProperty(t)}return n}function Ni(n,i){let e=i?"":"none";ur(n.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Wa(n,i,e){ur(n.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function gn(n,i){return i&&i!="none"?n+" "+i:n}function qa(n,i){n.style.width=`${i.width}px`,n.style.height=`${i.height}px`,n.style.transform=fo(i.left,i.top)}function fo(n,i){return`translate3d(${Math.round(n)}px, ${Math.round(i)}px, 0)`}function Ga(n){let i=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*i}function Fd(n){let i=getComputedStyle(n),e=rr(i,"transition-property"),t=e.find(a=>a==="transform"||a==="all");if(!t)return 0;let o=e.indexOf(t),r=rr(i,"transition-duration"),s=rr(i,"transition-delay");return Ga(r[o])+Ga(s[o])}function rr(n,i){return n.getPropertyValue(i).split(",").map(t=>t.trim())}var Ld=new Set(["position"]),cr=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(i,e,t,o,r,s,a,d,u,g){this._document=i,this._rootElement=e,this._direction=t,this._initialDomRect=o,this._previewTemplate=r,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=d,this._zIndex=u,this._renderer=g}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),Qa(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return Fd(this._preview)}addEventListener(i,e){return this._renderer.listen(this._preview,i,e)}_createPreview(){let i=this._previewTemplate,e=this._previewClass,t=i?i.template:null,o;if(t&&i){let r=i.matchSize?this._initialDomRect:null,s=i.viewContainer.createEmbeddedView(t,i.context);s.detectChanges(),o=ol(s,this._document),this._previewEmbeddedView=s,i.matchSize?qa(o,r):o.style.transform=fo(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=ar(this._rootElement),qa(o,this._initialDomRect),this._initialTransform&&(o.style.transform=this._initialTransform);return ur(o.style,{"pointer-events":"none",margin:Qa(o)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Ld),Ni(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("popover","manual"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>o.classList.add(r)):o.classList.add(e)),o}};function Qa(n){return"showPopover"in n}var jd={passive:!0},Za={passive:!1},Nd={passive:!1,capture:!0},Bd=800,Ka="cdk-drag-placeholder",Ya=new Set(["position"]),dr=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=R(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new S;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=je.EMPTY;_pointerUpSubscription=je.EMPTY;_scrollSubscription=je.EMPTY;_resizeSubscription=je.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Ni(e,i)))}_disabled=!1;beforeStarted=new S;started=new S;released=new S;ended=new S;entered=new S;exited=new S;dropped=new S;moved=this._moveEvents;data;constrainPosition;constructor(i,e,t,o,r,s,a){this._config=e,this._document=t,this._ngZone=o,this._viewportRuler=r,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new fn(t),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(t=>Ue(t)),this._handles.forEach(t=>Ni(t,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){let e=Ue(i);if(e!==this._rootElement){this._removeRootElementListeners();let t=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[t.listen(e,"mousedown",this._pointerDown,Za),t.listen(e,"touchstart",this._pointerDown,jd),t.listen(e,"dragstart",this._nativeDragStart,Za)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?Ue(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&Ad(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let i=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),t=0,o=0;e.left<i.left?t=i.left-e.left:e.right>i.right&&(t=i.right-e.right),e.top<i.top?o=i.top-e.top:e.bottom>i.bottom&&(o=i.bottom-e.bottom);let r=this._activeTransform.x,s=this._activeTransform.y,a=r+t,d=s+o;this._rootElement.style.transform=fo(a,d),this._activeTransform={x:a,y:d},this._passiveTransform={x:a,y:d}}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),Ni(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),Ni(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){let i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){let i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=i=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,i)}else this.disabled||this._initializeDragSequence(this._rootElement,i)};_pointerMove=i=>{let e=this._getPointerPositionOnPage(i);if(!this._hasStartedDragging()){let o=Math.abs(e.x-this._pickupPositionOnPage.x),r=Math.abs(e.y-this._pickupPositionOnPage.y);if(o+r>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(i),d=this._dropContainer;if(!a){this._endDragSequence(i);return}(!d||!d.isDragging()&&!d.isReceiving())&&(i.cancelable&&i.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(i)))}return}i.cancelable&&i.preventDefault();let t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t,e);else{let o=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=t.x-o.x+this._passiveTransform.x,r.y=t.y-o.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:i,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})};_pointerUp=i=>{this._endDragSequence(i)};_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){ho(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),t=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",Vd,Nd)}),t){let o=this._rootElement,r=o.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");r.insertBefore(a,o),this._initialTransform=o.style.transform||"",this._preview=new cr(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,e)),Wa(o,!1,Ya),this._document.body.appendChild(r.replaceChild(s,o)),this.started.next({source:this,event:i}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();let t=this.isDragging(),o=ho(e),r=!o&&e.button!==0,s=this._rootElement,a=Zt(e),d=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+Bd>Date.now(),u=o?Wr(e):Ur(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),t||r||d||u)return;if(this._handles.length){let ke=s.style;this._rootElementTapHighlight=ke.webkitTapHighlightColor||"",ke.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(ke=>this._updateOnScroll(ke)),this._boundaryElement&&(this._boundaryRect=pr(this._boundaryElement));let g=this._previewTemplate;this._pickupPositionInElement=g&&g.template&&!g.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,e);let z=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:z.x,y:z.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){Wa(this._rootElement,!0,Ya),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,t=e.getItemIndex(this),o=this._getPointerPositionOnPage(i),r=this._getDragDistance(o),s=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:r,dropPoint:o,event:i}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:r,dropPoint:o,event:i}),e.drop(this,t,this._initialIndex,this._initialContainer,s,r,o,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:t,y:o}){let r=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(r,this._dropContainer,a),this._dropContainer=r,this._dropContainer.enter(this,i,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,o),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,e):this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let o=a=>{(!a||this._preview&&Zt(a)===this._preview.element&&a.propertyName==="transform")&&(s(),t(),clearTimeout(r))},r=setTimeout(o,e*1.5),s=this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){let i=this._placeholderTemplate,e=i?i.template:null,t;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),t=ol(this._placeholderRef,this._document)):t=ar(this._rootElement),t.style.pointerEvents="none",t.classList.add(Ka),t}_getPointerPositionInElement(i,e,t){let o=e===this._rootElement?null:e,r=o?o.getBoundingClientRect():i,s=ho(t)?t.targetTouches[0]:t,a=this._getViewportScrollPosition(),d=s.pageX-r.left-a.left,u=s.pageY-r.top-a.top;return{x:r.left-i.left+d,y:r.top-i.top+u}}_getPointerPositionOnPage(i){let e=this._getViewportScrollPosition(),t=ho(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,o=t.pageX-e.left,r=t.pageY-e.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=o,a.y=r,a.matrixTransform(s.inverse())}}return{x:o,y:r}}_getConstrainedPointerPosition(i){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:o}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if(this.lockAxis==="x"||e==="x"?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:d,height:u}=this._getPreviewRect(),g=a.top+s,z=a.bottom-(u-s),ke=a.left+r,Bi=a.right-(d-r);t=Xa(t,ke,Bi),o=Xa(o,g,z)}return{x:t,y:o}}_updatePointerDirectionDelta(i){let{x:e,y:t}=i,o=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-r.x),a=Math.abs(t-r.y);return s>this._config.pointerDirectionChangeThreshold&&(o.x=e>r.x?1:-1,r.x=e),a>this._config.pointerDirectionChangeThreshold&&(o.y=t>r.y?1:-1,r.y=t),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,Ni(this._rootElement,i))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(i=>i()),this._rootElementCleanups=void 0}_applyRootElementTransform(i,e){let t=1/this.scale,o=fo(i*t,e*t),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=gn(o,this._initialTransform)}_applyPreviewTransform(i,e){let t=this._previewTemplate?.template?void 0:this._initialTransform,o=fo(i,e);this._preview.setTransform(gn(o,t))}_getDragDistance(i){let e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(i===0&&e===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(o.width===0&&o.height===0||t.width===0&&t.height===0)return;let r=o.left-t.left,s=t.right-o.right,a=o.top-t.top,d=t.bottom-o.bottom;o.width>t.width?(r>0&&(i+=r),s>0&&(i-=s)):i=0,o.height>t.height?(a>0&&(e+=a),d>0&&(e-=d)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){let e=this.dragStartDelay;return typeof e=="number"?e:ho(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){let e=this._parentPositions.handleScroll(i);if(e){let t=Zt(i);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&uo(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=xo(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){let t=this._previewContainer||"global";if(t==="parent")return i;if(t==="global"){let o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return Ue(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=i=>{if(this._handles.length){let e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&i.preventDefault()}else this.disabled||i.preventDefault()};_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}_conditionallyInsertAnchor(i,e,t){if(i===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let o=this._anchor??=ar(this._placeholder);o.classList.remove(Ka),o.classList.add("cdk-drag-anchor"),o.style.transform="",t?t.before(o):Ue(e.element).appendChild(o)}}};function Xa(n,i,e){return Math.max(i,Math.min(e,n))}function ho(n){return n.type[0]==="t"}function Vd(n){n.preventDefault()}function bn(n,i,e){let t=Ja(i,n.length-1),o=Ja(e,n.length-1);if(t===o)return;let r=n[t],s=o<t?-1:1;for(let a=t;a!==o;a+=s)n[a]=n[a+s];n[o]=r}function Ja(n,i){return Math.max(0,Math.min(i,n))}var _n=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(i){this._dragDropRegistry=i}_previousSwap={drag:null,delta:0,overlaps:!1};start(i){this.withItems(i)}sort(i,e,t,o){let r=this._itemPositions,s=this._getItemIndexFromPointerPosition(i,e,t,o);if(s===-1&&r.length>0)return null;let a=this.orientation==="horizontal",d=r.findIndex(Le=>Le.drag===i),u=r[s],g=r[d].clientRect,z=u.clientRect,ke=d>s?1:-1,Bi=this._getItemOffsetPx(g,z,ke),Cn=this._getSiblingOffsetPx(d,r,ke),Sn=r.slice();return bn(r,d,s),r.forEach((Le,_l)=>{if(Sn[_l]===Le)return;let gr=Le.drag===i,wn=gr?Bi:Cn,_r=gr?i.getPlaceholderElement():Le.drag.getRootElement();Le.offset+=wn;let br=Math.round(Le.offset*(1/Le.drag.scale));a?(_r.style.transform=gn(`translate3d(${br}px, 0, 0)`,Le.initialTransform),uo(Le.clientRect,0,wn)):(_r.style.transform=gn(`translate3d(0, ${br}px, 0)`,Le.initialTransform),uo(Le.clientRect,wn,0))}),this._previousSwap.overlaps=lr(z,e,t),this._previousSwap.drag=u.drag,this._previousSwap.delta=a?o.x:o.y,{previousIndex:d,currentIndex:s}}enter(i,e,t,o){let r=o==null||o<0?this._getItemIndexFromPointerPosition(i,e,t):o,s=this._activeDraggables,a=s.indexOf(i),d=i.getPlaceholderElement(),u=s[r];if(u===i&&(u=s[r+1]),!u&&(r==null||r===-1||r<s.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(u=s[0]),a>-1&&s.splice(a,1),u&&!this._dragDropRegistry.isDragging(u)){let g=u.getRootElement();g.parentElement.insertBefore(d,g),s.splice(r,0,i)}else this._element.appendChild(d),s.push(i);d.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{let e=i.getRootElement();if(e){let t=this._itemPositions.find(o=>o.drag===i)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return this._getVisualItemPositions().findIndex(e=>e.drag===i)}getItemAtIndex(i){return this._getVisualItemPositions()[i]?.drag||null}updateOnScroll(i,e){this._itemPositions.forEach(({clientRect:t})=>{uo(t,i,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){let i=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:pr(t)}}).sort((e,t)=>i?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(i,e,t){let o=this.orientation==="horizontal",r=o?e.left-i.left:e.top-i.top;return t===-1&&(r+=o?e.width-i.width:e.height-i.height),r}_getSiblingOffsetPx(i,e,t){let o=this.orientation==="horizontal",r=e[i].clientRect,s=e[i+t*-1],a=r[o?"width":"height"]*t;if(s){let d=o?"left":"top",u=o?"right":"bottom";t===-1?a-=s.clientRect[d]-r[u]:a+=r[d]-s.clientRect[u]}return a}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,o=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let s=t[t.length-1].clientRect;return o?i>=s.right:e>=s.bottom}else{let s=t[0].clientRect;return o?i<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(i,e,t,o){let r=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:d})=>{if(a===i)return!1;if(o){let u=r?o.x:o.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&u===this._previousSwap.delta)return!1}return r?e>=Math.floor(d.left)&&e<Math.floor(d.right):t>=Math.floor(d.top)&&t<Math.floor(d.bottom)});return s===-1||!this._sortPredicate(s,i)?-1:s}},mr=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(i,e){this._document=i,this._dragDropRegistry=e}start(i){let e=this._element.childNodes;this._relatedNodes=[];for(let t=0;t<e.length;t++){let o=e[t];this._relatedNodes.push([o,o.nextSibling])}this.withItems(i)}sort(i,e,t,o){let r=this._getItemIndexFromPointerPosition(i,e,t),s=this._previousSwap;if(r===-1||this._activeItems[r]===i)return null;let a=this._activeItems[r];if(s.drag===a&&s.overlaps&&s.deltaX===o.x&&s.deltaY===o.y)return null;let d=this.getItemIndex(i),u=i.getPlaceholderElement(),g=a.getRootElement();r>d?g.after(u):g.before(u),bn(this._activeItems,d,r);let z=this._getRootNode().elementFromPoint(e,t);return s.deltaX=o.x,s.deltaY=o.y,s.drag=a,s.overlaps=g===z||g.contains(z),{previousIndex:d,currentIndex:r}}enter(i,e,t,o){let r=this._activeItems.indexOf(i);r>-1&&this._activeItems.splice(r,1);let s=o==null||o<0?this._getItemIndexFromPointerPosition(i,e,t):o;s===-1&&(s=this._getClosestItemIndexToPointer(i,e,t));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,i),a.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){let i=this._element,e=this._previousSwap;for(let t=this._relatedNodes.length-1;t>-1;t--){let[o,r]=this._relatedNodes[t];o.parentNode===i&&o.nextSibling!==r&&(r===null?i.appendChild(o):r.parentNode===i&&i.insertBefore(o,r))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}getItemAtIndex(i){return this._activeItems[i]||null}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,e,t){let o=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(t)),r=o?this._activeItems.findIndex(s=>{let a=s.getRootElement();return o===a||a.contains(o)}):-1;return r===-1||!this._sortPredicate(r,i)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=xo(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,e,t){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let o=1/0,r=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==i){let{x:d,y:u}=a.getRootElement().getBoundingClientRect(),g=Math.hypot(e-d,t-u);g<o&&(o=g,r=s)}}return r}},el=.05,nl=.05,Ye=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(Ye||{}),De=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(De||{}),hr=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new S;entered=new S;exited=new S;dropped=new S;sorted=new S;receivingStarted=new S;receivingStopped=new S;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=je.EMPTY;_verticalScrollDirection=Ye.NONE;_horizontalScrollDirection=De.NONE;_scrollNode;_stopScrollTimers=new S;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(i,e,t,o,r){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=r;let s=this.element=Ue(i);this._document=t,this.withOrientation("vertical").withElementContainer(s),e.registerDropContainer(this),this._parentPositions=new fn(t)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,t,o){this._draggingStarted(),o==null&&this.sortingDisabled&&(o=this._draggables.indexOf(i)),this._sortStrategy.enter(i,e,t,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,t,o,r,s,a,d={}){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:t,container:this,previousContainer:o,isPointerOverContainer:r,distance:s,dropPoint:a,event:d})}withItems(i){let e=this._draggables;return this._draggables=i,i.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>i.indexOf(o)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof _n&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if(i==="mixed")this._sortStrategy=new mr(this._document,this._dragDropRegistry);else{let e=new _n(this._dragDropRegistry);e.direction=this._direction,e.orientation=i,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,t)=>this.sortPredicate(e,t,this)),this}withScrollableParents(i){let e=this._container;return this._scrollableElements=i.indexOf(e)===-1?[e,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;let e=Ue(this.element),t=this._scrollableElements.indexOf(this._container),o=this._scrollableElements.indexOf(i);return t>-1&&this._scrollableElements.splice(t,1),o>-1&&this._scrollableElements.splice(o,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}getItemAtIndex(i){return this._isDragging?this._sortStrategy.getItemAtIndex(i):this._draggables[i]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,t,o){if(this.sortingDisabled||!this._domRect||!Ua(this._domRect,el,e,t))return;let r=this._sortStrategy.sort(i,e,t,o);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let t,o=Ye.NONE,r=De.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||t||Ua(s.clientRect,el,i,e)&&([o,r]=zd(a,s.clientRect,this._direction,i,e),(o||r)&&(t=a))}),!o&&!r){let{width:s,height:a}=this._viewportRuler.getViewportSize(),d={width:s,height:a,top:0,right:s,bottom:a,left:0};o=rl(d,e),r=sl(d,i),t=window}t&&(o!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=t,(o||r)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),xr(0,vr).pipe(Je(this._stopScrollTimers)).subscribe(()=>{let i=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Ye.UP?i.scrollBy(0,-e):this._verticalScrollDirection===Ye.DOWN&&i.scrollBy(0,e),this._horizontalScrollDirection===De.LEFT?i.scrollBy(-e,0):this._horizontalScrollDirection===De.RIGHT&&i.scrollBy(e,0)})};_isOverContainer(i,e){return this._domRect!=null&&lr(this._domRect,i,e)}_getSiblingContainerFromPosition(i,e,t){return this._siblings.find(o=>o._canReceive(i,e,t))}_canReceive(i,e,t){if(!this._domRect||!lr(this._domRect,e,t)||!this.enterPredicate(i,this))return!1;let o=this._getShadowRoot().elementFromPoint(e,t);return o?o===this._container||this._container.contains(o):!1}_startReceiving(i,e){let t=this._activeSiblings;!t.has(i)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(t.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:e}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(i);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let i=xo(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let i=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}};function rl(n,i){let{top:e,bottom:t,height:o}=n,r=o*nl;return i>=e-r&&i<=e+r?Ye.UP:i>=t-r&&i<=t+r?Ye.DOWN:Ye.NONE}function sl(n,i){let{left:e,right:t,width:o}=n,r=o*nl;return i>=e-r&&i<=e+r?De.LEFT:i>=t-r&&i<=t+r?De.RIGHT:De.NONE}function zd(n,i,e,t,o){let r=rl(i,o),s=sl(i,t),a=Ye.NONE,d=De.NONE;if(r){let u=n.scrollTop;r===Ye.UP?u>0&&(a=Ye.UP):n.scrollHeight-u>n.clientHeight&&(a=Ye.DOWN)}if(s){let u=n.scrollLeft;e==="rtl"?s===De.RIGHT?u<0&&(d=De.RIGHT):n.scrollWidth+u>n.clientWidth&&(d=De.LEFT):s===De.LEFT?u>0&&(d=De.LEFT):n.scrollWidth-u>n.clientWidth&&(d=De.RIGHT)}return[a,d]}var po={capture:!0},sr={passive:!1,capture:!0},Hd=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(t,o){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),al=(()=>{class n{_ngZone=l(re);_document=l(kt);_styleLoader=l(hi);_renderer=l(zi).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new S;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=R([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new S;pointerUp=new S;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,sr)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,t){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Hd),this._activeDragInstances.update(o=>[...o,e]),this._activeDragInstances().length===1)){let o=t.type.startsWith("touch"),r=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),po],["selectstart",this._preventDefaultWhileDragging,sr]];o?s.push(["touchend",r,po],["touchcancel",r,po]):s.push(["mouseup",r,po]),o||s.push(["mousemove",a=>this.pointerMove.next(a),sr]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,d,u])=>this._renderer.listen(this._document,a,d,u))})}}stopDragging(e){this._activeDragInstances.update(t=>{let o=t.indexOf(e);return o>-1?(t.splice(o,1),[...t]):t}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let t=[this._scroll];return e&&e!==this._document&&t.push(new Tt(o=>this._ngZone.runOutsideAngular(()=>{let r=this._renderer.listen(e,"scroll",s=>{this._activeDragInstances().length&&o.next(s)},po);return()=>{r()}}))),Be(...t)}registerDirectiveNode(e,t){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,t)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$d={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ll=(()=>{class n{_document=l(kt);_ngZone=l(re);_viewportRuler=l(Mo);_dragDropRegistry=l(al);_renderer=l(zi).createRenderer(null,null);constructor(){}createDrag(e,t=$d){return new dr(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new hr(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tl=new A("CDK_DRAG_PARENT");var Ud=new A("CdkDragHandle");var cl=new A("CDK_DRAG_CONFIG"),dl=new A("CdkDropList"),vn=(()=>{class n{element=l(X);dropContainer=l(dl,{optional:!0,skipSelf:!0});_ngZone=l(re);_viewContainerRef=l(ri);_dir=l(rt,{optional:!0});_changeDetectorRef=l(Ce);_selfHandle=l(Ud,{optional:!0,self:!0});_parentDrag=l(tl,{optional:!0,skipSelf:!0});_dragDropRegistry=l(al);_destroyed=new S;_handles=new Ne([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new J;released=new J;ended=new J;entered=new J;exited=new J;dropped=new J;moved=new Tt(e=>{let t=this._dragRef.moved.pipe(ti(o=>({source:this,pointerPosition:o.pointerPosition,event:o.event,delta:o.delta,distance:o.distance}))).subscribe(e);return()=>{t.unsubscribe()}});_injector=l(ae);constructor(){let e=this.dropContainer,t=l(cl,{optional:!0}),o=l(ll);this._dragRef=o.createDrag(this.element,{dragStartThreshold:t&&t.dragStartThreshold!=null?t.dragStartThreshold:5,pointerDirectionChangeThreshold:t&&t.pointerDirectionChangeThreshold!=null?t.pointerDirectionChangeThreshold:5,zIndex:t?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),t&&this._assignDefaults(t),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(Je(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){vt(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let t=e.rootElementSelector,o=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let t=this._handles.getValue();t.push(e),this._handles.next(t)}_removeHandle(e){let t=this._handles.getValue(),o=t.indexOf(e);o>-1&&(t.splice(o,1),this._handles.next(t))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,t=e;this.rootElementSelector&&(t=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):Ue(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let t=this._dir,o=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof o=="object"&&o?o:Kt(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(ot(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){let o=this._dragDropRegistry.getDragDirectiveForNode(t);if(o){e.withParent(o._dragRef);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){let{lockAxis:t,dragStartDelay:o,constrainPosition:r,previewClass:s,boundaryElement:a,draggingDisabled:d,rootElementSelector:u,previewContainer:g}=e;this.disabled=d??!1,this.dragStartDelay=o||0,t&&(this.lockAxis=t),r&&(this.constrainPosition=r),s&&(this.previewClass=s),a&&(this.boundaryElement=a),u&&(this.rootElementSelector=u),g&&(this.previewContainer=g)}_setupHandlesListener(){this._handles.pipe(ni(e=>{let t=e.map(o=>o.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),oi(e=>Be(...e.map(t=>t._stateChanges.pipe(Xe(t))))),Je(this._destroyed)).subscribe(e=>{let t=this._dragRef,o=e.element.nativeElement;e.disabled?t.disableHandle(o):t.enableHandle(o)})}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,o){t&2&&F("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",fe],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Br]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[he([{provide:tl,useExisting:n}]),It]})}return n})(),il=new A("CdkDropListGroup");var yn=(()=>{class n{element=l(X);_changeDetectorRef=l(Ce);_scrollDispatcher=l(es);_dir=l(rt,{optional:!0});_group=l(il,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new S;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=l(ue).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new J;entered=new J;exited=new J;sorted=new J;_unsortedItems=new Set;constructor(){let e=l(ll),t=l(cl,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(o,r)=>this.enterPredicate(o.data,r.data),this._dropListRef.sortPredicate=(o,r,s)=>this.sortPredicate(o,r.data,s.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let t=this._latestSortedRefs.indexOf(e._dragRef);t>-1&&(this._latestSortedRefs.splice(t,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(Xe(this._dir.value),Je(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{let t=Co(this.connectedTo).map(o=>{if(typeof o=="string"){let r=n._dropLists.find(s=>s.id===o);return r}return o});if(this._group&&this._group._items.forEach(o=>{t.indexOf(o)===-1&&t.push(o)}),!this._scrollableParentsResolved){let o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let o=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(o)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Kt(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(t.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),Be(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:t,draggingDisabled:o,sortingDisabled:r,listAutoScrollDisabled:s,listOrientation:a}=e;this.disabled=o??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=s??!1,this.orientation=a||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Q({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,o){t&2&&(me("id",o.id),F("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",fe],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",fe],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",fe],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",fe]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[he([{provide:il,useValue:void 0},{provide:dl,useExisting:n}])]})}return n})();function Wd(n,i){if(n&1){let e=K();h(0,"div",7),x("mousedown",function(){let o=k(e).$implicit,r=P(2);return I(r.onSectorSelected(o))}),f(1),h(2,"button",8),x("mousedown",function(o){return k(e),I(o.stopPropagation())}),h(3,"mat-icon",9),f(4,"more_vert"),m()(),h(5,"mat-menu",10,0)(7,"button",11),x("click",function(){let o=k(e).$implicit,r=P(2);return I(r.navigateToContourPanel(o))}),h(8,"mat-icon",12),f(9,"draw"),m(),f(10),_(11,"translate"),m(),h(12,"button",11),x("click",function(){let o=k(e).$implicit,r=P(2);return I(r.navigateToPropertyPanel(o))}),h(13,"mat-icon",12),f(14,"settings_input_composite"),m(),f(15),_(16,"translate"),m(),h(17,"button",11),x("click",function(){let o=k(e).$implicit,r=P(2);return I(r.openRemoveSectorDialog(o))}),h(18,"mat-icon",12),f(19,"delete"),m(),f(20),_(21,"translate"),m()()()}if(n&2){let e=i.$implicit,t=we(6),o=P(2);F("selected",e===o.selectedSector),c(),E(" ",e.name," "),c(),v("matMenuTriggerFor",t),c(8),E(" ",b(11,7,"tool.sectors.contourList.editContour")," "),c(5),E(" ",b(16,9,"tool.sectors.contourList.editProperties")," "),c(5),E(" ",b(21,11,"tool.sectors.contourList.removeSector")," ")}}function qd(n,i){if(n&1){let e=K();h(0,"div",5),x("cdkDropListDropped",function(o){k(e);let r=P();return I(r.dropSectorBox(o))}),Ee(1,Wd,22,13,"div",6,si),m()}if(n&2){let e=P();c(),Oe(e.sectors())}}function Gd(n,i){n&1&&(h(0,"div",4),f(1),_(2,"translate"),m()),n&2&&(c(),y(b(2,1,"tool.sectors.contourList.noSectors")))}var ml=(()=>{let i=class i{constructor(){this.store=l(N),this.translate=l(ie),this.dialog=l(dt),this.router=l(te),this.destroyRef=l(Z),this.sectors=this.store.selectSignal(Me),this.sectorsContoursService=l(Et)}openRemoveSectorDialog(t){let o={title:this.translate.instant("tool.sectors.contourList.removeSector"),message:this.translate.instant("tool.sectors.contourList.removeSectorMessage")};this.dialog.open(Pi,{data:o}).afterClosed().pipe(q(this.destroyRef)).subscribe(r=>{r&&(this.store.dispatch(Pe.sectorRemoved({sector:t})),this.selectedSector===t&&this.resetSelectedSector(),this.sectorsContoursService.emitSectorListChanged({selectedSector:this.selectedSector}))})}emitSectorToEditContour(t){this.sectorsContoursService.emitEditedSectorContour({sector:ve(M({},t),{vertices:[...t.vertices]}),selectedVertex:t.vertices.at(-1)})}navigateToNewSectorPanel(){this.router.navigate(["/tool/sectors/contour"])}navigateToContourPanel(t){this.router.navigate([`/tool/sectors/${t.id}/contour`])}navigateToPropertyPanel(t){this.router.navigate([`/tool/sectors/${t.id}/property`])}emitSectorToEditProperty(t){this.sectorsContoursService.emitEditedSectorProperty({sector:t,mesh:null,contour:null})}onSectorSelected(t){this.selectedSector=t,this.sectorsContoursService.emitSectorListChanged({selectedSector:t})}dropSectorBox(t){this.store.dispatch(Pe.sectorShifted({prevIndex:t.previousIndex,newIndex:t.currentIndex})),this.sectorsContoursService.emitSectorListChanged({selectedSector:this.selectedSector})}resetSelectedSector(){let t=this.sectors();this.selectedSector=t.length?t[0]:null}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-sectors-contours-list"]],decls:6,vars:4,consts:[["menu","matMenu"],[1,"actions"],["mat-flat-button","","color","accent",3,"click"],["cdkDropList","",1,"sectors-list"],[1,"no-sectors"],["cdkDropList","",1,"sectors-list",3,"cdkDropListDropped"],["cdkDrag","",1,"sector-box",3,"selected"],["cdkDrag","",1,"sector-box",3,"mousedown"],["mat-icon-button","",1,"sector-actions",3,"mousedown","matMenuTriggerFor"],["matListIcon",""],["classList","paddingless"],["mat-menu-item","",3,"click"],["matListIcon","",1,"material-symbols-outlined"]],template:function(o,r){o&1&&(h(0,"div",1)(1,"button",2),x("click",function(){return r.navigateToNewSectorPanel()}),f(2),_(3,"translate"),m()(),L(4,qd,3,0,"div",3)(5,Gd,3,3,"div",4)),o&2&&(c(2),E(" ",b(3,2,"tool.sectors.contourList.addSector")," "),c(2),j(r.sectors().length?4:5))},dependencies:[V,de,Qe,qe,We,wi,Ci,xi,Si,yn,vn,Y,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px;height:100%}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .no-sectors[_ngcontent-%COMP%]{color:var(--irr-contrast-light);margin:auto}.sectors-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.sectors-list[_ngcontent-%COMP%]   .sector-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a;cursor:move}.sectors-list[_ngcontent-%COMP%]   .sector-box.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}.sectors-list[_ngcontent-%COMP%]   .sector-box[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]{margin:-6px;color:var(--irr-contrast-medium)}.sectors-list[_ngcontent-%COMP%]   .sector-box[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]    {--mat-icon-button-state-layer-size: 32px;padding:4px}.sectors-list[_ngcontent-%COMP%]   .sector-box[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]     .mat-icon{width:24px;height:24px;font-size:24px}.sectors-list[_ngcontent-%COMP%]   .sector-box[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size)}.sectors-list[_ngcontent-%COMP%]   .sector-box.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.sectors-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a;cursor:grab}.cdk-drag-preview.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}.cdk-drag-preview[_ngcontent-%COMP%]   .sector-actions[_ngcontent-%COMP%]{display:none}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0});let n=i;return n})();var Qd=["*"],hl=(()=>{let i=class i{constructor(){this.label=pe.required(),this.shouldBeOpen=pe(!0),this.isOpen=R(!0)}ngOnInit(){this.isOpen.set(this.shouldBeOpen())}toggle(){this.isOpen.update(t=>!t)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-extended-panel"]],inputs:{label:[1,"label"],shouldBeOpen:[1,"shouldBeOpen"]},ngContentSelectors:Qd,decls:8,vars:4,consts:[[1,"label"],[1,"label-content"],["mat-icon-button","",1,"toggle-button",3,"click"],[1,"chevron"],[1,"panel",3,"isOpen"]],template:function(o,r){o&1&&(et(),h(0,"div",0)(1,"span",1),f(2),m(),h(3,"button",2),x("click",function(){return r.toggle()}),h(4,"mat-icon",3),f(5," keyboard_arrow_up "),m()()(),h(6,"app-expandable-panel",4),le(7),m()),o&2&&(c(2),y(r.label()),c(2),F("chevron--closed",!r.isOpen()),c(2),v("isOpen",r.isOpen()))},dependencies:[qe,We,V,Qe,Ii],styles:["[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .label-content[_ngcontent-%COMP%]{margin-left:15px;font-weight:500}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{margin-left:auto}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]    {--mat-icon-button-state-layer-size: 32px;padding:4px}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]     .mat-icon{width:24px;height:24px;font-size:24px}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size)}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{transition:all .25s ease}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]   .chevron--closed[_ngcontent-%COMP%]{transform:rotate(180deg)}"],changeDetection:0});let n=i;return n})();var pl=(()=>{let i=class i{constructor(){this.http=l($r)}getPolygonTriangulationMesh(t){let o={headers:new Hr({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})};return this.http.post(Aa(),t,o).pipe(ni(r=>co.restore(r)))}};i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var ul=(()=>{let i=class i{constructor(){this.fb=l(Vt),this.store=l(N),this.dataService=l(pl),this.snackBar=l(ut),this.service=l(Et),this.translate=l(ie),this.route=l(ci),this.router=l(te),this.destroyRef=l(Z)}ngOnInit(){this.prepareSector(),this.sectorPropertyForm=this.generateForm(this.sector.properties),this.getTriangulationMesh()}prepareSector(){let t=this.route.snapshot.paramMap.get("id");t&&(this.sector=this.store.selectSignal(Me)().find(o=>o.id===t))}generateForm(t){return this.fb.group({sectionMaxArea:[t.sectionMaxArea,[T.required,T.min(.1)]],sectionMinAngle:[t.sectionMinAngle,[T.required,T.min(10),T.max(90)]],minTileRadius:[t.minTileRadius,[T.min(0)]],maxTileRadius:[t.maxTileRadius,[T.min(0)]],tileMargin:[t.tilesMargin,[T.required]],populationParams:this.generatePopulationParamsForm(t.populationParams),evaluationParams:this.generateEvaluationParamsForm(t.evaluationParams)})}generatePopulationParamsForm(t){return this.fb.group({initialPopulationSize:[t.initialPopulationSize,[T.required]],countOfTriesToInsertTile:[t.countOfTriesToInsertTile,[T.required]],countOfTrianglePositionDraws:[t.countOfTrianglePositionDraws,[T.required]],countOfColorMatchingAttempts:[t.countOfColorMatchingAttempts,[T.required]],iterationsCount:[t.iterationsCount,[T.required]],populationSize:[t.populationSize,[T.required]]})}generateEvaluationParamsForm(t){return this.fb.group({singleSectionPopulation:[t.singleSectionPopulation,[T.required]],overlappingAreaOutsideSector:[t.overlappingAreaOutsideSector,[T.required]],additionalPopulationOfNeighboringSectors:[t.additionalPopulationOfNeighboringSectors,[T.required]],overlappingNotPopulatedSections:[t.overlappingNotPopulatedSections,[T.required]],tileColorMismatch:[t.tileColorMismatch,[T.required]]})}navigateToSectorList(){this.router.navigate(["/tool/sectors"])}cancel(){this.service.emitEditedSectorProperty(null),this.navigateToSectorList()}save(){if(this.sectorPropertyForm.valid){let t=this.getFormData();this.store.dispatch(Pe.sectorModified({modifiedSector:ve(M({},this.sector),{properties:t})})),this.service.emitEditedSectorProperty(null),this.navigateToSectorList()}}getFormData(){return{sectionMaxArea:this.sectorPropertyForm.controls.sectionMaxArea.value,sectionMinAngle:this.sectorPropertyForm.controls.sectionMinAngle.value,minTileRadius:this.sectorPropertyForm.controls.minTileRadius.value,maxTileRadius:this.sectorPropertyForm.controls.maxTileRadius.value,tilesMargin:this.sectorPropertyForm.controls.tileMargin.value,evaluationParams:this.getFormEvaluationParams(),populationParams:this.getFormPopulationParams()}}getFormPopulationParams(){let t=this.sectorPropertyForm.controls.populationParams.controls;return{initialPopulationSize:t.initialPopulationSize.value,countOfTriesToInsertTile:t.countOfTriesToInsertTile.value,countOfTrianglePositionDraws:t.countOfTrianglePositionDraws.value,countOfColorMatchingAttempts:t.countOfColorMatchingAttempts.value,iterationsCount:t.iterationsCount.value,populationSize:t.populationSize.value}}getFormEvaluationParams(){let t=this.sectorPropertyForm.controls.evaluationParams.controls;return{singleSectionPopulation:t.singleSectionPopulation.value,overlappingAreaOutsideSector:t.overlappingAreaOutsideSector.value,additionalPopulationOfNeighboringSectors:t.additionalPopulationOfNeighboringSectors.value,overlappingNotPopulatedSections:t.overlappingNotPopulatedSections.value,tileColorMismatch:t.tileColorMismatch.value}}getTriangulationMesh(){let t={polygonVertices:this.sector.vertices,sectionMaxArea:this.sectorPropertyForm.controls.sectionMaxArea.value,sectionMinAngle:this.sectorPropertyForm.controls.sectionMinAngle.value};this.dataService.getPolygonTriangulationMesh(t).pipe(q(this.destroyRef)).subscribe({next:o=>this.service.emitEditedSectorProperty({sector:this.sector,mesh:o.triangles,contour:o.contour}),error:()=>this.showPolygonTriangulationError()})}showPolygonTriangulationError(){this.snackBar.open(this.translate.instant("tool.sectors.sectorProperty.errorOnSectorMeshRequesting"),this.translate.instant("common.ok"),{duration:2e3})}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-sector-property-editor"]],decls:96,vars:77,consts:[[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"sector-property-form",3,"formGroup"],[3,"label"],[1,"form-group"],["appearance","outline","matTooltipPosition","left",1,"density-3","no-hint",3,"matTooltip"],["matInput","","formControlName","sectionMaxArea","type","number",3,"change"],["matInput","","formControlName","sectionMinAngle","type","number",3,"change"],["matInput","","formControlName","minTileRadius","type","number"],["matInput","","formControlName","maxTileRadius","type","number"],["matInput","","formControlName","tileMargin","type","number","min","0"],[3,"label","shouldBeOpen"],["formGroupName","populationParams",1,"form-group"],["matInput","","formControlName","initialPopulationSize","type","number"],["matInput","","formControlName","populationSize","type","number"],["matInput","","formControlName","iterationsCount","type","number"],["matInput","","formControlName","countOfTrianglePositionDraws","type","number"],["matInput","","formControlName","countOfTriesToInsertTile","type","number"],["matInput","","formControlName","countOfColorMatchingAttempts","type","number"],["formGroupName","evaluationParams",1,"form-group"],["matInput","","formControlName","singleSectionPopulation","type","number"],["matInput","","formControlName","overlappingAreaOutsideSector","type","number"],["matInput","","formControlName","additionalPopulationOfNeighboringSectors","type","number"],["matInput","","formControlName","overlappingNotPopulatedSections","type","number"],["matInput","","formControlName","tileColorMismatch","type","number"]],template:function(o,r){o&1&&(h(0,"div",0)(1,"button",1),x("click",function(){return r.cancel()}),f(2),_(3,"translate"),m(),h(4,"button",2),x("click",function(){return r.save()}),f(5),_(6,"translate"),m()(),h(7,"form",3)(8,"app-extended-panel",4)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),f(12),_(13,"translate"),m(),h(14,"input",7),x("change",function(){return r.getTriangulationMesh()}),m()(),h(15,"mat-form-field",6)(16,"mat-label"),f(17),_(18,"translate"),m(),h(19,"input",8),x("change",function(){return r.getTriangulationMesh()}),m()()()(),h(20,"app-extended-panel",4)(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),f(24),_(25,"translate"),m(),w(26,"input",9),m(),h(27,"mat-form-field",6)(28,"mat-label"),f(29),_(30,"translate"),m(),w(31,"input",10),m(),h(32,"mat-form-field",6)(33,"mat-label"),f(34),_(35,"translate"),m(),w(36,"input",11),m()()(),h(37,"app-extended-panel",12)(38,"div",13)(39,"mat-form-field",6)(40,"mat-label"),f(41),_(42,"translate"),m(),w(43,"input",14),m(),h(44,"mat-form-field",6)(45,"mat-label"),f(46),_(47,"translate"),m(),w(48,"input",15),m(),h(49,"mat-form-field",6)(50,"mat-label"),f(51),_(52,"translate"),m(),w(53,"input",16),m(),h(54,"mat-form-field",6)(55,"mat-label"),f(56),_(57,"translate"),m(),w(58,"input",17),m(),h(59,"mat-form-field",6)(60,"mat-label"),f(61),_(62,"translate"),m(),w(63,"input",18),m(),h(64,"mat-form-field",6)(65,"mat-label"),f(66),_(67,"translate"),m(),w(68,"input",19),m()()(),h(69,"app-extended-panel",12)(70,"div",20)(71,"mat-form-field",6)(72,"mat-label"),f(73),_(74,"translate"),m(),w(75,"input",21),m(),h(76,"mat-form-field",6)(77,"mat-label"),f(78),_(79,"translate"),m(),w(80,"input",22),m(),h(81,"mat-form-field",6)(82,"mat-label"),f(83),_(84,"translate"),m(),w(85,"input",23),m(),h(86,"mat-form-field",6)(87,"mat-label"),f(88),_(89,"translate"),m(),w(90,"input",24),m(),h(91,"mat-form-field",6)(92,"mat-label"),f(93),_(94,"translate"),m(),w(95,"input",25),m()()()()),o&2&&(c(2),E(" ",b(3,41,"common.cancel")," "),c(3),E(" ",b(6,43,"common.confirm")," "),c(2),v("formGroup",r.sectorPropertyForm),c(),v("label",r.translate.instant("tool.sectors.sectorProperty.sectorsSize")),c(2),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.maxAreaHint")),c(2),y(b(13,45,"tool.sectors.sectorProperty.maxArea")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.minAngleHint")),c(2),y(b(18,47,"tool.sectors.sectorProperty.minAngle")),c(3),v("label",r.translate.instant("tool.sectors.sectorProperty.tilesLimitations")),c(2),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.minRadiusHint")),c(2),y(b(25,49,"tool.sectors.sectorProperty.minRadius")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.maxRadiusHint")),c(2),y(b(30,51,"tool.sectors.sectorProperty.maxRadius")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.minMarginHint")),c(2),y(b(35,53,"tool.sectors.sectorProperty.minMargin")),c(3),v("label",r.translate.instant("tool.sectors.sectorProperty.populationParams"))("shouldBeOpen",!1),c(2),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.initialPopulationSizeHint")),c(2),y(b(42,55,"tool.sectors.sectorProperty.initialPopulationSize")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.populationSizeHint")),c(2),y(b(47,57,"tool.sectors.sectorProperty.populationSize")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.iterationsCountHint")),c(2),y(b(52,59,"tool.sectors.sectorProperty.iterationsCount")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.countOfTrianglePositionDrawsHint")),c(2),y(b(57,61,"tool.sectors.sectorProperty.countOfTrianglePositionDraws")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.countOfTriesToInsertTileHint")),c(2),y(b(62,63,"tool.sectors.sectorProperty.countOfTriesToInsertTile")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.countOfColorMatchingAttemptsHint")),c(2),y(b(67,65,"tool.sectors.sectorProperty.countOfColorMatchingAttempts")),c(3),v("label",r.translate.instant("tool.sectors.sectorProperty.evaluationParams"))("shouldBeOpen",!1),c(2),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.singleSectionPopulationHint")),c(2),y(b(74,67,"tool.sectors.sectorProperty.singleSectionPopulation")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.overlappingAreaOutsideSectorHint")),c(2),y(b(79,69,"tool.sectors.sectorProperty.overlappingAreaOutsideSector")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.overlappingAreaOutsideSectorHint")),c(2),y(b(84,71,"tool.sectors.sectorProperty.additionalPopulationOfNeighboringSectors")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.overlappingNotPopulatedSectionsHint")),c(2),y(b(89,73,"tool.sectors.sectorProperty.overlappingNotPopulatedSections")),c(3),v("matTooltip",r.translate.instant("tool.sectors.sectorProperty.tileColorMismatchHint")),c(2),y(b(94,75,"tool.sectors.sectorProperty.tileColorMismatch")))},dependencies:[V,de,Ke,Re,Ie,pt,ht,ls,as,zt,Nt,st,yi,Ge,jt,us,at,Bt,ps,hl,Y,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .sector-property-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:100%}[_nghost-%COMP%]   .sector-property-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;margin-top:12px}"],changeDetection:0});let n=i;return n})();function fl(n){return i=>{let e=i.value;return n.includes(e)?{nonUnique:!0}:null}}var xn=class{static isPointInsidePolygon(i,e){if(i.length<3)return!1;let t=new B(Number.MAX_VALUE,e.y),o=new Ot(e,t),r=0,s=0;do{let a=new Ot(i[s],i[(s+1)%i.length]);if(this.areLineIntersecting(a,o)){if(this.getDirection(a.start,e,a.end)==0)return this.isPointOnLine(a,e);r++}s=(s+1)%i.length}while(s!=0);return(r&1)==1}static areLineIntersecting(i,e){let t=this.getDirection(i.start,i.end,e.start),o=this.getDirection(i.start,i.end,e.end),r=this.getDirection(e.start,e.end,i.start),s=this.getDirection(e.start,e.end,i.end);return!!(t!=o&&r!=s||t==0&&this.isPointOnLine(i,e.start)||o==0&&this.isPointOnLine(i,e.end)||r==0&&this.isPointOnLine(e,i.start)||s==0&&this.isPointOnLine(e,i.end))}static isPointOnLine(i,e){return e.x<=Math.max(i.start.x,i.end.x)&&e.x>=Math.min(i.start.x,i.end.x)&&e.y<=Math.max(i.start.y,i.end.y)&&e.y>=Math.min(i.start.y,i.end.y)}static getDirection(i,e,t){let o=(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y);return o==0?0:o<0?2:1}};function gl(){return n=>{let i=n.value;return i.length<3?{tooFewVertices:!0}:Zd(i)?{edgesIntersect:!0}:null}}function Zd(n){let i=[];for(let e=0;e<n.length;++e)i.push(new Ot(n[e],n.at(e-1)));for(let e=0;e<n.length;++e)for(let t=0;t<n.length;++t)if(!(e===t||(e+1)%n.length===t||(t+1)%n.length===e)&&xn.areLineIntersecting(i[e],i[t]))return!0;return!1}function Kd(n,i){if(n&1){let e=K();h(0,"div",11),x("mousedown",function(){let o=k(e).$implicit,r=P(2);return I(r.onBoxSelected(o))}),f(1),h(2,"button",12),x("click",function(){let o=k(e).$implicit,r=P(2);return I(r.removeVertex(o))})("mousedown",function(o){return k(e),I(o.stopPropagation())}),h(3,"mat-icon",13),f(4,"close"),m()()()}if(n&2){let e=i.$implicit,t=P(2);F("selected",e===t.selectedVertex()),c(),E(" ",t.getVertexLabel(e)," ")}}function Yd(n,i){if(n&1){let e=K();h(0,"div",9),x("cdkDropListDropped",function(o){k(e);let r=P();return I(r.dropVertexBox(o))}),Ee(1,Kd,5,3,"div",10,si),m()}if(n&2){let e=P();c(),Oe(e.sectorForm.get("vertices").value)}}function Xd(n,i){n&1&&(h(0,"div",8),f(1),_(2,"translate"),m()),n&2&&(c(),y(b(2,1,"tool.sectors.sectorContour.addSectorVertices")))}var fr=(()=>{let i=class i{constructor(){this.selectedVertex=R(null),this.store=l(N),this.snackbarService=l(ut),this.sectorsContoursService=l(Et),this.translate=l(ie),this.fb=l(Vt),this.route=l(ci),this.router=l(te),this.destroyRef=l(Z),this.changeDetector=l(Ce)}ngOnInit(){this.prepareSector(),this.initForm(),this.subscribeOnCanvasClicked(),this.emitContourPreviewChanged()}subscribeOnCanvasClicked(){this.sectorsContoursService.canvasClicked$.pipe(q(this.destroyRef)).subscribe(t=>this.addVertex(new B(t.x,t.y)))}prepareSector(){let t=this.route.snapshot.paramMap.get("id");t?(this.sector=this.store.selectSignal(Me)().find(o=>o.id===t),this.selectedVertex.set(this.sector.vertices[0])):this.sector=Et.createNewSector()}initForm(){let t=this.store.selectSignal(Me)().filter(o=>o.id!==this.sector.id).map(o=>o.name);this.sectorForm=this.fb.group({name:this.fb.nonNullable.control(this.sector.name,{validators:[T.required,fl(t)]}),color:this.fb.nonNullable.control(this.sector.color,{validators:[T.required]}),vertices:this.fb.nonNullable.control(this.sector.vertices,{validators:[gl()]})}),this.sectorForm.statusChanges.pipe(q(this.destroyRef)).subscribe(()=>this.changeDetector.markForCheck())}addVertex(t){let o=[...this.sectorForm.controls.vertices.value],r=o.indexOf(this.selectedVertex());o.splice(r+1,0,t),this.sectorForm.controls.vertices.setValue(o),this.selectedVertex.set(t),this.emitContourPreviewChanged()}removeVertex(t){let o=this.sectorForm.controls.vertices.value.filter(r=>r!==t);this.sectorForm.controls.vertices.setValue(o),t===this.selectedVertex()&&this.resetSelectedVertex(),this.emitContourPreviewChanged()}navigateToSectorList(){this.router.navigate(["/tool/sectors"])}cancel(){this.sectorsContoursService.emitEditedSectorContour(null),this.navigateToSectorList()}save(){this.sectorForm.valid?(this.store.dispatch(Pe.sectorModified({modifiedSector:this.getUpdatedSectorModel()})),this.sectorsContoursService.emitEditedSectorContour(null),this.navigateToSectorList()):this.showWarning(this.showValidationError())}showValidationError(){return this.sectorForm.controls.name.hasError("required")?this.translate.instant("tool.sectors.sectorContour.nameRequired"):this.sectorForm.controls.name.hasError("nonUnique")?this.translate.instant("tool.sectors.sectorContour.nameAlreadyInUse"):this.sectorForm.controls.vertices.hasError("tooFewVertices")?this.translate.instant("tool.sectors.sectorContour.tooFewVertices"):this.sectorForm.controls.vertices.hasError("edgesIntersect")?this.translate.instant("tool.sectors.sectorContour.linesCannotIntersecting"):""}showWarning(t){this.snackbarService.open(t,this.translate.instant("common.ok"),{duration:3e3})}onBoxSelected(t){this.selectedVertex.set(t),this.emitContourPreviewChanged()}onColorChanged(){this.emitContourPreviewChanged()}dropVertexBox(t){let o=this.sectorForm.controls.vertices.value;bn(o,t.previousIndex,t.currentIndex),this.sectorForm.controls.vertices.setValue(o),this.emitContourPreviewChanged()}getVertexLabel(t){return`(${t.x.toFixed(2)}, ${t.y.toFixed(2)})`}resetSelectedVertex(){let t=this.sectorForm.controls.vertices.value;this.selectedVertex.set(t.at(-1)??null)}emitContourPreviewChanged(){this.sectorsContoursService.emitEditedSectorContour({sector:this.getUpdatedSectorModel(),selectedVertex:this.selectedVertex()})}getUpdatedSectorModel(){let t=this.sectorForm.getRawValue();return ve(M({},this.sector),{color:t.color,name:t.name,vertices:t.vertices})}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=C({type:i,selectors:[["app-sector-contour-edition"]],decls:16,vars:12,consts:[[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"info",3,"formGroup"],["appearance","outline","subscriptSizing","dynamic",1,"density-3"],["matInput","","formControlName","name"],["formControlName","color",3,"ngModelChange","label"],["cdkDropList","",1,"vertices-list"],[1,"no-vertices"],["cdkDropList","",1,"vertices-list",3,"cdkDropListDropped"],["cdkDrag","",1,"vertex-box",3,"selected"],["cdkDrag","",1,"vertex-box",3,"mousedown"],["mat-icon-button","",1,"vertex-remove",3,"click","mousedown"],["matListIcon",""]],template:function(o,r){o&1&&(h(0,"div",0)(1,"button",1),x("click",function(){return r.cancel()}),f(2),_(3,"translate"),m(),h(4,"button",2),x("click",function(){return r.save()}),f(5),_(6,"translate"),m()(),h(7,"form",3)(8,"mat-form-field",4)(9,"mat-label"),f(10),_(11,"translate"),m(),w(12,"input",5),m(),h(13,"app-color-picker",6),x("ngModelChange",function(){return r.onColorChanged()}),m(),L(14,Yd,3,0,"div",7)(15,Xd,3,3,"div",8),m()),o&2&&(c(2),y(b(3,6,"common.cancel")),c(3),y(b(6,8,"common.confirm")),c(2),v("formGroup",r.sectorForm),c(3),y(b(11,10,"tool.sectors.sectorContour.sectorName")),c(3),v("label",r.translate.instant("tool.sectors.sectorContour.sectorColor")),c(),j(r.sectorForm.get("vertices").value.length?14:15))},dependencies:[V,de,Qe,yn,vn,Ke,Re,Ie,pt,ht,qe,We,$o,Y,zt,Nt,st,Ge,jt,at,Bt,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px;height:100%}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;flex:1}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .no-vertices[_ngcontent-%COMP%]{color:var(--irr-contrast-light);margin:auto}.vertices-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.vertices-list[_ngcontent-%COMP%]   .vertex-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a;cursor:move}.vertices-list[_ngcontent-%COMP%]   .vertex-box.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}.vertices-list[_ngcontent-%COMP%]   .vertex-box[_ngcontent-%COMP%]   .vertex-remove[_ngcontent-%COMP%]{margin:-6px;color:var(--irr-contrast-medium)}.vertices-list[_ngcontent-%COMP%]   .vertex-box[_ngcontent-%COMP%]   .vertex-remove[_ngcontent-%COMP%]    {--mat-icon-button-state-layer-size: 32px;padding:4px}.vertices-list[_ngcontent-%COMP%]   .vertex-box[_ngcontent-%COMP%]   .vertex-remove[_ngcontent-%COMP%]     .mat-icon{width:24px;height:24px;font-size:24px}.vertices-list[_ngcontent-%COMP%]   .vertex-box[_ngcontent-%COMP%]   .vertex-remove[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{width:var(--mat-icon-button-state-layer-size);height:var(--mat-icon-button-state-layer-size)}.vertices-list[_ngcontent-%COMP%]   .vertex-box.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.vertices-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:10px 16px;box-sizing:border-box;border-radius:4px;background:var(--irr-contrast-lightest);color:var(--irr-contrast-high);font-size:14px;box-shadow:0 0 5px 1px #0000001a;cursor:grab}.cdk-drag-preview.selected[_ngcontent-%COMP%]{background:var(--irr-contrast-light)}.cdk-drag-preview[_ngcontent-%COMP%]   .vertex-remove[_ngcontent-%COMP%]{display:none}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0});let n=i;return n})();var LC=[{path:"",redirectTo:"config",pathMatch:"full"},{path:"config",component:Ss,children:[{path:"",component:As},{path:"project",component:ia}]},{path:"tray",component:na,canActivate:[zo],children:[{path:"",component:ga},{path:"random",component:ha},{path:"tile/:id",component:ya}]},{path:"sectors",component:Ea,canActivate:[zo],children:[{path:"",component:ml},{path:":id/property",component:ul},{path:":id/contour",component:fr},{path:"contour",component:fr}]},{path:"generating",component:Ba,canActivate:[zo,Va]}];export{LC as toolRoutes};
